{"format_version":"1.1","terraform_version":"1.4.4","variables":{"server_port":{"value":80}},"planned_values":{"outputs":{"state_bucket_arn":{"sensitive":false,"type":"string","value":"arn:aws:s3:::n9n-s3-state-220523"},"state_dynamo":{"sensitive":false,"type":"string","value":"tf_state_lock"}},"root_module":{"resources":[{"address":"aws_dynamodb_table.tf-state-lock","mode":"managed","type":"aws_dynamodb_table","name":"tf-state-lock","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:us-east-1:444171185861:table/tf_state_lock","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PROVISIONED","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"tf_state_lock","local_secondary_index":[],"name":"tf_state_lock","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":5,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Name":"Dynamodb Terraform State Lock Table"},"tags_all":{"Name":"Dynamodb Terraform State Lock Table"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"sensitive_values":{"attribute":[{}],"global_secondary_index":[],"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}},{"address":"aws_kms_key.s3-kms-key","mode":"managed","type":"aws_kms_key","name":"s3-kms-key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","bypass_policy_lockout_safety_check":false,"custom_key_store_id":"","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"Use this key to encrypt S3 buckets","enable_key_rotation":false,"id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","is_enabled":true,"key_id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::444171185861:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_s3_bucket.s3-tf-bucket","mode":"managed","type":"aws_s3_bucket","name":"s3-tf-bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::n9n-s3-state-220523","bucket":"n9n-s3-state-220523","bucket_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"n9n-s3-state-220523","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]}],"tags":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"tags_all":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"timeouts":null,"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"aws_s3_bucket_acl.s3-tf-state-bucket-acl","mode":"managed","type":"aws_s3_bucket_acl","name":"s3-tf-state-bucket-acl","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"admin-aws","email_address":"","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"admin-aws","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2"}]}],"acl":"private","bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523,private"},"sensitive_values":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]}},{"address":"aws_s3_bucket_public_access_block.s3-pub-block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3-pub-block","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"n9n-s3-state-220523","id":"n9n-s3-state-220523","ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"aws_s3_bucket_server_side_encryption_configuration.s3-sse-config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"s3-sse-config","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"aws_s3_bucket_versioning.s3-tf-bucket-versioning","mode":"managed","type":"aws_s3_bucket_versioning","name":"s3-tf-bucket-versioning","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","mfa":null,"versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}}],"child_modules":[{"resources":[{"address":"module.test_cluster.aws_autoscaling_group.webserver_cluster_asg","mode":"managed","type":"aws_autoscaling_group","name":"webserver_cluster_asg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_rebalance":null,"context":null,"default_instance_warmup":null,"desired_capacity_type":null,"enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"ELB","initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":null,"max_instance_lifetime":null,"max_size":10,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":2,"mixed_instances_policy":[],"placement_group":null,"protect_from_scale_in":false,"suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true,"value":"tf-asg-example"}],"tags":null,"termination_policies":null,"timeouts":null,"vpc_zone_identifier":["subnet-02f38aa3a0e2d55e1","subnet-0cb0963cf813967e8","subnet-0d0ef7f6e6abfe160"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"sensitive_values":{"availability_zones":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"mixed_instances_policy":[],"tag":[{}],"target_group_arns":[],"vpc_zone_identifier":[false,false,false],"warm_pool":[]}},{"address":"module.test_cluster.aws_launch_configuration.webserver_cluster_launch","mode":"managed","type":"aws_launch_configuration","name":"webserver_cluster_launch","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"enable_monitoring":true,"ephemeral_block_device":[],"iam_instance_profile":null,"image_id":"ami-0fb653ca2d3203ac1","instance_type":"t2.micro","placement_tenancy":null,"spot_price":null,"user_data":"ec0bb0bade64abae2e8ca94e5346b688c3b4bb7a","user_data_base64":null,"vpc_classic_link_id":null,"vpc_classic_link_security_groups":null},"sensitive_values":{"ebs_block_device":[],"ephemeral_block_device":[],"metadata_options":[],"root_block_device":[],"security_groups":[]}},{"address":"module.test_cluster.aws_lb.webserver_cluster_lb","mode":"managed","type":"aws_lb","name":"webserver_cluster_lb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"load_balancer_type":"application","name":"webserver-cluster-lb","name_prefix":null,"preserve_host_header":false,"subnets":["subnet-02f38aa3a0e2d55e1","subnet-0cb0963cf813967e8","subnet-0d0ef7f6e6abfe160"],"tags":null,"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[],"security_groups":[],"subnet_mapping":[],"subnets":[false,false,false],"tags_all":{}}},{"address":"module.test_cluster.aws_lb_listener.webserver_cluster_listener","mode":"managed","type":"aws_lb_listener","name":"webserver_cluster_listener","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{"content_type":"text/plain","message_body":"404: page not found","status_code":"404"}],"forward":[],"redirect":[],"target_group_arn":null,"type":"fixed-response"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"redirect":[]}],"tags_all":{}}},{"address":"module.test_cluster.aws_lb_listener_rule.webserver_cluster_rule","mode":"managed","type":"aws_lb_listener_rule","name":"webserver_cluster_rule","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["*"]}],"query_string":[],"source_ip":[]}],"priority":100,"tags":null},"sensitive_values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false]}],"query_string":[],"source_ip":[]}],"tags_all":{}}},{"address":"module.test_cluster.aws_lb_target_group.webserver_cluster_targets","mode":"managed","type":"aws_lb_target_group","name":"webserver_cluster_targets","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":15,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":3,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"webserver-cluster-targets","name_prefix":null,"port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance","vpc_id":"vpc-06f4aeba4047ac031"},"sensitive_values":{"health_check":[{}],"stickiness":[],"tags_all":{},"target_failover":[]}},{"address":"module.test_cluster.aws_security_group.webserver_cluster_sg","mode":"managed","type":"aws_security_group","name":"webserver_cluster_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"webserver-cluster-alb","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}],"address":"module.test_cluster"}]}},"resource_changes":[{"address":"aws_dynamodb_table.tf-state-lock","mode":"managed","type":"aws_dynamodb_table","name":"tf-state-lock","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:dynamodb:us-east-1:444171185861:table/tf_state_lock","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PROVISIONED","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"tf_state_lock","local_secondary_index":[],"name":"tf_state_lock","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":5,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Name":"Dynamodb Terraform State Lock Table"},"tags_all":{"Name":"Dynamodb Terraform State Lock Table"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"after":{"arn":"arn:aws:dynamodb:us-east-1:444171185861:table/tf_state_lock","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PROVISIONED","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"tf_state_lock","local_secondary_index":[],"name":"tf_state_lock","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":5,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Name":"Dynamodb Terraform State Lock Table"},"tags_all":{"Name":"Dynamodb Terraform State Lock Table"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"after_unknown":{},"before_sensitive":{"attribute":[{}],"global_secondary_index":[],"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]},"after_sensitive":{"attribute":[{}],"global_secondary_index":[],"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}}},{"address":"aws_kms_key.s3-kms-key","mode":"managed","type":"aws_kms_key","name":"s3-kms-key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","bypass_policy_lockout_safety_check":false,"custom_key_store_id":"","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"Use this key to encrypt S3 buckets","enable_key_rotation":false,"id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","is_enabled":true,"key_id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::444171185861:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","bypass_policy_lockout_safety_check":false,"custom_key_store_id":"","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"Use this key to encrypt S3 buckets","enable_key_rotation":false,"id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","is_enabled":true,"key_id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::444171185861:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_s3_bucket.s3-tf-bucket","mode":"managed","type":"aws_s3_bucket","name":"s3-tf-bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::n9n-s3-state-220523","bucket":"n9n-s3-state-220523","bucket_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"n9n-s3-state-220523","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]}],"tags":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"tags_all":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"timeouts":null,"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::n9n-s3-state-220523","bucket":"n9n-s3-state-220523","bucket_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"n9n-s3-state-220523","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]}],"tags":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"tags_all":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"timeouts":null,"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"aws_s3_bucket_acl.s3-tf-state-bucket-acl","mode":"managed","type":"aws_s3_bucket_acl","name":"s3-tf-state-bucket-acl","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"admin-aws","email_address":"","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"admin-aws","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2"}]}],"acl":"private","bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523,private"},"after":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"admin-aws","email_address":"","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"admin-aws","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2"}]}],"acl":"private","bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523,private"},"after_unknown":{},"before_sensitive":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]},"after_sensitive":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]}}},{"address":"aws_s3_bucket_public_access_block.s3-pub-block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3-pub-block","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"block_public_acls":true,"block_public_policy":true,"bucket":"n9n-s3-state-220523","id":"n9n-s3-state-220523","ignore_public_acls":true,"restrict_public_buckets":true},"after":{"block_public_acls":true,"block_public_policy":true,"bucket":"n9n-s3-state-220523","id":"n9n-s3-state-220523","ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"aws_s3_bucket_server_side_encryption_configuration.s3-sse-config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"s3-sse-config","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]},"after":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]},"after_unknown":{},"before_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"aws_s3_bucket_versioning.s3-tf-bucket-versioning","mode":"managed","type":"aws_s3_bucket_versioning","name":"s3-tf-bucket-versioning","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","mfa":null,"versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"after":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","mfa":null,"versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"after_unknown":{},"before_sensitive":{"versioning_configuration":[{}]},"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"module.test_cluster.aws_autoscaling_group.webserver_cluster_asg","module_address":"module.test_cluster","mode":"managed","type":"aws_autoscaling_group","name":"webserver_cluster_asg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_rebalance":null,"context":null,"default_instance_warmup":null,"desired_capacity_type":null,"enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"ELB","initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":null,"max_instance_lifetime":null,"max_size":10,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":2,"mixed_instances_policy":[],"placement_group":null,"protect_from_scale_in":false,"suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true,"value":"tf-asg-example"}],"tags":null,"termination_policies":null,"timeouts":null,"vpc_zone_identifier":["subnet-02f38aa3a0e2d55e1","subnet-0cb0963cf813967e8","subnet-0d0ef7f6e6abfe160"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"after_unknown":{"arn":true,"availability_zones":true,"default_cooldown":true,"desired_capacity":true,"id":true,"initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":true,"launch_template":[],"mixed_instances_policy":[],"name":true,"name_prefix":true,"predicted_capacity":true,"service_linked_role_arn":true,"tag":[{}],"target_group_arns":true,"vpc_zone_identifier":[false,false,false],"warm_pool":[],"warm_pool_size":true},"before_sensitive":false,"after_sensitive":{"availability_zones":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"mixed_instances_policy":[],"tag":[{}],"target_group_arns":[],"vpc_zone_identifier":[false,false,false],"warm_pool":[]}}},{"address":"module.test_cluster.aws_launch_configuration.webserver_cluster_launch","module_address":"module.test_cluster","mode":"managed","type":"aws_launch_configuration","name":"webserver_cluster_launch","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"enable_monitoring":true,"ephemeral_block_device":[],"iam_instance_profile":null,"image_id":"ami-0fb653ca2d3203ac1","instance_type":"t2.micro","placement_tenancy":null,"spot_price":null,"user_data":"ec0bb0bade64abae2e8ca94e5346b688c3b4bb7a","user_data_base64":null,"vpc_classic_link_id":null,"vpc_classic_link_security_groups":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"ebs_block_device":true,"ebs_optimized":true,"ephemeral_block_device":[],"id":true,"key_name":true,"metadata_options":true,"name":true,"name_prefix":true,"root_block_device":true,"security_groups":true},"before_sensitive":false,"after_sensitive":{"ebs_block_device":[],"ephemeral_block_device":[],"metadata_options":[],"root_block_device":[],"security_groups":[]}}},{"address":"module.test_cluster.aws_lb.webserver_cluster_lb","module_address":"module.test_cluster","mode":"managed","type":"aws_lb","name":"webserver_cluster_lb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"load_balancer_type":"application","name":"webserver-cluster-lb","name_prefix":null,"preserve_host_header":false,"subnets":["subnet-02f38aa3a0e2d55e1","subnet-0cb0963cf813967e8","subnet-0d0ef7f6e6abfe160"],"tags":null,"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"dns_name":true,"id":true,"internal":true,"ip_address_type":true,"security_groups":true,"subnet_mapping":true,"subnets":[false,false,false],"tags_all":true,"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"security_groups":[],"subnet_mapping":[],"subnets":[false,false,false],"tags_all":{}}}},{"address":"module.test_cluster.aws_lb_listener.webserver_cluster_listener","module_address":"module.test_cluster","mode":"managed","type":"aws_lb_listener","name":"webserver_cluster_listener","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{"content_type":"text/plain","message_body":"404: page not found","status_code":"404"}],"forward":[],"redirect":[],"target_group_arn":null,"type":"fixed-response"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"order":true,"redirect":[]}],"id":true,"load_balancer_arn":true,"ssl_policy":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"redirect":[]}],"tags_all":{}}}},{"address":"module.test_cluster.aws_lb_listener_rule.webserver_cluster_rule","module_address":"module.test_cluster","mode":"managed","type":"aws_lb_listener_rule","name":"webserver_cluster_rule","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["*"]}],"query_string":[],"source_ip":[]}],"priority":100,"tags":null},"after_unknown":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"arn":true,"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false]}],"query_string":[],"source_ip":[]}],"id":true,"listener_arn":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false]}],"query_string":[],"source_ip":[]}],"tags_all":{}}}},{"address":"module.test_cluster.aws_lb_target_group.webserver_cluster_targets","module_address":"module.test_cluster","mode":"managed","type":"aws_lb_target_group","name":"webserver_cluster_targets","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":15,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":3,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"webserver-cluster-targets","name_prefix":null,"port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance","vpc_id":"vpc-06f4aeba4047ac031"},"after_unknown":{"arn":true,"arn_suffix":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancing_algorithm_type":true,"load_balancing_cross_zone_enabled":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags_all":true,"target_failover":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"stickiness":[],"tags_all":{},"target_failover":[]}}},{"address":"module.test_cluster.aws_security_group.webserver_cluster_sg","module_address":"module.test_cluster","mode":"managed","type":"aws_security_group","name":"webserver_cluster_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"webserver-cluster-alb","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}}],"output_changes":{"state_bucket_arn":{"actions":["no-op"],"before":"arn:aws:s3:::n9n-s3-state-220523","after":"arn:aws:s3:::n9n-s3-state-220523","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"state_dynamo":{"actions":["no-op"],"before":"tf_state_lock","after":"tf_state_lock","after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.4.4","values":{"outputs":{"state_bucket_arn":{"sensitive":false,"value":"arn:aws:s3:::n9n-s3-state-220523","type":"string"},"state_dynamo":{"sensitive":false,"value":"tf_state_lock","type":"string"}},"root_module":{"resources":[{"address":"aws_dynamodb_table.tf-state-lock","mode":"managed","type":"aws_dynamodb_table","name":"tf-state-lock","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:us-east-1:444171185861:table/tf_state_lock","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PROVISIONED","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"tf_state_lock","local_secondary_index":[],"name":"tf_state_lock","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":5,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Name":"Dynamodb Terraform State Lock Table"},"tags_all":{"Name":"Dynamodb Terraform State Lock Table"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"sensitive_values":{"attribute":[{}],"global_secondary_index":[],"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}},{"address":"aws_kms_key.s3-kms-key","mode":"managed","type":"aws_kms_key","name":"s3-kms-key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","bypass_policy_lockout_safety_check":false,"custom_key_store_id":"","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"Use this key to encrypt S3 buckets","enable_key_rotation":false,"id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","is_enabled":true,"key_id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::444171185861:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_s3_bucket.s3-tf-bucket","mode":"managed","type":"aws_s3_bucket","name":"s3-tf-bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::n9n-s3-state-220523","bucket":"n9n-s3-state-220523","bucket_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"n9n-s3-state-220523","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]}],"tags":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"tags_all":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"timeouts":null,"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"aws_s3_bucket_acl.s3-tf-state-bucket-acl","mode":"managed","type":"aws_s3_bucket_acl","name":"s3-tf-state-bucket-acl","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"admin-aws","email_address":"","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"admin-aws","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2"}]}],"acl":"private","bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523,private"},"sensitive_values":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]},"depends_on":["aws_s3_bucket.s3-tf-bucket"]},{"address":"aws_s3_bucket_public_access_block.s3-pub-block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3-pub-block","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"n9n-s3-state-220523","id":"n9n-s3-state-220523","ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{},"depends_on":["aws_s3_bucket.s3-tf-bucket"]},{"address":"aws_s3_bucket_server_side_encryption_configuration.s3-sse-config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"s3-sse-config","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"depends_on":["aws_kms_key.s3-kms-key","aws_s3_bucket.s3-tf-bucket"]},{"address":"aws_s3_bucket_versioning.s3-tf-bucket-versioning","mode":"managed","type":"aws_s3_bucket_versioning","name":"s3-tf-bucket-versioning","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","mfa":null,"versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]},"depends_on":["aws_s3_bucket.s3-tf-bucket"]}],"child_modules":[{"resources":[{"address":"module.test_cluster.data.aws_subnets.default","mode":"data","type":"aws_subnets","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[{"name":"vpc-id","values":["vpc-06f4aeba4047ac031"]}],"id":"us-east-2","ids":["subnet-0cb0963cf813967e8","subnet-02f38aa3a0e2d55e1","subnet-0d0ef7f6e6abfe160"],"tags":null,"timeouts":null},"sensitive_values":{"filter":[{"values":[false]}],"ids":[false,false,false]}},{"address":"module.test_cluster.data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-2:444171185861:vpc/vpc-06f4aeba4047ac031","cidr_block":"172.31.0.0/16","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-03b8690069849a55b","cidr_block":"172.31.0.0/16","state":"associated"}],"default":true,"dhcp_options_id":"dopt-037cca00c89339370","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"filter":null,"id":"vpc-06f4aeba4047ac031","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-0fccbe7d7bdf560bc","owner_id":"444171185861","state":null,"tags":{},"timeouts":null},"sensitive_values":{"cidr_block_associations":[{}],"tags":{}}}],"address":"module.test_cluster"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","expressions":{"region":{"constant_value":"us-east-1"}}},"module.test_cluster:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.test_cluster","expressions":{"region":{"constant_value":"us-east-2"}}}},"root_module":{"outputs":{"state_bucket_arn":{"expression":{"references":["aws_s3_bucket.s3-tf-bucket.arn","aws_s3_bucket.s3-tf-bucket"]},"description":"The ARN of the S3 bucket holding state"},"state_dynamo":{"expression":{"references":["aws_dynamodb_table.tf-state-lock.name","aws_dynamodb_table.tf-state-lock"]},"description":"The name of the DynamoDB table holding state"}},"resources":[{"address":"aws_dynamodb_table.tf-state-lock","mode":"managed","type":"aws_dynamodb_table","name":"tf-state-lock","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"LockID"},"type":{"constant_value":"S"}}],"hash_key":{"constant_value":"LockID"},"name":{"constant_value":"tf_state_lock"},"read_capacity":{"constant_value":5},"tags":{"constant_value":{"Name":"Dynamodb Terraform State Lock Table"}},"write_capacity":{"constant_value":5}},"schema_version":1},{"address":"aws_kms_key.s3-kms-key","mode":"managed","type":"aws_kms_key","name":"s3-kms-key","provider_config_key":"aws","expressions":{"description":{"constant_value":"Use this key to encrypt S3 buckets"}},"schema_version":0},{"address":"aws_s3_bucket.s3-tf-bucket","mode":"managed","type":"aws_s3_bucket","name":"s3-tf-bucket","provider_config_key":"aws","expressions":{"bucket":{"constant_value":"n9n-s3-state-220523"},"tags":{"constant_value":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"}}},"schema_version":0},{"address":"aws_s3_bucket_acl.s3-tf-state-bucket-acl","mode":"managed","type":"aws_s3_bucket_acl","name":"s3-tf-state-bucket-acl","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["aws_s3_bucket.s3-tf-bucket.id","aws_s3_bucket.s3-tf-bucket"]}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.s3-pub-block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3-pub-block","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.s3-tf-bucket.id","aws_s3_bucket.s3-tf-bucket"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.s3-sse-config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"s3-sse-config","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.s3-tf-bucket.id","aws_s3_bucket.s3-tf-bucket"]},"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["aws_kms_key.s3-kms-key.arn","aws_kms_key.s3-kms-key"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.s3-tf-bucket-versioning","mode":"managed","type":"aws_s3_bucket_versioning","name":"s3-tf-bucket-versioning","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.s3-tf-bucket.id","aws_s3_bucket.s3-tf-bucket"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0}],"module_calls":{"test_cluster":{"source":"./stage/services/webserver-cluster","module":{"resources":[{"address":"aws_autoscaling_group.webserver_cluster_asg","mode":"managed","type":"aws_autoscaling_group","name":"webserver_cluster_asg","provider_config_key":"module.test_cluster:aws","expressions":{"health_check_type":{"constant_value":"ELB"},"launch_configuration":{"references":["aws_launch_configuration.webserver_cluster_launch.name","aws_launch_configuration.webserver_cluster_launch"]},"max_size":{"constant_value":10},"min_size":{"constant_value":2},"tag":[{"key":{"constant_value":"Name"},"propagate_at_launch":{"constant_value":true},"value":{"constant_value":"tf-asg-example"}}],"target_group_arns":{"references":["aws_lb_target_group.webserver_cluster_targets.arn","aws_lb_target_group.webserver_cluster_targets"]},"vpc_zone_identifier":{"references":["data.aws_subnets.default.ids","data.aws_subnets.default"]}},"schema_version":0},{"address":"aws_launch_configuration.webserver_cluster_launch","mode":"managed","type":"aws_launch_configuration","name":"webserver_cluster_launch","provider_config_key":"module.test_cluster:aws","expressions":{"image_id":{"constant_value":"ami-0fb653ca2d3203ac1"},"instance_type":{"constant_value":"t2.micro"},"security_groups":{"references":["aws_security_group.webserver_cluster_sg.id","aws_security_group.webserver_cluster_sg"]},"user_data":{"references":["var.server_port"]}},"schema_version":0},{"address":"aws_lb.webserver_cluster_lb","mode":"managed","type":"aws_lb","name":"webserver_cluster_lb","provider_config_key":"module.test_cluster:aws","expressions":{"load_balancer_type":{"constant_value":"application"},"name":{"constant_value":"webserver-cluster-lb"},"security_groups":{"references":["aws_security_group.webserver_cluster_sg.id","aws_security_group.webserver_cluster_sg"]},"subnets":{"references":["data.aws_subnets.default.ids","data.aws_subnets.default"]}},"schema_version":0},{"address":"aws_lb_listener.webserver_cluster_listener","mode":"managed","type":"aws_lb_listener","name":"webserver_cluster_listener","provider_config_key":"module.test_cluster:aws","expressions":{"default_action":[{"fixed_response":[{"content_type":{"constant_value":"text/plain"},"message_body":{"constant_value":"404: page not found"},"status_code":{"constant_value":404}}],"type":{"constant_value":"fixed-response"}}],"load_balancer_arn":{"references":["aws_lb.webserver_cluster_lb.arn","aws_lb.webserver_cluster_lb"]},"port":{"references":["var.server_port"]},"protocol":{"constant_value":"HTTP"}},"schema_version":0},{"address":"aws_lb_listener_rule.webserver_cluster_rule","mode":"managed","type":"aws_lb_listener_rule","name":"webserver_cluster_rule","provider_config_key":"module.test_cluster:aws","expressions":{"action":[{"target_group_arn":{"references":["aws_lb_target_group.webserver_cluster_targets.arn","aws_lb_target_group.webserver_cluster_targets"]},"type":{"constant_value":"forward"}}],"condition":[{"path_pattern":[{"values":{"constant_value":["*"]}}]}],"listener_arn":{"references":["aws_lb_listener.webserver_cluster_listener.arn","aws_lb_listener.webserver_cluster_listener"]},"priority":{"constant_value":100}},"schema_version":0},{"address":"aws_lb_target_group.webserver_cluster_targets","mode":"managed","type":"aws_lb_target_group","name":"webserver_cluster_targets","provider_config_key":"module.test_cluster:aws","expressions":{"health_check":[{"healthy_threshold":{"constant_value":2},"interval":{"constant_value":15},"matcher":{"constant_value":"200"},"path":{"constant_value":"/"},"protocol":{"constant_value":"HTTP"},"timeout":{"constant_value":3},"unhealthy_threshold":{"constant_value":2}}],"name":{"constant_value":"webserver-cluster-targets"},"port":{"references":["var.server_port"]},"protocol":{"constant_value":"HTTP"},"vpc_id":{"references":["data.aws_vpc.default.id","data.aws_vpc.default"]}},"schema_version":0},{"address":"aws_security_group.webserver_cluster_sg","mode":"managed","type":"aws_security_group","name":"webserver_cluster_sg","provider_config_key":"module.test_cluster:aws","expressions":{"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.server_port","var.server_port"]},"name":{"constant_value":"webserver-cluster-alb"}},"schema_version":1},{"address":"data.aws_subnets.default","mode":"data","type":"aws_subnets","name":"default","provider_config_key":"module.test_cluster:aws","expressions":{"filter":[{"name":{"constant_value":"vpc-id"},"values":{"references":["data.aws_vpc.default.id","data.aws_vpc.default"]}}]},"schema_version":0},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_config_key":"module.test_cluster:aws","expressions":{"default":{"constant_value":true}},"schema_version":0}],"variables":{"server_port":{"default":80,"description":"Port the webserver listens on"}}}}},"variables":{"server_port":{"default":80,"description":"Port the server listens on"}}}},"relevant_attributes":[{"resource":"module.test_cluster.data.aws_subnets.default","attribute":["ids"]},{"resource":"module.test_cluster.aws_lb_target_group.webserver_cluster_targets","attribute":["arn"]},{"resource":"module.test_cluster.aws_lb.webserver_cluster_lb","attribute":["arn"]},{"resource":"module.test_cluster.aws_lb_listener.webserver_cluster_listener","attribute":["arn"]},{"resource":"module.test_cluster.aws_security_group.webserver_cluster_sg","attribute":["id"]},{"resource":"module.test_cluster.data.aws_vpc.default","attribute":["id"]},{"resource":"module.test_cluster.aws_launch_configuration.webserver_cluster_launch","attribute":["name"]}]}

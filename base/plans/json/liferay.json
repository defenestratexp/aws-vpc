{"format_version":"1.1","terraform_version":"1.4.4","variables":{"region":{"value":"us-east-1"}},"planned_values":{"outputs":{"state_bucket_arn":{"sensitive":false,"type":"string","value":"arn:aws:s3:::n9n-s3-state-220523"},"state_dynamo":{"sensitive":false,"type":"string","value":"tf_state_lock"}},"root_module":{"resources":[{"address":"aws_dynamodb_table.tf-state-lock","mode":"managed","type":"aws_dynamodb_table","name":"tf-state-lock","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:us-east-1:444171185861:table/tf_state_lock","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PROVISIONED","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"tf_state_lock","local_secondary_index":[],"name":"tf_state_lock","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":5,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Name":"Dynamodb Terraform State Lock Table"},"tags_all":{"Name":"Dynamodb Terraform State Lock Table"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"sensitive_values":{"attribute":[{}],"global_secondary_index":[],"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}},{"address":"aws_kms_key.s3-kms-key","mode":"managed","type":"aws_kms_key","name":"s3-kms-key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","bypass_policy_lockout_safety_check":false,"custom_key_store_id":"","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"Use this key to encrypt S3 buckets","enable_key_rotation":false,"id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","is_enabled":true,"key_id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::444171185861:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_s3_bucket.s3-tf-bucket","mode":"managed","type":"aws_s3_bucket","name":"s3-tf-bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::n9n-s3-state-220523","bucket":"n9n-s3-state-220523","bucket_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"n9n-s3-state-220523","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]}],"tags":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"tags_all":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"timeouts":null,"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"aws_s3_bucket_acl.s3-tf-state-bucket-acl","mode":"managed","type":"aws_s3_bucket_acl","name":"s3-tf-state-bucket-acl","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"admin-aws","email_address":"","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"admin-aws","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2"}]}],"acl":"private","bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523,private"},"sensitive_values":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]}},{"address":"aws_s3_bucket_public_access_block.s3-pub-block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3-pub-block","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"n9n-s3-state-220523","id":"n9n-s3-state-220523","ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"aws_s3_bucket_server_side_encryption_configuration.s3-sse-config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"s3-sse-config","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"aws_s3_bucket_versioning.s3-tf-bucket-versioning","mode":"managed","type":"aws_s3_bucket_versioning","name":"s3-tf-bucket-versioning","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","mfa":null,"versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}}],"child_modules":[{"address":"module.dev_vpc","child_modules":[{"resources":[{"address":"module.dev_vpc.module.vpc.aws_eip.n9n_nat_eip","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-001f842189e1f930a","associate_with_private_ip":null,"association_id":"eipassoc-0b72c72ce9dbb6c70","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-001f842189e1f930a","instance":"","network_border_group":"us-east-1","network_interface":"eni-04e6ad75805323268","private_dns":"ip-10-0-1-47.ec2.internal","private_ip":"10.0.1.47","public_dns":"ec2-54-175-233-149.compute-1.amazonaws.com","public_ip":"54.175.233.149","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.aws_internet_gateway.n9n_ig","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-016d54fc87a6cb779","id":"igw-016d54fc87a6cb779","owner_id":"444171185861","tags":{"Environment":"dev","Name":"dev-igw"},"tags_all":{"Environment":"dev","Name":"dev-igw"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-001f842189e1f930a","association_id":"eipassoc-0b72c72ce9dbb6c70","connectivity_type":"public","id":"nat-0433ec27e259a40de","network_interface_id":"eni-04e6ad75805323268","private_ip":"10.0.1.47","public_ip":"54.175.233.149","subnet_id":"subnet-0f0a7129fb658f9ad","tags":{"Environment":"dev","Name":"dev-nat"},"tags_all":{"Environment":"dev","Name":"dev-nat"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-09c72a3f8852d80281080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0433ec27e259a40de","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-09c72a3f8852d8028","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{}},{"address":"module.dev_vpc.module.vpc.aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-016d54fc87a6cb779","id":"r-rtb-037ee04ee10c1710f1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-037ee04ee10c1710f","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{}},{"address":"module.dev_vpc.module.vpc.aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-09c72a3f8852d8028","id":"rtb-09c72a3f8852d8028","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0433ec27e259a40de","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"dev-private-route-table"},"tags_all":{"Environment":"dev","Name":"dev-private-route-table"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-037ee04ee10c1710f","id":"rtb-037ee04ee10c1710f","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-016d54fc87a6cb779","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"dev-public-route-table"},"tags_all":{"Environment":"dev","Name":"dev-public-route-table"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-025fa3a543c1ba95c","route_table_id":"rtb-09c72a3f8852d8028","subnet_id":"subnet-0bc5cd4cf5054059b","timeouts":null},"sensitive_values":{}},{"address":"module.dev_vpc.module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0f337c8f1cd26b10a","route_table_id":"rtb-037ee04ee10c1710f","subnet_id":"subnet-0f0a7129fb658f9ad","timeouts":null},"sensitive_values":{}},{"address":"module.dev_vpc.module.vpc.aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-02985b94ee4a73439","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-02985b94ee4a73439","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"dev-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"dev-default-sg"},"tags_all":{"Environment":"dev","Name":"dev-default-sg"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.aws_subnet.private_subnet[0]","mode":"managed","type":"aws_subnet","name":"private_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0bc5cd4cf5054059b","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0bc5cd4cf5054059b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"tags_all":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.aws_subnet.public_subnet[0]","mode":"managed","type":"aws_subnet","name":"public_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0f0a7129fb658f9ad","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0f0a7129fb658f9ad","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"dev","Filter":"public_subnet","Name":"dev-us-east-1a-public-subnet"},"tags_all":{"Environment":"dev","Filter":"public_subnet","Name":"dev-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-05c8af84715ad862a","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0391704db9e611349","default_route_table_id":"rtb-0df51899206ee6dd5","default_security_group_id":"sg-0c20b46066b700070","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-05c8af84715ad862a","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0df51899206ee6dd5","owner_id":"444171185861","tags":{"Environment":"dev","Name":"dev-vpc"},"tags_all":{"Environment":"dev","Name":"dev-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.dev_vpc.module.vpc","child_modules":[{"resources":[{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_autoscaling_group.bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:a3d29af1-e3e5-4fce-98e8-2c29b70f1683:autoScalingGroupName/bastion-service-asg2023062813162640220000000f","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162640220000000f","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-0fb9e9c81c048752f","launch_template_name":"bastion-service-host-dev2023062813162582530000000b","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162640220000000f","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-0bc5cd4cf5054059b"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile[0]","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:instance-profile/dev-us-east-1-vpc-05c8af84715ad862a_bastion","create_date":"2023-06-28T13:16:24Z","id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","role":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3CRYTHZF4JA"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","description":"","id":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3CRNOB26J7V","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role[0]","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:role/dev-us-east-1-vpc-05c8af84715ad862a_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:22Z","description":"","force_detach_policies":false,"id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion"],"max_session_duration":3600,"name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3C2ZPASLCDE"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role_policy_attachment.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion-20230628131624449900000005","policy_arn":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","role":"dev-us-east-1-vpc-05c8af84715ad862a_bastion"},"sensitive_values":{}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-0fb9e9c81c048752f","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion"}],"id":"lt-0fb9e9c81c048752f","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-dev2023062813162582530000000b","name_prefix":"bastion-service-host-dev","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-00255059020328621"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIGRldi11cy1lYXN0LTEtdnBjLTA1YzhhZjg0NzE1YWQ4NjJhLVwkKGVjaG8gJWkgfCBjdXQgLWQtIC1mMSkgLXYgL2Rldi9sb2c6L2Rldi9sb2cgLXYgL29wdC9pYW1faGVscGVyOi9vcHQ6cm8gc3NoZF93b3JrZXIiClN0YW5kYXJkSW5wdXQ9c29ja2V0ClJ1bnRpbWVNYXhTZWM9NDMyMDAKCltJbnN0YWxsXQpXYW50ZWRCeT1tdWx0aS11c2VyLnRhcmdldApFT0YKI3NldCBob3N0IHNzaGQgdG8gcnVuIG9uIHBvcnQgMjIyMiBn9nmQgcmVzdGF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W4gc3BlY2lmaWMgc2V0IHVwIGZvciBkb2NrZXIgaHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vaW5zdGFsbC9saW51eC9kb2NrZXItY2UvZGViaWFuLyNpbnN0YWxsLXVzaW5nLXRoZS1yZXBvc2l0b3J5CmFwdC1nZXQgdXBkYXRlCkRFQklBTl9GUk9OVEVORD1ub25pbnRlcmFjdGl2ZSBhcHQtZ2V0IGluc3Rn9nGwgLXkgYXB0LXRyYW5zcG9ydC1odHRwcyBjYS1jZXJ0aWZpY2F0ZXMgY3VybCBncGcgc29mdHdhcmUtcHJvcGVydGllcy1jb21tb24gZG9ja2VyLmlvIApzeXN0ZW1jdGwgc3RhcnQgZG9ja2VyCm1rZGlyIC1wIC9vcHQvc3NoZF93b3JrZXIKI1dyaXRlIG91dCBEb2NrZXJmaWxlCmNhdCA8PCBFT0YgPiAvb3B0L3NzaGRfd29ya2VyL0RvY2tlcmZpbGUKRlJPTSB1YnVudHU6MjIuMDQKClJVTiBhcHQtZ2V0IHVwZGF0ZSAmJiBERUJJQU5fRlJPTlRFTkQ9bm9uaW50ZXJhY3RpdmUgYXB0LWdldCBpbnN0YWxsIC15IG9wZW5zc2gtc2VydmVyIHN1ZG8gYXdzY2xpICYmIGVjaG8gJ1wwMzNbMTszMW1JIGFtIGEgb25lLXRpbWUgVWJ1bnR1IGNvbnRhaW5lciB3aXRoIHBhc3N3b3JkbGVzcyBzdWRvLiBcMDMzWzE7Mzc7NDFtSSB3aWxsIHRlcm1pbmF0ZSBhZnRlciAxMiBob3VycyBvciBlbHNlIG9uIGV4aXRcMDMzWzBtJyA+IC9ldGMvbW90ZCAmJiBta2RpciAvdmFyL3J1bi9zc2hkCgpFWFBPU0UgMjIKQ01EIFsiL29wdC9zc2hfcG9wdWxhdGUuc2giXQpFT0YKI0J1aWxkIHNzaGQgc2VydmljZSBjb250YWluZXIKY2QgL29wdC9zc2hkX3dvcmtlcgpkb2NrZXIgYnVpbGQgLXQgc3NoZF93b3JrZXIgLgoKDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5n9nWU9Im1vZHVsZV9pYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQiDQpDb2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","vpc_security_group_ids":[]},"sensitive_values":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","arn_suffix":"net/bastion-service-dev/e4a0162397dd1821","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-dev-e4a0162397dd1821.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-dev","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0bc5cd4cf5054059b"}],"subnets":["subnet-0bc5cd4cf5054059b"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"sensitive_values":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_listener.bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-dev/e4a0162397dd1821/86776ed103a4416d","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-dev/e4a0162397dd1821/86776ed103a4416d","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","arn_suffix":"targetgroup/bastion-service-dev-22/9e80710297982ed3","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-dev-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-00255059020328621","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-00255059020328621","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"dev-bastion-service20230628131622632700000001","name_prefix":"dev-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.bastion_host_out[0]","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-2474211610","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-084436aa17cbf31d6","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.lb_healthcheck_in","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-995351726","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-00ae6435961d2ede0","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.service_ssh_in[0]","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-1665769564","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-04bf666941799a72f","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]}}],"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service"}]}]},{"address":"module.liferay","child_modules":[{"resources":[{"address":"module.liferay.module.liferay.aws_autoscaling_group.liferay_cluster_asg","mode":"managed","type":"aws_autoscaling_group","name":"liferay_cluster_asg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_rebalance":null,"context":null,"default_instance_warmup":null,"desired_capacity_type":null,"enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"ELB","initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":null,"max_instance_lifetime":null,"max_size":1,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[],"placement_group":null,"protect_from_scale_in":false,"suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true,"value":"liferay-asg"}],"tags":null,"termination_policies":null,"timeouts":null,"vpc_zone_identifier":["subnet-0bc5cd4cf5054059b","subnet-0f0a7129fb658f9ad"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"sensitive_values":{"availability_zones":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"mixed_instances_policy":[],"tag":[{}],"target_group_arns":[],"vpc_zone_identifier":[false,false],"warm_pool":[]}},{"address":"module.liferay.module.liferay.aws_launch_configuration.liferay_cluster_lc","mode":"managed","type":"aws_launch_configuration","name":"liferay_cluster_lc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"enable_monitoring":true,"ephemeral_block_device":[],"iam_instance_profile":null,"image_id":"ami-0638741e0c9aabde6","instance_type":"t3.large","placement_tenancy":null,"spot_price":null,"user_data":null,"user_data_base64":null,"vpc_classic_link_id":null,"vpc_classic_link_security_groups":null},"sensitive_values":{"ebs_block_device":[],"ephemeral_block_device":[],"metadata_options":[],"root_block_device":[],"security_groups":[]}},{"address":"module.liferay.module.liferay.aws_lb.liferay_cluster_lb","mode":"managed","type":"aws_lb","name":"liferay_cluster_lb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"load_balancer_type":"application","name":"liferay-cluster-lb","name_prefix":null,"preserve_host_header":false,"subnets":["subnet-0bc5cd4cf5054059b","subnet-0f0a7129fb658f9ad"],"tags":null,"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[],"security_groups":[],"subnet_mapping":[],"subnets":[false,false],"tags_all":{}}},{"address":"module.liferay.module.liferay.aws_lb_listener.liferay_cluster_listener","mode":"managed","type":"aws_lb_listener","name":"liferay_cluster_listener","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{"content_type":"text/plain","message_body":"404: page not found","status_code":"404"}],"forward":[],"redirect":[],"target_group_arn":null,"type":"fixed-response"}],"port":null,"protocol":"HTTP","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"redirect":[]}],"tags_all":{}}},{"address":"module.liferay.module.liferay.aws_lb_listener_rule.liferay_cluster_rule","mode":"managed","type":"aws_lb_listener_rule","name":"liferay_cluster_rule","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["*"]}],"query_string":[],"source_ip":[]}],"priority":100,"tags":null},"sensitive_values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false]}],"query_string":[],"source_ip":[]}],"tags_all":{}}},{"address":"module.liferay.module.liferay.aws_lb_target_group.liferay_cluster_targets","mode":"managed","type":"aws_lb_target_group","name":"liferay_cluster_targets","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":15,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":3,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"liferay-cluster-targets","name_prefix":null,"port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance","vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"health_check":[{}],"stickiness":[],"tags_all":{},"target_failover":[]}},{"address":"module.liferay.module.liferay.aws_security_group.liferay_cluster_lg_sg","mode":"managed","type":"aws_security_group","name":"liferay_cluster_lg_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"http","security_groups":[],"self":false,"to_port":80}],"name":"liferay_cluster_lb_sg","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}},{"address":"module.liferay.module.liferay.aws_security_group.liferay_cluster_sg","mode":"managed","type":"aws_security_group","name":"liferay_cluster_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for liferay","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"dev-liferay-sg","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"dev-liferay-sg"},"tags_all":{"Environment":"dev","Name":"dev-liferay-sg"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.liferay.module.liferay"}]},{"address":"module.prod_vpc","child_modules":[{"resources":[{"address":"module.prod_vpc.module.vpc.aws_eip.n9n_nat_eip","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0935fe93ca6824071","associate_with_private_ip":null,"association_id":"eipassoc-0dce71659e07a526d","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0935fe93ca6824071","instance":"","network_border_group":"us-east-1","network_interface":"eni-0c20bf97e4196b2c1","private_dns":"ip-10-0-1-177.ec2.internal","private_ip":"10.0.1.177","public_dns":"ec2-34-196-65-169.compute-1.amazonaws.com","public_ip":"34.196.65.169","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.aws_internet_gateway.n9n_ig","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-09629a267416a4576","id":"igw-09629a267416a4576","owner_id":"444171185861","tags":{"Environment":"prod","Name":"prod-igw"},"tags_all":{"Environment":"prod","Name":"prod-igw"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-0935fe93ca6824071","association_id":"eipassoc-0dce71659e07a526d","connectivity_type":"public","id":"nat-0c6abdd1c85bad328","network_interface_id":"eni-0c20bf97e4196b2c1","private_ip":"10.0.1.177","public_ip":"34.196.65.169","subnet_id":"subnet-0e7b4ddafc1c90395","tags":{"Environment":"prod","Name":"prod-nat"},"tags_all":{"Environment":"prod","Name":"prod-nat"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-0b94111dcfaca0bb71080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0c6abdd1c85bad328","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0b94111dcfaca0bb7","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{}},{"address":"module.prod_vpc.module.vpc.aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-09629a267416a4576","id":"r-rtb-0b5e0bb2c637c1ac61080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0b5e0bb2c637c1ac6","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{}},{"address":"module.prod_vpc.module.vpc.aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-0b94111dcfaca0bb7","id":"rtb-0b94111dcfaca0bb7","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0c6abdd1c85bad328","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"prod","Name":"prod-private-route-table"},"tags_all":{"Environment":"prod","Name":"prod-private-route-table"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-0b5e0bb2c637c1ac6","id":"rtb-0b5e0bb2c637c1ac6","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-09629a267416a4576","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"prod","Name":"prod-public-route-table"},"tags_all":{"Environment":"prod","Name":"prod-public-route-table"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-027e74f72b45b8083","route_table_id":"rtb-0b94111dcfaca0bb7","subnet_id":"subnet-06a5f250d4c8c237d","timeouts":null},"sensitive_values":{}},{"address":"module.prod_vpc.module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0fa220940c15d6cf2","route_table_id":"rtb-0b5e0bb2c637c1ac6","subnet_id":"subnet-0e7b4ddafc1c90395","timeouts":null},"sensitive_values":{}},{"address":"module.prod_vpc.module.vpc.aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-0b3f75848e49cb596","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-0b3f75848e49cb596","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"prod-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"prod","Name":"prod-default-sg"},"tags_all":{"Environment":"prod","Name":"prod-default-sg"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.aws_subnet.private_subnet[0]","mode":"managed","type":"aws_subnet","name":"private_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-06a5f250d4c8c237d","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-06a5f250d4c8c237d","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"prod","Filter":"private_subnet","Name":"prod-us-east-1a-private-subnet"},"tags_all":{"Environment":"prod","Filter":"private_subnet","Name":"prod-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.aws_subnet.public_subnet[0]","mode":"managed","type":"aws_subnet","name":"public_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0e7b4ddafc1c90395","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e7b4ddafc1c90395","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"prod","Filter":"public_subnet","Name":"prod-us-east-1a-public-subnet"},"tags_all":{"Environment":"prod","Filter":"public_subnet","Name":"prod-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-089a9617aef708250","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-01c2d8b88ddde2219","default_route_table_id":"rtb-00a8274bc4a51be49","default_security_group_id":"sg-0d6873303b394c654","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-089a9617aef708250","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-00a8274bc4a51be49","owner_id":"444171185861","tags":{"Environment":"prod","Name":"prod-vpc"},"tags_all":{"Environment":"prod","Name":"prod-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.prod_vpc.module.vpc","child_modules":[{"resources":[{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_autoscaling_group.bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:f30b0fb2-d87e-4914-8e61-9153b86f12a8:autoScalingGroupName/bastion-service-asg2023062813162633610000000d","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162633610000000d","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-016b40fccf3c90cde","launch_template_name":"bastion-service-host-prod20230628131625052100000007","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162633610000000d","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-06a5f250d4c8c237d"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile[0]","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:instance-profile/prod-us-east-1-vpc-089a9617aef708250_bastion","create_date":"2023-06-28T13:16:23Z","id":"prod-us-east-1-vpc-089a9617aef708250_bastion","name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","role":"prod-us-east-1-vpc-089a9617aef708250_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3CYCCC5CFMT"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","description":"","id":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3C75U5SHECM","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role[0]","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:role/prod-us-east-1-vpc-089a9617aef708250_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:22Z","description":"","force_detach_policies":false,"id":"prod-us-east-1-vpc-089a9617aef708250_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion"],"max_session_duration":3600,"name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3CROAPNR2QN"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role_policy_attachment.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"prod-us-east-1-vpc-089a9617aef708250_bastion-20230628131624227400000004","policy_arn":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","role":"prod-us-east-1-vpc-089a9617aef708250_bastion"},"sensitive_values":{}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-016b40fccf3c90cde","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"prod-us-east-1-vpc-089a9617aef708250_bastion"}],"id":"lt-016b40fccf3c90cde","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-prod20230628131625052100000007","name_prefix":"bastion-service-host-prod","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-01f7a5a8979a15a5c"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIHByb2QtdXMtZWFzdC0xLXZwYy0wODlhOTYxN2FlZjcwODI1MC1cJChlY2hvICVpIHwgY3V0IC1kLSAtZjEpIC12IC9kZXYvbG9nOi9kZXYvbG9nIC12IC9vcHQvaWFtX2hlbHBlcjovb3B0OnJvIHNzaGRfd29ya2VyIgpTdGFuZGFyZElucHV0PXNvY2tldApSdW50aW1lTWF4U2VjPTQzMjAwCgpbSW5zdGFsbF0KV2FudGVkQnk9bXVsdGktdXNlci50YXJnZXQKRU9GCiNzZXQgaG9zdCBzc2hkIHRvIHJ1biBvbiBwb3J0IDIyMjIgYW5kIHJlc3Rh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UHVibGljS2V5cyB7CgkJCQkJaWYgKmsuU3RhdHVzICE9ICJBY3RpdmUiIHsKCQkJCQkJY29udGludWUKCQkJCQl9CgkJCQkJcGFyYW1zIDo9ICZpYW0uR2V0U1NIUHVibGljS2V5SW5wdXR7CgkJCQkJCUVuY29kaW5nOiAgICAgICBhd3MuU3RyaW5nKCJTU0giKSwKCQkJCQkJU1NIUHVibGljS2V5SWQ6IGsuU1NIUHVibGljS2V5SWQsCgkJCQkJCVVzZXJOYW1lOiAgICAgICB1c2VyTmFtZSwKCQkJCQl9CgkJCQkJcmVzcCwgZXJyIDo9IHN2Yy5HZXRTU0hQdWJsaWNLZXkocGFyYW1zKQoJCQkJCWlmIGVyciAhPSBuaWwgewoJCQkJCQlmbXQuRnByaW50bG4ob3MuU3RkZXJyLCBlcnIuRXJyb3IoKSkKCQkJCQl9CgkJCQkJZm10LlByaW50ZigiIyAlc1xuIiwgKnVzZXJOYW1lKQoJCQkJCWZtdC5QcmludGxuKCpyZXNwLlNTSFB1YmxpY0tleS5TU0hQdWJsaWNLZXlCb2R5KQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJZm10LkZwcmludGxuKG9zLlN0ZGVyciwgZXJyLkVycm9yKCkpCgkJCX0KCQkJd2cuRG9uZSgpCgkJfSh1LlVzZXJOYW1lKQoJfQoJd2cuV2FpdCgpCn0KCi8vIGdldCBn9nGwgSUFNIHVzZXJzLCBvciBqdXN0IHRob3NlIHRoYXQgYXJlIHBhcnQgb2YgdGhlIGRlZmluZWQgZ3JvdXAKZnVuYyB1c2VycyhzdmMgKmln9nS5JQU0sIGln9nUdyb3VwIHN0cmluZykgKFtdKmln9nS5Vc2VyLCBlcnJvcikgewoJaWYgaWFtR3JvdXAgIT0gIiIgewoJCXBhcmFtcyA6PSAmaWFtLkdldEdyb3VwSW5wdXR7CgkJCUdyb3VwTmFtZTogYXdzLlN0cmluZyhpYW1Hcm91cCksCgkJCU1heEl0ZW1zOiAgYXdzLkludDY0KDEwMDApLAoJCX0KCQlyZXNwLCBlcnIgOj0gc3ZjLkdldEdyb3VwKHBhcmFtcykKCQlyZXR1cm4gcmVzcC5Vc2VycywgZXJyCgl9CglwYXJn9nXMgOj0gJmln9nS5MaXN0VXNlcnNJbnB1dHsKCQlNYXhJdGVtczogYXdzLkludDY0KDEwMDApLAoJfQoJcmVzcCwgZXJyIDo9IHN2Yy5MaXN0VXNlcnMocGFyYW1zKQoJcmV0dXJuIHJlc3AuVXNlcnMsIGVycgp9CgpFT0YKREVCSUFOX0ZST05URU5EPW5vbmludGVyYWN0aXZlCnN1ZG8gYXB0LWdldCBpbnN0YWxsIC15IGdvbGFuZwoKZXhwb3J0IEdPUEFUSD0iL3Jvb3QvZ28iCmV4cG9ydCBHT0NBQ0hFPSIvcm9vdC8uY2FjaGUvZ28tYnVpbGQiCmV4cG9ydCBHT0VOVj0iL3Jvb3QvLmNvbmZpZy9nby9lbnYiCgpjZCAvb3B0L2dvbGFuZy9zcmMvaWFtLWF1dGhvcml6ZWQta2V5cy1jb21tYW5kCgpnbyBtb2QgaW5pdCBpYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQKZ28gbW9kIHRpZHkKCi91c3IvYmluL2dvIGJ1aWxkIC1sZGZsYWdzICItWCBtYWluLmln9nUdyb3VwPSIgLW8gL29wdC9pYW1faGVscGVyL2ln9nS1hdXRob3JpemVkLWtleXMtY29tbWFuZCAuL21haW4uZ28KDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5n9nWU9ImV4dHJhX3VzZXJfZGF0YSINCkNvbnRlbnQtVHJn9nnNmZXItRW5jb2Rpbmc6IDdiaXQNCkNvbnRlbnQtVHlwZTogdGV4dC94LXNoZWxsc2NyaXB0DQpNaW1lLVZlcnNpb246IDEuMA0KWC1NZXJnZS1UeXBlOiBzdHIoYXBwZW5kKQ0KDQojIS9iaW4vYmFzaA0KLS1NSU1FQk9VTkRBUlktLQ0K","vpc_security_group_ids":[]},"sensitive_values":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","arn_suffix":"net/bastion-service-prod/d902477133b15e92","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-prod-d902477133b15e92.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-prod","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-06a5f250d4c8c237d"}],"subnets":["subnet-06a5f250d4c8c237d"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-089a9617aef708250","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"sensitive_values":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_listener.bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-prod/d902477133b15e92/d022f111b0817233","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-prod/d902477133b15e92/d022f111b0817233","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","arn_suffix":"targetgroup/bastion-service-prod-22/d7ecd998847525be","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-prod-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-01f7a5a8979a15a5c","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-01f7a5a8979a15a5c","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"prod-bastion-service20230628131622642400000002","name_prefix":"prod-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.bastion_host_out[0]","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-2818800821","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-012df4635b6cede1b","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.lb_healthcheck_in","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-3358210003","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-00df11ce7ee03d033","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.service_ssh_in[0]","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-1045749227","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-0c2aa5e0128248a13","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]}}],"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service"}]}]},{"address":"module.stage_vpc","child_modules":[{"resources":[{"address":"module.stage_vpc.module.vpc.aws_eip.n9n_nat_eip","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-04bfce424dbec9cf2","associate_with_private_ip":null,"association_id":"eipassoc-07a3dced98ef6467a","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-04bfce424dbec9cf2","instance":"","network_border_group":"us-east-1","network_interface":"eni-0324c58245f364b50","private_dns":"ip-10-0-1-210.ec2.internal","private_ip":"10.0.1.210","public_dns":"ec2-44-216-128-48.compute-1.amazonaws.com","public_ip":"44.216.128.48","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.aws_internet_gateway.n9n_ig","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-0680e80773384969c","id":"igw-0680e80773384969c","owner_id":"444171185861","tags":{"Environment":"stage","Name":"stage-igw"},"tags_all":{"Environment":"stage","Name":"stage-igw"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-04bfce424dbec9cf2","association_id":"eipassoc-07a3dced98ef6467a","connectivity_type":"public","id":"nat-0dcf19075e6d6a9e0","network_interface_id":"eni-0324c58245f364b50","private_ip":"10.0.1.210","public_ip":"44.216.128.48","subnet_id":"subnet-0f52877bf4c35e54c","tags":{"Environment":"stage","Name":"stage-nat"},"tags_all":{"Environment":"stage","Name":"stage-nat"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-05e5518d2199f1cd61080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0dcf19075e6d6a9e0","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-05e5518d2199f1cd6","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{}},{"address":"module.stage_vpc.module.vpc.aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0680e80773384969c","id":"r-rtb-02884780c4cce730f1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-02884780c4cce730f","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{}},{"address":"module.stage_vpc.module.vpc.aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-05e5518d2199f1cd6","id":"rtb-05e5518d2199f1cd6","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0dcf19075e6d6a9e0","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"stage","Name":"stage-private-route-table"},"tags_all":{"Environment":"stage","Name":"stage-private-route-table"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-02884780c4cce730f","id":"rtb-02884780c4cce730f","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0680e80773384969c","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"stage","Name":"stage-public-route-table"},"tags_all":{"Environment":"stage","Name":"stage-public-route-table"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-076cc22055bfbeaf6","route_table_id":"rtb-05e5518d2199f1cd6","subnet_id":"subnet-0ed5a2f4d9d0b10da","timeouts":null},"sensitive_values":{}},{"address":"module.stage_vpc.module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-08300b254505537ca","route_table_id":"rtb-02884780c4cce730f","subnet_id":"subnet-0f52877bf4c35e54c","timeouts":null},"sensitive_values":{}},{"address":"module.stage_vpc.module.vpc.aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-0a554abaa60163930","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-0a554abaa60163930","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"stage-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"stage","Name":"stage-default-sg"},"tags_all":{"Environment":"stage","Name":"stage-default-sg"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.aws_subnet.private_subnet[0]","mode":"managed","type":"aws_subnet","name":"private_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0ed5a2f4d9d0b10da","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ed5a2f4d9d0b10da","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"stage","Filter":"private_subnet","Name":"stage-us-east-1a-private-subnet"},"tags_all":{"Environment":"stage","Filter":"private_subnet","Name":"stage-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.aws_subnet.public_subnet[0]","mode":"managed","type":"aws_subnet","name":"public_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0f52877bf4c35e54c","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0f52877bf4c35e54c","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"stage","Filter":"public_subnet","Name":"stage-us-east-1a-public-subnet"},"tags_all":{"Environment":"stage","Filter":"public_subnet","Name":"stage-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-0db007dc41ef7db54","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-00dff01837010c6d1","default_route_table_id":"rtb-04ca3c953118dc80d","default_security_group_id":"sg-0bb079c8355bbddbe","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-0db007dc41ef7db54","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-04ca3c953118dc80d","owner_id":"444171185861","tags":{"Environment":"stage","Name":"stage-vpc"},"tags_all":{"Environment":"stage","Name":"stage-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.stage_vpc.module.vpc","child_modules":[{"resources":[{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_autoscaling_group.bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:1abc1d1c-c294-4c2e-b1c4-59e5caaa3b83:autoScalingGroupName/bastion-service-asg2023062813162637780000000e","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162637780000000e","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-0abbb5191c920c151","launch_template_name":"bastion-service-host-stage20230628131625123200000009","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162637780000000e","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-0ed5a2f4d9d0b10da"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile[0]","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:instance-profile/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","create_date":"2023-06-28T13:16:24Z","id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","role":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3C5UV7VMP4K"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","description":"","id":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3CTONM5UMEA","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role[0]","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:role/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:23Z","description":"","force_detach_policies":false,"id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion"],"max_session_duration":3600,"name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3CSORA3ZUCR"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role_policy_attachment.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion-20230628131624740100000006","policy_arn":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","role":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion"},"sensitive_values":{}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-0abbb5191c920c151","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion"}],"id":"lt-0abbb5191c920c151","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-stage20230628131625123200000009","name_prefix":"bastion-service-host-stage","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-08771d0af0c8068d0"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIHN0YWdlLXVzLWVhc3QtMS12cGMtMGRiMDA3ZGM0MWVmN2RiNTQtXCQoZWNobyAlaSB8IGN1dCAtZC0gLWYxKSAtdiAvZGV2L2xvZzovZGV2L2xvZyAtdiAvb3B0L2ln9nV9oZWxwZXI6L29wdDpybyBzc2hkX3dvcmtlciIKU3Rn9nmRhcmRJbnB1dD1zb2NrZXQKUnVudGltZU1heFNlYz00MzIwMAoKW0luc3Rn9nGxdCldn9nnRlZEJ5PW11bHRpLXVzZXIudGFyZ2V0CkVPRgojc2V0IGhvc3Qgc3NoZCB0byBydW4gb24gcG9ydCAyMjIyIGFuZCBy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","vpc_security_group_ids":[]},"sensitive_values":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","arn_suffix":"net/bastion-service-stage/d391ddd2ac4ea4ff","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-stage-d391ddd2ac4ea4ff.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-stage","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0ed5a2f4d9d0b10da"}],"subnets":["subnet-0ed5a2f4d9d0b10da"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"sensitive_values":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_listener.bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-stage/d391ddd2ac4ea4ff/68746318bdeff37e","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-stage/d391ddd2ac4ea4ff/68746318bdeff37e","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","arn_suffix":"targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-stage-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-08771d0af0c8068d0","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-08771d0af0c8068d0","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"stage-bastion-service20230628131622655300000003","name_prefix":"stage-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.bastion_host_out[0]","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-486903834","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-0f9ddaa9fe650d278","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.lb_healthcheck_in","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-856898212","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-05bb803866144f0d8","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.service_ssh_in[0]","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-2269610193","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-03d0ddef016559aee","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]}}],"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service"}]}]}]}},"resource_changes":[{"address":"aws_dynamodb_table.tf-state-lock","mode":"managed","type":"aws_dynamodb_table","name":"tf-state-lock","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:dynamodb:us-east-1:444171185861:table/tf_state_lock","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PROVISIONED","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"tf_state_lock","local_secondary_index":[],"name":"tf_state_lock","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":5,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Name":"Dynamodb Terraform State Lock Table"},"tags_all":{"Name":"Dynamodb Terraform State Lock Table"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"after":{"arn":"arn:aws:dynamodb:us-east-1:444171185861:table/tf_state_lock","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PROVISIONED","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"tf_state_lock","local_secondary_index":[],"name":"tf_state_lock","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":5,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Name":"Dynamodb Terraform State Lock Table"},"tags_all":{"Name":"Dynamodb Terraform State Lock Table"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"after_unknown":{},"before_sensitive":{"attribute":[{}],"global_secondary_index":[],"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]},"after_sensitive":{"attribute":[{}],"global_secondary_index":[],"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}}},{"address":"aws_kms_key.s3-kms-key","mode":"managed","type":"aws_kms_key","name":"s3-kms-key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","bypass_policy_lockout_safety_check":false,"custom_key_store_id":"","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"Use this key to encrypt S3 buckets","enable_key_rotation":false,"id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","is_enabled":true,"key_id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::444171185861:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","bypass_policy_lockout_safety_check":false,"custom_key_store_id":"","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"Use this key to encrypt S3 buckets","enable_key_rotation":false,"id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","is_enabled":true,"key_id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::444171185861:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_s3_bucket.s3-tf-bucket","mode":"managed","type":"aws_s3_bucket","name":"s3-tf-bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::n9n-s3-state-220523","bucket":"n9n-s3-state-220523","bucket_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"n9n-s3-state-220523","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]}],"tags":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"tags_all":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"timeouts":null,"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::n9n-s3-state-220523","bucket":"n9n-s3-state-220523","bucket_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"n9n-s3-state-220523","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]}],"tags":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"tags_all":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"timeouts":null,"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"aws_s3_bucket_acl.s3-tf-state-bucket-acl","mode":"managed","type":"aws_s3_bucket_acl","name":"s3-tf-state-bucket-acl","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"admin-aws","email_address":"","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"admin-aws","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2"}]}],"acl":"private","bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523,private"},"after":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"admin-aws","email_address":"","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"admin-aws","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2"}]}],"acl":"private","bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523,private"},"after_unknown":{},"before_sensitive":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]},"after_sensitive":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]}}},{"address":"aws_s3_bucket_public_access_block.s3-pub-block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3-pub-block","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"block_public_acls":true,"block_public_policy":true,"bucket":"n9n-s3-state-220523","id":"n9n-s3-state-220523","ignore_public_acls":true,"restrict_public_buckets":true},"after":{"block_public_acls":true,"block_public_policy":true,"bucket":"n9n-s3-state-220523","id":"n9n-s3-state-220523","ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"aws_s3_bucket_server_side_encryption_configuration.s3-sse-config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"s3-sse-config","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]},"after":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]},"after_unknown":{},"before_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"aws_s3_bucket_versioning.s3-tf-bucket-versioning","mode":"managed","type":"aws_s3_bucket_versioning","name":"s3-tf-bucket-versioning","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","mfa":null,"versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"after":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","mfa":null,"versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"after_unknown":{},"before_sensitive":{"versioning_configuration":[{}]},"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"module.dev_vpc.module.vpc.aws_eip.n9n_nat_eip","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"address":null,"allocation_id":"eipalloc-001f842189e1f930a","associate_with_private_ip":null,"association_id":"eipassoc-0b72c72ce9dbb6c70","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-001f842189e1f930a","instance":"","network_border_group":"us-east-1","network_interface":"eni-04e6ad75805323268","private_dns":"ip-10-0-1-47.ec2.internal","private_ip":"10.0.1.47","public_dns":"ec2-54-175-233-149.compute-1.amazonaws.com","public_ip":"54.175.233.149","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"after":{"address":null,"allocation_id":"eipalloc-001f842189e1f930a","associate_with_private_ip":null,"association_id":"eipassoc-0b72c72ce9dbb6c70","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-001f842189e1f930a","instance":"","network_border_group":"us-east-1","network_interface":"eni-04e6ad75805323268","private_dns":"ip-10-0-1-47.ec2.internal","private_ip":"10.0.1.47","public_dns":"ec2-54-175-233-149.compute-1.amazonaws.com","public_ip":"54.175.233.149","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.aws_internet_gateway.n9n_ig","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-016d54fc87a6cb779","id":"igw-016d54fc87a6cb779","owner_id":"444171185861","tags":{"Environment":"dev","Name":"dev-igw"},"tags_all":{"Environment":"dev","Name":"dev-igw"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-016d54fc87a6cb779","id":"igw-016d54fc87a6cb779","owner_id":"444171185861","tags":{"Environment":"dev","Name":"dev-igw"},"tags_all":{"Environment":"dev","Name":"dev-igw"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allocation_id":"eipalloc-001f842189e1f930a","association_id":"eipassoc-0b72c72ce9dbb6c70","connectivity_type":"public","id":"nat-0433ec27e259a40de","network_interface_id":"eni-04e6ad75805323268","private_ip":"10.0.1.47","public_ip":"54.175.233.149","subnet_id":"subnet-0f0a7129fb658f9ad","tags":{"Environment":"dev","Name":"dev-nat"},"tags_all":{"Environment":"dev","Name":"dev-nat"}},"after":{"allocation_id":"eipalloc-001f842189e1f930a","association_id":"eipassoc-0b72c72ce9dbb6c70","connectivity_type":"public","id":"nat-0433ec27e259a40de","network_interface_id":"eni-04e6ad75805323268","private_ip":"10.0.1.47","public_ip":"54.175.233.149","subnet_id":"subnet-0f0a7129fb658f9ad","tags":{"Environment":"dev","Name":"dev-nat"},"tags_all":{"Environment":"dev","Name":"dev-nat"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.aws_route.private_nat_gateway","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-09c72a3f8852d80281080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0433ec27e259a40de","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-09c72a3f8852d8028","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-09c72a3f8852d80281080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0433ec27e259a40de","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-09c72a3f8852d8028","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.dev_vpc.module.vpc.aws_route.public_internet_gateway","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-016d54fc87a6cb779","id":"r-rtb-037ee04ee10c1710f1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-037ee04ee10c1710f","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-016d54fc87a6cb779","id":"r-rtb-037ee04ee10c1710f1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-037ee04ee10c1710f","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.dev_vpc.module.vpc.aws_route_table.private","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-09c72a3f8852d8028","id":"rtb-09c72a3f8852d8028","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0433ec27e259a40de","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"dev-private-route-table"},"tags_all":{"Environment":"dev","Name":"dev-private-route-table"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-09c72a3f8852d8028","id":"rtb-09c72a3f8852d8028","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0433ec27e259a40de","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"dev-private-route-table"},"tags_all":{"Environment":"dev","Name":"dev-private-route-table"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.aws_route_table.public","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-037ee04ee10c1710f","id":"rtb-037ee04ee10c1710f","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-016d54fc87a6cb779","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"dev-public-route-table"},"tags_all":{"Environment":"dev","Name":"dev-public-route-table"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-037ee04ee10c1710f","id":"rtb-037ee04ee10c1710f","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-016d54fc87a6cb779","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"dev-public-route-table"},"tags_all":{"Environment":"dev","Name":"dev-public-route-table"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.aws_route_table_association.private[0]","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-025fa3a543c1ba95c","route_table_id":"rtb-09c72a3f8852d8028","subnet_id":"subnet-0bc5cd4cf5054059b","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-025fa3a543c1ba95c","route_table_id":"rtb-09c72a3f8852d8028","subnet_id":"subnet-0bc5cd4cf5054059b","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.dev_vpc.module.vpc.aws_route_table_association.public[0]","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-0f337c8f1cd26b10a","route_table_id":"rtb-037ee04ee10c1710f","subnet_id":"subnet-0f0a7129fb658f9ad","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-0f337c8f1cd26b10a","route_table_id":"rtb-037ee04ee10c1710f","subnet_id":"subnet-0f0a7129fb658f9ad","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.dev_vpc.module.vpc.aws_security_group.default","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-02985b94ee4a73439","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-02985b94ee4a73439","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"dev-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"dev-default-sg"},"tags_all":{"Environment":"dev","Name":"dev-default-sg"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-02985b94ee4a73439","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-02985b94ee4a73439","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"dev-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"dev-default-sg"},"tags_all":{"Environment":"dev","Name":"dev-default-sg"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.aws_subnet.private_subnet[0]","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_subnet","name":"private_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0bc5cd4cf5054059b","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0bc5cd4cf5054059b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"tags_all":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0bc5cd4cf5054059b","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0bc5cd4cf5054059b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"tags_all":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.aws_subnet.public_subnet[0]","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_subnet","name":"public_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0f0a7129fb658f9ad","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0f0a7129fb658f9ad","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"dev","Filter":"public_subnet","Name":"dev-us-east-1a-public-subnet"},"tags_all":{"Environment":"dev","Filter":"public_subnet","Name":"dev-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0f0a7129fb658f9ad","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0f0a7129fb658f9ad","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"dev","Filter":"public_subnet","Name":"dev-us-east-1a-public-subnet"},"tags_all":{"Environment":"dev","Filter":"public_subnet","Name":"dev-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module_address":"module.dev_vpc.module.vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-05c8af84715ad862a","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0391704db9e611349","default_route_table_id":"rtb-0df51899206ee6dd5","default_security_group_id":"sg-0c20b46066b700070","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-05c8af84715ad862a","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0df51899206ee6dd5","owner_id":"444171185861","tags":{"Environment":"dev","Name":"dev-vpc"},"tags_all":{"Environment":"dev","Name":"dev-vpc"}},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-05c8af84715ad862a","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0391704db9e611349","default_route_table_id":"rtb-0df51899206ee6dd5","default_security_group_id":"sg-0c20b46066b700070","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-05c8af84715ad862a","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0df51899206ee6dd5","owner_id":"444171185861","tags":{"Environment":"dev","Name":"dev-vpc"},"tags_all":{"Environment":"dev","Name":"dev-vpc"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.liferay.module.liferay.aws_autoscaling_group.liferay_cluster_asg","module_address":"module.liferay.module.liferay","mode":"managed","type":"aws_autoscaling_group","name":"liferay_cluster_asg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_rebalance":null,"context":null,"default_instance_warmup":null,"desired_capacity_type":null,"enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"ELB","initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":null,"max_instance_lifetime":null,"max_size":1,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[],"placement_group":null,"protect_from_scale_in":false,"suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true,"value":"liferay-asg"}],"tags":null,"termination_policies":null,"timeouts":null,"vpc_zone_identifier":["subnet-0bc5cd4cf5054059b","subnet-0f0a7129fb658f9ad"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"after_unknown":{"arn":true,"availability_zones":true,"default_cooldown":true,"desired_capacity":true,"id":true,"initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":true,"launch_template":[],"mixed_instances_policy":[],"name":true,"name_prefix":true,"predicted_capacity":true,"service_linked_role_arn":true,"tag":[{}],"target_group_arns":true,"vpc_zone_identifier":[false,false],"warm_pool":[],"warm_pool_size":true},"before_sensitive":false,"after_sensitive":{"availability_zones":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"mixed_instances_policy":[],"tag":[{}],"target_group_arns":[],"vpc_zone_identifier":[false,false],"warm_pool":[]}}},{"address":"module.liferay.module.liferay.aws_launch_configuration.liferay_cluster_lc","module_address":"module.liferay.module.liferay","mode":"managed","type":"aws_launch_configuration","name":"liferay_cluster_lc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"enable_monitoring":true,"ephemeral_block_device":[],"iam_instance_profile":null,"image_id":"ami-0638741e0c9aabde6","instance_type":"t3.large","placement_tenancy":null,"spot_price":null,"user_data":null,"user_data_base64":null,"vpc_classic_link_id":null,"vpc_classic_link_security_groups":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"ebs_block_device":true,"ebs_optimized":true,"ephemeral_block_device":[],"id":true,"key_name":true,"metadata_options":true,"name":true,"name_prefix":true,"root_block_device":true,"security_groups":true},"before_sensitive":false,"after_sensitive":{"ebs_block_device":[],"ephemeral_block_device":[],"metadata_options":[],"root_block_device":[],"security_groups":[]}}},{"address":"module.liferay.module.liferay.aws_lb.liferay_cluster_lb","module_address":"module.liferay.module.liferay","mode":"managed","type":"aws_lb","name":"liferay_cluster_lb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"load_balancer_type":"application","name":"liferay-cluster-lb","name_prefix":null,"preserve_host_header":false,"subnets":["subnet-0bc5cd4cf5054059b","subnet-0f0a7129fb658f9ad"],"tags":null,"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"dns_name":true,"id":true,"internal":true,"ip_address_type":true,"security_groups":true,"subnet_mapping":true,"subnets":[false,false],"tags_all":true,"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"security_groups":[],"subnet_mapping":[],"subnets":[false,false],"tags_all":{}}}},{"address":"module.liferay.module.liferay.aws_lb_listener.liferay_cluster_listener","module_address":"module.liferay.module.liferay","mode":"managed","type":"aws_lb_listener","name":"liferay_cluster_listener","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{"content_type":"text/plain","message_body":"404: page not found","status_code":"404"}],"forward":[],"redirect":[],"target_group_arn":null,"type":"fixed-response"}],"port":null,"protocol":"HTTP","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"order":true,"redirect":[]}],"id":true,"load_balancer_arn":true,"ssl_policy":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"redirect":[]}],"tags_all":{}}}},{"address":"module.liferay.module.liferay.aws_lb_listener_rule.liferay_cluster_rule","module_address":"module.liferay.module.liferay","mode":"managed","type":"aws_lb_listener_rule","name":"liferay_cluster_rule","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["*"]}],"query_string":[],"source_ip":[]}],"priority":100,"tags":null},"after_unknown":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"arn":true,"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false]}],"query_string":[],"source_ip":[]}],"id":true,"listener_arn":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false]}],"query_string":[],"source_ip":[]}],"tags_all":{}}}},{"address":"module.liferay.module.liferay.aws_lb_target_group.liferay_cluster_targets","module_address":"module.liferay.module.liferay","mode":"managed","type":"aws_lb_target_group","name":"liferay_cluster_targets","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":15,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":3,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"liferay-cluster-targets","name_prefix":null,"port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance","vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{"arn":true,"arn_suffix":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancing_algorithm_type":true,"load_balancing_cross_zone_enabled":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags_all":true,"target_failover":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"stickiness":[],"tags_all":{},"target_failover":[]}}},{"address":"module.liferay.module.liferay.aws_security_group.liferay_cluster_lg_sg","module_address":"module.liferay.module.liferay","mode":"managed","type":"aws_security_group","name":"liferay_cluster_lg_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"http","security_groups":[],"self":false,"to_port":80}],"name":"liferay_cluster_lb_sg","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}},{"address":"module.liferay.module.liferay.aws_security_group.liferay_cluster_sg","module_address":"module.liferay.module.liferay","mode":"managed","type":"aws_security_group","name":"liferay_cluster_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for liferay","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"dev-liferay-sg","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"dev-liferay-sg"},"tags_all":{"Environment":"dev","Name":"dev-liferay-sg"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.aws_eip.n9n_nat_eip","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"address":null,"allocation_id":"eipalloc-0935fe93ca6824071","associate_with_private_ip":null,"association_id":"eipassoc-0dce71659e07a526d","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0935fe93ca6824071","instance":"","network_border_group":"us-east-1","network_interface":"eni-0c20bf97e4196b2c1","private_dns":"ip-10-0-1-177.ec2.internal","private_ip":"10.0.1.177","public_dns":"ec2-34-196-65-169.compute-1.amazonaws.com","public_ip":"34.196.65.169","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"after":{"address":null,"allocation_id":"eipalloc-0935fe93ca6824071","associate_with_private_ip":null,"association_id":"eipassoc-0dce71659e07a526d","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0935fe93ca6824071","instance":"","network_border_group":"us-east-1","network_interface":"eni-0c20bf97e4196b2c1","private_dns":"ip-10-0-1-177.ec2.internal","private_ip":"10.0.1.177","public_dns":"ec2-34-196-65-169.compute-1.amazonaws.com","public_ip":"34.196.65.169","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.aws_internet_gateway.n9n_ig","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-09629a267416a4576","id":"igw-09629a267416a4576","owner_id":"444171185861","tags":{"Environment":"prod","Name":"prod-igw"},"tags_all":{"Environment":"prod","Name":"prod-igw"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-09629a267416a4576","id":"igw-09629a267416a4576","owner_id":"444171185861","tags":{"Environment":"prod","Name":"prod-igw"},"tags_all":{"Environment":"prod","Name":"prod-igw"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allocation_id":"eipalloc-0935fe93ca6824071","association_id":"eipassoc-0dce71659e07a526d","connectivity_type":"public","id":"nat-0c6abdd1c85bad328","network_interface_id":"eni-0c20bf97e4196b2c1","private_ip":"10.0.1.177","public_ip":"34.196.65.169","subnet_id":"subnet-0e7b4ddafc1c90395","tags":{"Environment":"prod","Name":"prod-nat"},"tags_all":{"Environment":"prod","Name":"prod-nat"}},"after":{"allocation_id":"eipalloc-0935fe93ca6824071","association_id":"eipassoc-0dce71659e07a526d","connectivity_type":"public","id":"nat-0c6abdd1c85bad328","network_interface_id":"eni-0c20bf97e4196b2c1","private_ip":"10.0.1.177","public_ip":"34.196.65.169","subnet_id":"subnet-0e7b4ddafc1c90395","tags":{"Environment":"prod","Name":"prod-nat"},"tags_all":{"Environment":"prod","Name":"prod-nat"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.aws_route.private_nat_gateway","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-0b94111dcfaca0bb71080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0c6abdd1c85bad328","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0b94111dcfaca0bb7","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-0b94111dcfaca0bb71080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0c6abdd1c85bad328","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0b94111dcfaca0bb7","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.prod_vpc.module.vpc.aws_route.public_internet_gateway","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-09629a267416a4576","id":"r-rtb-0b5e0bb2c637c1ac61080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0b5e0bb2c637c1ac6","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-09629a267416a4576","id":"r-rtb-0b5e0bb2c637c1ac61080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0b5e0bb2c637c1ac6","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.prod_vpc.module.vpc.aws_route_table.private","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-0b94111dcfaca0bb7","id":"rtb-0b94111dcfaca0bb7","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0c6abdd1c85bad328","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"prod","Name":"prod-private-route-table"},"tags_all":{"Environment":"prod","Name":"prod-private-route-table"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-0b94111dcfaca0bb7","id":"rtb-0b94111dcfaca0bb7","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0c6abdd1c85bad328","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"prod","Name":"prod-private-route-table"},"tags_all":{"Environment":"prod","Name":"prod-private-route-table"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.aws_route_table.public","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-0b5e0bb2c637c1ac6","id":"rtb-0b5e0bb2c637c1ac6","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-09629a267416a4576","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"prod","Name":"prod-public-route-table"},"tags_all":{"Environment":"prod","Name":"prod-public-route-table"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-0b5e0bb2c637c1ac6","id":"rtb-0b5e0bb2c637c1ac6","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-09629a267416a4576","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"prod","Name":"prod-public-route-table"},"tags_all":{"Environment":"prod","Name":"prod-public-route-table"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.aws_route_table_association.private[0]","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-027e74f72b45b8083","route_table_id":"rtb-0b94111dcfaca0bb7","subnet_id":"subnet-06a5f250d4c8c237d","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-027e74f72b45b8083","route_table_id":"rtb-0b94111dcfaca0bb7","subnet_id":"subnet-06a5f250d4c8c237d","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.prod_vpc.module.vpc.aws_route_table_association.public[0]","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-0fa220940c15d6cf2","route_table_id":"rtb-0b5e0bb2c637c1ac6","subnet_id":"subnet-0e7b4ddafc1c90395","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-0fa220940c15d6cf2","route_table_id":"rtb-0b5e0bb2c637c1ac6","subnet_id":"subnet-0e7b4ddafc1c90395","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.prod_vpc.module.vpc.aws_security_group.default","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-0b3f75848e49cb596","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-0b3f75848e49cb596","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"prod-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"prod","Name":"prod-default-sg"},"tags_all":{"Environment":"prod","Name":"prod-default-sg"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-0b3f75848e49cb596","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-0b3f75848e49cb596","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"prod-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"prod","Name":"prod-default-sg"},"tags_all":{"Environment":"prod","Name":"prod-default-sg"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.aws_subnet.private_subnet[0]","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_subnet","name":"private_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-06a5f250d4c8c237d","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-06a5f250d4c8c237d","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"prod","Filter":"private_subnet","Name":"prod-us-east-1a-private-subnet"},"tags_all":{"Environment":"prod","Filter":"private_subnet","Name":"prod-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-06a5f250d4c8c237d","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-06a5f250d4c8c237d","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"prod","Filter":"private_subnet","Name":"prod-us-east-1a-private-subnet"},"tags_all":{"Environment":"prod","Filter":"private_subnet","Name":"prod-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.aws_subnet.public_subnet[0]","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_subnet","name":"public_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0e7b4ddafc1c90395","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e7b4ddafc1c90395","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"prod","Filter":"public_subnet","Name":"prod-us-east-1a-public-subnet"},"tags_all":{"Environment":"prod","Filter":"public_subnet","Name":"prod-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0e7b4ddafc1c90395","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e7b4ddafc1c90395","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"prod","Filter":"public_subnet","Name":"prod-us-east-1a-public-subnet"},"tags_all":{"Environment":"prod","Filter":"public_subnet","Name":"prod-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module_address":"module.prod_vpc.module.vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-089a9617aef708250","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-01c2d8b88ddde2219","default_route_table_id":"rtb-00a8274bc4a51be49","default_security_group_id":"sg-0d6873303b394c654","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-089a9617aef708250","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-00a8274bc4a51be49","owner_id":"444171185861","tags":{"Environment":"prod","Name":"prod-vpc"},"tags_all":{"Environment":"prod","Name":"prod-vpc"}},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-089a9617aef708250","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-01c2d8b88ddde2219","default_route_table_id":"rtb-00a8274bc4a51be49","default_security_group_id":"sg-0d6873303b394c654","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-089a9617aef708250","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-00a8274bc4a51be49","owner_id":"444171185861","tags":{"Environment":"prod","Name":"prod-vpc"},"tags_all":{"Environment":"prod","Name":"prod-vpc"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.aws_eip.n9n_nat_eip","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"address":null,"allocation_id":"eipalloc-04bfce424dbec9cf2","associate_with_private_ip":null,"association_id":"eipassoc-07a3dced98ef6467a","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-04bfce424dbec9cf2","instance":"","network_border_group":"us-east-1","network_interface":"eni-0324c58245f364b50","private_dns":"ip-10-0-1-210.ec2.internal","private_ip":"10.0.1.210","public_dns":"ec2-44-216-128-48.compute-1.amazonaws.com","public_ip":"44.216.128.48","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"after":{"address":null,"allocation_id":"eipalloc-04bfce424dbec9cf2","associate_with_private_ip":null,"association_id":"eipassoc-07a3dced98ef6467a","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-04bfce424dbec9cf2","instance":"","network_border_group":"us-east-1","network_interface":"eni-0324c58245f364b50","private_dns":"ip-10-0-1-210.ec2.internal","private_ip":"10.0.1.210","public_dns":"ec2-44-216-128-48.compute-1.amazonaws.com","public_ip":"44.216.128.48","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.aws_internet_gateway.n9n_ig","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-0680e80773384969c","id":"igw-0680e80773384969c","owner_id":"444171185861","tags":{"Environment":"stage","Name":"stage-igw"},"tags_all":{"Environment":"stage","Name":"stage-igw"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-0680e80773384969c","id":"igw-0680e80773384969c","owner_id":"444171185861","tags":{"Environment":"stage","Name":"stage-igw"},"tags_all":{"Environment":"stage","Name":"stage-igw"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allocation_id":"eipalloc-04bfce424dbec9cf2","association_id":"eipassoc-07a3dced98ef6467a","connectivity_type":"public","id":"nat-0dcf19075e6d6a9e0","network_interface_id":"eni-0324c58245f364b50","private_ip":"10.0.1.210","public_ip":"44.216.128.48","subnet_id":"subnet-0f52877bf4c35e54c","tags":{"Environment":"stage","Name":"stage-nat"},"tags_all":{"Environment":"stage","Name":"stage-nat"}},"after":{"allocation_id":"eipalloc-04bfce424dbec9cf2","association_id":"eipassoc-07a3dced98ef6467a","connectivity_type":"public","id":"nat-0dcf19075e6d6a9e0","network_interface_id":"eni-0324c58245f364b50","private_ip":"10.0.1.210","public_ip":"44.216.128.48","subnet_id":"subnet-0f52877bf4c35e54c","tags":{"Environment":"stage","Name":"stage-nat"},"tags_all":{"Environment":"stage","Name":"stage-nat"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.aws_route.private_nat_gateway","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-05e5518d2199f1cd61080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0dcf19075e6d6a9e0","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-05e5518d2199f1cd6","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-05e5518d2199f1cd61080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0dcf19075e6d6a9e0","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-05e5518d2199f1cd6","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.stage_vpc.module.vpc.aws_route.public_internet_gateway","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0680e80773384969c","id":"r-rtb-02884780c4cce730f1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-02884780c4cce730f","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0680e80773384969c","id":"r-rtb-02884780c4cce730f1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-02884780c4cce730f","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.stage_vpc.module.vpc.aws_route_table.private","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-05e5518d2199f1cd6","id":"rtb-05e5518d2199f1cd6","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0dcf19075e6d6a9e0","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"stage","Name":"stage-private-route-table"},"tags_all":{"Environment":"stage","Name":"stage-private-route-table"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-05e5518d2199f1cd6","id":"rtb-05e5518d2199f1cd6","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0dcf19075e6d6a9e0","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"stage","Name":"stage-private-route-table"},"tags_all":{"Environment":"stage","Name":"stage-private-route-table"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.aws_route_table.public","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-02884780c4cce730f","id":"rtb-02884780c4cce730f","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0680e80773384969c","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"stage","Name":"stage-public-route-table"},"tags_all":{"Environment":"stage","Name":"stage-public-route-table"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-02884780c4cce730f","id":"rtb-02884780c4cce730f","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0680e80773384969c","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"stage","Name":"stage-public-route-table"},"tags_all":{"Environment":"stage","Name":"stage-public-route-table"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.aws_route_table_association.private[0]","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-076cc22055bfbeaf6","route_table_id":"rtb-05e5518d2199f1cd6","subnet_id":"subnet-0ed5a2f4d9d0b10da","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-076cc22055bfbeaf6","route_table_id":"rtb-05e5518d2199f1cd6","subnet_id":"subnet-0ed5a2f4d9d0b10da","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.stage_vpc.module.vpc.aws_route_table_association.public[0]","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-08300b254505537ca","route_table_id":"rtb-02884780c4cce730f","subnet_id":"subnet-0f52877bf4c35e54c","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-08300b254505537ca","route_table_id":"rtb-02884780c4cce730f","subnet_id":"subnet-0f52877bf4c35e54c","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.stage_vpc.module.vpc.aws_security_group.default","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-0a554abaa60163930","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-0a554abaa60163930","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"stage-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"stage","Name":"stage-default-sg"},"tags_all":{"Environment":"stage","Name":"stage-default-sg"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-0a554abaa60163930","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-0a554abaa60163930","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"stage-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"stage","Name":"stage-default-sg"},"tags_all":{"Environment":"stage","Name":"stage-default-sg"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.aws_subnet.private_subnet[0]","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_subnet","name":"private_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0ed5a2f4d9d0b10da","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ed5a2f4d9d0b10da","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"stage","Filter":"private_subnet","Name":"stage-us-east-1a-private-subnet"},"tags_all":{"Environment":"stage","Filter":"private_subnet","Name":"stage-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0ed5a2f4d9d0b10da","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ed5a2f4d9d0b10da","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"stage","Filter":"private_subnet","Name":"stage-us-east-1a-private-subnet"},"tags_all":{"Environment":"stage","Filter":"private_subnet","Name":"stage-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.aws_subnet.public_subnet[0]","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_subnet","name":"public_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0f52877bf4c35e54c","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0f52877bf4c35e54c","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"stage","Filter":"public_subnet","Name":"stage-us-east-1a-public-subnet"},"tags_all":{"Environment":"stage","Filter":"public_subnet","Name":"stage-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0f52877bf4c35e54c","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0f52877bf4c35e54c","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"stage","Filter":"public_subnet","Name":"stage-us-east-1a-public-subnet"},"tags_all":{"Environment":"stage","Filter":"public_subnet","Name":"stage-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module_address":"module.stage_vpc.module.vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-0db007dc41ef7db54","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-00dff01837010c6d1","default_route_table_id":"rtb-04ca3c953118dc80d","default_security_group_id":"sg-0bb079c8355bbddbe","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-0db007dc41ef7db54","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-04ca3c953118dc80d","owner_id":"444171185861","tags":{"Environment":"stage","Name":"stage-vpc"},"tags_all":{"Environment":"stage","Name":"stage-vpc"}},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-0db007dc41ef7db54","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-00dff01837010c6d1","default_route_table_id":"rtb-04ca3c953118dc80d","default_security_group_id":"sg-0bb079c8355bbddbe","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-0db007dc41ef7db54","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-04ca3c953118dc80d","owner_id":"444171185861","tags":{"Environment":"stage","Name":"stage-vpc"},"tags_all":{"Environment":"stage","Name":"stage-vpc"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_autoscaling_group.bastion-service","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:a3d29af1-e3e5-4fce-98e8-2c29b70f1683:autoScalingGroupName/bastion-service-asg2023062813162640220000000f","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162640220000000f","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-0fb9e9c81c048752f","launch_template_name":"bastion-service-host-dev2023062813162582530000000b","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162640220000000f","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-0bc5cd4cf5054059b"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"after":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:a3d29af1-e3e5-4fce-98e8-2c29b70f1683:autoScalingGroupName/bastion-service-asg2023062813162640220000000f","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162640220000000f","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-0fb9e9c81c048752f","launch_template_name":"bastion-service-host-dev2023062813162582530000000b","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162640220000000f","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-0bc5cd4cf5054059b"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"after_unknown":{},"before_sensitive":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]},"after_sensitive":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile[0]","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::444171185861:instance-profile/dev-us-east-1-vpc-05c8af84715ad862a_bastion","create_date":"2023-06-28T13:16:24Z","id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","role":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3CRYTHZF4JA"},"after":{"arn":"arn:aws:iam::444171185861:instance-profile/dev-us-east-1-vpc-05c8af84715ad862a_bastion","create_date":"2023-06-28T13:16:24Z","id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","role":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3CRYTHZF4JA"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys[0]","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","description":"","id":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3CRNOB26J7V","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","description":"","id":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3CRNOB26J7V","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role[0]","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::444171185861:role/dev-us-east-1-vpc-05c8af84715ad862a_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:22Z","description":"","force_detach_policies":false,"id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion"],"max_session_duration":3600,"name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3C2ZPASLCDE"},"after":{"arn":"arn:aws:iam::444171185861:role/dev-us-east-1-vpc-05c8af84715ad862a_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:22Z","description":"","force_detach_policies":false,"id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion"],"max_session_duration":3600,"name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3C2ZPASLCDE"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role_policy_attachment.check_ssh_authorized_keys[0]","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion-20230628131624449900000005","policy_arn":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","role":"dev-us-east-1-vpc-05c8af84715ad862a_bastion"},"after":{"id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion-20230628131624449900000005","policy_arn":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","role":"dev-us-east-1-vpc-05c8af84715ad862a_bastion"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-0fb9e9c81c048752f","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion"}],"id":"lt-0fb9e9c81c048752f","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-dev2023062813162582530000000b","name_prefix":"bastion-service-host-dev","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-00255059020328621"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIGRldi11cy1lYXN0LTEtdnBjLTA1YzhhZjg0NzE1YWQ4NjJhLVwkKGVjaG8gJWkgfCBjdXQgLWQtIC1mMSkgLXYgL2Rldi9sb2c6L2Rldi9sb2cgLXYgL29wdC9pYW1faGVscGVyOi9vcHQ6cm8gc3NoZF93b3JrZXIiClN0YW5kYXJkSW5wdXQ9c29ja2V0ClJ1bnRpbWVNYXhTZWM9NDMyMDAKCltJbnN0YWxsXQpXYW50ZWRCeT1tdWx0aS11c2VyLnRhcmdldApFT0YKI3NldCBob3N0IHNzaGQgdG8gcnVuIG9uIHBvcnQgMjIyMiBn9nmQgcmVzdGF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W4gc3BlY2lmaWMgc2V0IHVwIGZvciBkb2NrZXIgaHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vaW5zdGFsbC9saW51eC9kb2NrZXItY2UvZGViaWFuLyNpbnN0YWxsLXVzaW5nLXRoZS1yZXBvc2l0b3J5CmFwdC1nZXQgdXBkYXRlCkRFQklBTl9GUk9OVEVORD1ub25pbnRlcmFjdGl2ZSBhcHQtZ2V0IGluc3Rn9nGwgLXkgYXB0LXRyYW5zcG9ydC1odHRwcyBjYS1jZXJ0aWZpY2F0ZXMgY3VybCBncGcgc29mdHdhcmUtcHJvcGVydGllcy1jb21tb24gZG9ja2VyLmlvIApzeXN0ZW1jdGwgc3RhcnQgZG9ja2VyCm1rZGlyIC1wIC9vcHQvc3NoZF93b3JrZXIKI1dyaXRlIG91dCBEb2NrZXJmaWxlCmNhdCA8PCBFT0YgPiAvb3B0L3NzaGRfd29ya2VyL0RvY2tlcmZpbGUKRlJPTSB1YnVudHU6MjIuMDQKClJVTiBhcHQtZ2V0IHVwZGF0ZSAmJiBERUJJQU5fRlJPTlRFTkQ9bm9uaW50ZXJhY3RpdmUgYXB0LWdldCBpbnN0YWxsIC15IG9wZW5zc2gtc2VydmVyIHN1ZG8gYXdzY2xpICYmIGVjaG8gJ1wwMzNbMTszMW1JIGFtIGEgb25lLXRpbWUgVWJ1bnR1IGNvbnRhaW5lciB3aXRoIHBhc3N3b3JkbGVzcyBzdWRvLiBcMDMzWzE7Mzc7NDFtSSB3aWxsIHRlcm1pbmF0ZSBhZnRlciAxMiBob3VycyBvciBlbHNlIG9uIGV4aXRcMDMzWzBtJyA+IC9ldGMvbW90ZCAmJiBta2RpciAvdmFyL3J1bi9zc2hkCgpFWFBPU0UgMjIKQ01EIFsiL29wdC9zc2hfcG9wdWxhdGUuc2giXQpFT0YKI0J1aWxkIHNzaGQgc2VydmljZSBjb250YWluZXIKY2QgL29wdC9zc2hkX3dvcmtlcgpkb2NrZXIgYnVpbGQgLXQgc3NoZF93b3JrZXIgLgoKDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5n9nWU9Im1vZHVsZV9pYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANClgtTWVyZ2UtVHlwZTogc3RyKGFwcGVuZCkNCg0KIyEvYmluL2Jhc2gKbWtkaXIgLXAgL29wdC9nb2xn9nmcvc3JjL2ln9nS1hdXRob3JpemVkLWtleXMtY29tbWFuZC8KY2F0IDw8IEVPRiA+IC9vcHQvZ29sYW5nL3NyYy9pYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQvbWFpbi5nbwogICAgICAgIC8vIFRoaXMgY29kZSBpcyB0YWtlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9GdWxsc2NyZWVuL2ln9nS1hdXRob3JpemVkLWtleXMtY29tbWFuZAovLyBJdHMgcmVzcG9uc2liaWxpdHkgaXMgdG8gcXVlcnkgaWFtIHNlcnZpY2UgZm9yIHVzZXJzIHRoYXQgbWF0Y2ggY3JpdGVyaWEsIGFuZCBhZGQgdGhlbSB0byBlYzIgaW5zdGFuY2Ugb24gd2hpY2ggdGhpcyBpcyBydW4KcGFja2FnZSBtYWluCgppbXBvcnQgKAoJImZtdCIKCSJvcyIKCSJvcy9zaWduYWwiCgkic3luYyIKCSJzeXNjYWxsIgoKCSJnaXRodWIuY29tL2F3cy9hd3Mtc2RrLWdvL2F3cyIKCSJnaXRodWIuY29tL2F3cy9hd3Mtc2RrLWdvL2F3cy9zZXNzaW9uIgoJImdpdGh1Yi5jb20vYXdzL2F3cy1zZGstZ28vc2VydmljZS9pYW0iCikKCmNvbnN0ICgKCWV4aXRDb2RlT2sgICAgaW50ID0gMAoJZXhpdENvZGVFcnJvciBpbnQgPSAxCikKCnZhciAoCgl3ZyBzeW5jLldhaXRHcm91cAoKCWln9nUdyb3VwICAgID0gIiIKCXNzaFVzZXJOYW1lID0gIiIKKQoKZnVuYyBtYWluKCkgewoJc2VzcywgXyA6PSBzZXNzaW9uLk5ld1Nlc3Npb24oKQoJc3ZjIDo9IGln9nS5OZXcoc2VzcykKCgkvLyBjaGVjayBmb3IgdmFsaWQgdXNlciBuYW1lCglpZiBzc2hVc2VyTmFtZSAhPSAiIiAmJiAobGVuKG9zLkFyZ3MpIDwgMiB8fCBvcy5BcmdzWzFdICE9IHNzaFVzZXJOYW1lKSB7CgkJb3MuRXhpdChleGl0Q29kZU9rKQoJfQoKCS8vIEhn9nmRsZSBTSUdQSVBFCgkvLwoJLy8gV2hlbiBzc2hkIGlkZW50aWZpZXMgYSBrZXkgaW4gdGhlIHN0ZG91dCBvZiB0aGlzIGNvbW1n9nmQsIGl0IGNsb3NlcwoJLy8gdGhlIHBpcGUgY2F1c2luZyBhIHNlcmllcyBvZiBFUElQRSBlcnJvcnMgYmVmb3JlIGEgU0lHUElQRSBpcyBlbWl0dGVkCgkvLyBvbiB0aGlzIHNjcmlwdHMgcGlkLiBJZiB0aGUgc2NyaXB0IGV4aXRzIHdpdGggdGhlIHN0YW5kYXJkIDEzIGNvZGUsIHNzaGQKCS8vIHdpbGwgZGlzcmVnYXJkIGFueSBtYXRjaGVkIGtleXMuIFdlIGNhdGNoIHRoZSBzaWduYWwgaGVyZSBn9nmQgZXhpdCAwIHRvCgkvLyBmaXggdGhhdCBwcm9ibGVtLgoJYyA6PSBtYWtlKGNoYW4gb3MuU2lnbmFsLCAxKQoJc2lnbmFsLk5vdGlmeShjLCBzeXNjYWxsLlNJR1BJUEUpCglnbyBmdW5jKCkgewoJCV8gPSA8LWMKCQlvcy5FeGl0KGV4aXRDb2RlT2spCgl9KCkKCgl1c2VycywgZXJyIDo9IHVzZXJzKHN2YywgaWFtR3JvdXApCglpZiBlcnIgIT0gbmlsIHsKCQlmbXQuRnByaW50bG4ob3MuU3RkZXJyLCBlcnIuRXJyb3IoKSkKCQlvcy5FeGl0KGV4aXRDb2RlRXJyb3IpCgl9CgoJZm9yIF8sIHUgOj0gcmFuZ2UgdXNlcnMgewoJCXdnLkFkZCgxKQoJCWdvIGZ1bmModXNlck5n9nWUgKnN0cmluZykgewoJCQlwYXJn9nXMgOj0gJmln9nS5MaXN0U1NIUHVibGljS2V5c0lucHV0ewoJCQkJVXNlck5n9nWU6IHVzZXJOYW1lLAoJCQl9CgkJCWlmIHJlc3AsIGVyciA6PSBzdmMuTGlzdFNTSFB1YmxpY0tleXMocGFyYW1zKTsgZXJyID09IG5pbCB7CgkJCQlmb3IgXywgayA6PSByYW5nZSByZXNwLlNTSFB1YmxpY0tleXMgewoJCQkJCWlmICprLlN0YXR1cyAhPSAiQWN0aXZlIiB7CgkJCQkJCWNvbnRpbnVlCgkJCQkJfQoJCQkJCXBhcmFtcyA6PSAmaWFtLkdldFNTSFB1YmxpY0tleUlucHV0ewoJCQkJCQlFbmNvZGluZzogICAgICAgYXdzLlN0cmluZygiU1NIIiksCgkJCQkJCVNTSFB1YmxpY0tleUlkOiBrLlNTSFB1YmxpY0tleUlkLAoJCQkJCQlVc2VyTmFtZTogICAgICAgdXNlck5n9nWUsCgkJCQkJfQoJCQkJCXJlc3AsIGVyciA6PSBzdmMuR2V0U1NIUHVibGljS2V5KHBhcmFtcykKCQkJCQlpZiBlcnIgIT0gbmlsIHsKCQkJCQkJZm10LkZwcmludGxuKG9zLlN0ZGVyciwgZXJyLkVycm9yKCkpCgkJCQkJfQoJCQkJCWZtdC5QcmludGYoIiMgJXNcbiIsICp1c2VyTmFtZSkKCQkJCQlmbXQuUHJpbnRsbigqcmVzcC5TU0hQdWJsaWNLZXkuU1NIUHVibGljS2V5Qm9keSkKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWZtdC5GcHJpbnRsbihvcy5TdGRlcnIsIGVyci5FcnJvcigpKQoJCQl9CgkJCXdnLkRvbmUoKQoJCX0odS5Vc2VyTmFtZSkKCX0KCXdnLldhaXQoKQp9CgovLyBnZXQgYWxsIElBTSB1c2Vycywgb3IganVzdCB0aG9zZSB0aGF0IGFyZSBwYXJ0IG9mIHRoZSBkZWZpbmVkIGdyb3VwCmZ1bmMgdXNlcnMoc3ZjICppYW0uSUFNLCBpYW1Hcm91cCBzdHJpbmcpICn9nXSppYW0uVXNlciwgZXJyb3IpIHsKCWlmIGln9nUdyb3VwICE9ICIiIHsKCQlwYXJn9nXMgOj0gJmln9nS5HZXRHcm91cElucHV0ewoJCQlHcm91cE5n9nWU6IGF3cy5TdHJpbmcoaWFtR3JvdXApLAoJCQlNYXhJdGVtczogIGF3cy5JbnQ2NCgxMDAwKSwKCQl9CgkJcmVzcCwgZXJyIDo9IHN2Yy5HZXRHcm91cChwYXJn9nXMpCgkJcmV0dXJuIHJlc3AuVXNlcnMsIGVycgoJfQoJcGFyYW1zIDo9ICZpYW0uTGlzdFVzZXJzSW5wdXR7CgkJTWF4SXRlbXM6IGF3cy5JbnQ2NCgxMDAwKSwKCX0KCXJlc3AsIGVyciA6PSBzdmMuTGlzdFVzZXJzKHBhcmFtcykKCXJldHVybiByZXNwLlVzZXJzLCBlcnIKfQoKRU9GCkRFQklBTl9GUk9OVEVORD1ub25pbnRlcmFjdGl2ZQpzdWRvIGFwdC1nZXQgaW5zdGFsbCAteSBnb2xn9nmcKCmV4cG9ydCBHT1BBVEg9Ii9yb290L2dvIgpleHBvcnQgR09DQUNIRT0iL3Jvb3QvLmNhY2hlL2dvLWJ1aWxkIgpleHBvcnQgR09FTlY9Ii9yb290Ly5jb25maWcvZ28vZW52IgoKY2QgL29wdC9nb2xn9nmcvc3JjL2ln9nS1hdXRob3JpemVkLWtleXMtY29tbWFuZAoKZ28gbW9kIGluaXQgaWFtLWF1dGhvcml6ZWQta2V5cy1jb21tYW5kCmdvIG1vZCB0aWR5CgovdXNyL2Jpbi9nbyBidWlsZCAtbGRmbGFncyAiLVggbWFpbi5pYW1Hcm91cD0iIC1vIC9vcHQvaWFtX2hlbHBlci9pYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQgLi9tYWluLmdvCg0KLS1NSU1FQk9VTkRBUlkNCkNvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPSJleHRyYV91c2VyX2RhdGEiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANClgtTWVyZ2UtVHlwZTogc3RyKGFwcGVuZCkNCg0KIyEvYmluL2Jhc2gNCi0tTUlNRUJPVU5EQVJZLS0NCg==","vpc_security_group_ids":[]},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-0fb9e9c81c048752f","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion"}],"id":"lt-0fb9e9c81c048752f","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-dev2023062813162582530000000b","name_prefix":"bastion-service-host-dev","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-00255059020328621"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIGRldi11cy1lYXN0LTEtdnBjLTA1YzhhZjg0NzE1YWQ4NjJhLVwkKGVjaG8gJWkgfCBjdXQgLWQtIC1mMSkgLXYgL2Rldi9sb2c6L2Rldi9sb2cgLXYgL29wdC9pYW1faGVscGVyOi9vcHQ6cm8gc3NoZF93b3JrZXIiClN0YW5kYXJkSW5wdXQ9c29ja2V0ClJ1bnRpbWVNYXhTZWM9NDMyMDAKCltJbnN0YWxsXQpXYW50ZWRCeT1tdWx0aS11c2VyLnRhcmdldApFT0YKI3NldCBob3N0IHNzaGQgdG8gcnVuIG9uIHBvcnQgMjIyMiBn9nmQgcmVzdGF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W4gc3BlY2lmaWMgc2V0IHVwIGZvciBkb2NrZXIgaHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vaW5zdGFsbC9saW51eC9kb2NrZXItY2UvZGViaWFuLyNpbnN0YWxsLXVzaW5nLXRoZS1yZXBvc2l0b3J5CmFwdC1nZXQgdXBkYXRlCkRFQklBTl9GUk9OVEVORD1ub25pbnRlcmFjdGl2ZSBhcHQtZ2V0IGluc3Rn9nGwgLXkgYXB0LXRyYW5zcG9ydC1odHRwcyBjYS1jZXJ0aWZpY2F0ZXMgY3VybCBncGcgc29mdHdhcmUtcHJvcGVydGllcy1jb21tb24gZG9ja2VyLmlvIApzeXN0ZW1jdGwgc3RhcnQgZG9ja2VyCm1rZGlyIC1wIC9vcHQvc3NoZF93b3JrZXIKI1dyaXRlIG91dCBEb2NrZXJmaWxlCmNhdCA8PCBFT0YgPiAvb3B0L3NzaGRfd29ya2VyL0RvY2tlcmZpbGUKRlJPTSB1YnVudHU6MjIuMDQKClJVTiBhcHQtZ2V0IHVwZGF0ZSAmJiBERUJJQU5fRlJPTlRFTkQ9bm9uaW50ZXJhY3RpdmUgYXB0LWdldCBpbnN0YWxsIC15IG9wZW5zc2gtc2VydmVyIHN1ZG8gYXdzY2xpICYmIGVjaG8gJ1wwMzNbMTszMW1JIGFtIGEgb25lLXRpbWUgVWJ1bnR1IGNvbnRhaW5lciB3aXRoIHBhc3N3b3JkbGVzcyBzdWRvLiBcMDMzWzE7Mzc7NDFtSSB3aWxsIHRlcm1pbmF0ZSBhZnRlciAxMiBob3VycyBvciBlbHNlIG9uIGV4aXRcMDMzWzBtJyA+IC9ldGMvbW90ZCAmJiBta2RpciAvdmFyL3J1bi9zc2hkCgpFWFBPU0UgMjIKQ01EIFsiL29wdC9zc2hfcG9wdWxhdGUuc2giXQpFT0YKI0J1aWxkIHNzaGQgc2VydmljZSBjb250YWluZXIKY2QgL29wdC9zc2hkX3dvcmtlcgpkb2NrZXIgYnVpbGQgLXQgc3NoZF93b3JrZXIgLgoKDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5n9nWU9Im1vZHVsZV9pYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQiDQpDb2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","vpc_security_group_ids":[]},"after_unknown":{},"before_sensitive":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"after_sensitive":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","arn_suffix":"net/bastion-service-dev/e4a0162397dd1821","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-dev-e4a0162397dd1821.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-dev","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0bc5cd4cf5054059b"}],"subnets":["subnet-0bc5cd4cf5054059b"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"after":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","arn_suffix":"net/bastion-service-dev/e4a0162397dd1821","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-dev-e4a0162397dd1821.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-dev","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0bc5cd4cf5054059b"}],"subnets":["subnet-0bc5cd4cf5054059b"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"after_unknown":{},"before_sensitive":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}},"after_sensitive":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_listener.bastion-service","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-dev/e4a0162397dd1821/86776ed103a4416d","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-dev/e4a0162397dd1821/86776ed103a4416d","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"after":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-dev/e4a0162397dd1821/86776ed103a4416d","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-dev/e4a0162397dd1821/86776ed103a4416d","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"after_unknown":{},"before_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","arn_suffix":"targetgroup/bastion-service-dev-22/9e80710297982ed3","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-dev-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-05c8af84715ad862a"},"after":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","arn_suffix":"targetgroup/bastion-service-dev-22/9e80710297982ed3","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-dev-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{},"before_sensitive":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]},"after_sensitive":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-00255059020328621","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-00255059020328621","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"dev-bastion-service20230628131622632700000001","name_prefix":"dev-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-00255059020328621","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-00255059020328621","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"dev-bastion-service20230628131622632700000001","name_prefix":"dev-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.bastion_host_out[0]","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-2474211610","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-084436aa17cbf31d6","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"after":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-2474211610","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-084436aa17cbf31d6","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{},"before_sensitive":{"cidr_blocks":[false]},"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.lb_healthcheck_in","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-995351726","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-00ae6435961d2ede0","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"after":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-995351726","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-00ae6435961d2ede0","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"after_unknown":{},"before_sensitive":{"cidr_blocks":[false]},"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.service_ssh_in[0]","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-1665769564","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-04bf666941799a72f","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"after":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-1665769564","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-04bf666941799a72f","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"after_unknown":{},"before_sensitive":{"cidr_blocks":[false]},"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_autoscaling_group.bastion-service","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:f30b0fb2-d87e-4914-8e61-9153b86f12a8:autoScalingGroupName/bastion-service-asg2023062813162633610000000d","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162633610000000d","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-016b40fccf3c90cde","launch_template_name":"bastion-service-host-prod20230628131625052100000007","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162633610000000d","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-06a5f250d4c8c237d"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"after":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:f30b0fb2-d87e-4914-8e61-9153b86f12a8:autoScalingGroupName/bastion-service-asg2023062813162633610000000d","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162633610000000d","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-016b40fccf3c90cde","launch_template_name":"bastion-service-host-prod20230628131625052100000007","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162633610000000d","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-06a5f250d4c8c237d"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"after_unknown":{},"before_sensitive":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]},"after_sensitive":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile[0]","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::444171185861:instance-profile/prod-us-east-1-vpc-089a9617aef708250_bastion","create_date":"2023-06-28T13:16:23Z","id":"prod-us-east-1-vpc-089a9617aef708250_bastion","name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","role":"prod-us-east-1-vpc-089a9617aef708250_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3CYCCC5CFMT"},"after":{"arn":"arn:aws:iam::444171185861:instance-profile/prod-us-east-1-vpc-089a9617aef708250_bastion","create_date":"2023-06-28T13:16:23Z","id":"prod-us-east-1-vpc-089a9617aef708250_bastion","name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","role":"prod-us-east-1-vpc-089a9617aef708250_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3CYCCC5CFMT"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys[0]","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","description":"","id":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3C75U5SHECM","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","description":"","id":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3C75U5SHECM","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role[0]","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::444171185861:role/prod-us-east-1-vpc-089a9617aef708250_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:22Z","description":"","force_detach_policies":false,"id":"prod-us-east-1-vpc-089a9617aef708250_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion"],"max_session_duration":3600,"name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3CROAPNR2QN"},"after":{"arn":"arn:aws:iam::444171185861:role/prod-us-east-1-vpc-089a9617aef708250_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:22Z","description":"","force_detach_policies":false,"id":"prod-us-east-1-vpc-089a9617aef708250_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion"],"max_session_duration":3600,"name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3CROAPNR2QN"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role_policy_attachment.check_ssh_authorized_keys[0]","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"prod-us-east-1-vpc-089a9617aef708250_bastion-20230628131624227400000004","policy_arn":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","role":"prod-us-east-1-vpc-089a9617aef708250_bastion"},"after":{"id":"prod-us-east-1-vpc-089a9617aef708250_bastion-20230628131624227400000004","policy_arn":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","role":"prod-us-east-1-vpc-089a9617aef708250_bastion"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-016b40fccf3c90cde","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"prod-us-east-1-vpc-089a9617aef708250_bastion"}],"id":"lt-016b40fccf3c90cde","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-prod20230628131625052100000007","name_prefix":"bastion-service-host-prod","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-01f7a5a8979a15a5c"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIHByb2QtdXMtZWFzdC0xLXZwYy0wODlhOTYxN2FlZjcwODI1MC1cJChlY2hvICVpIHwgY3V0IC1kLSAtZjEpIC12IC9kZXYvbG9nOi9kZXYvbG9nIC12IC9vcHQvaWFtX2hlbHBlcjovb3B0OnJvIHNzaGRfd29ya2VyIgpTdGFuZGFyZElucHV0PXNvY2tldApSdW50aW1lTWF4U2VjPTQzMjAwCgpbSW5zdGFsbF0KV2FudGVkQnk9bXVsdGktdXNlci50YXJnZXQKRU9GCiNzZXQgaG9zdCBzc2hkIHRvIHJ1biBvbiBwb3J0IDIyMjIgYW5kIHJlc3Rh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UHVibGljS2V5cyB7CgkJCQkJaWYgKmsuU3RhdHVzICE9ICJBY3RpdmUiIHsKCQkJCQkJY29udGludWUKCQkJCQl9CgkJCQkJcGFyYW1zIDo9ICZpYW0uR2V0U1NIUHVibGljS2V5SW5wdXR7CgkJCQkJCUVuY29kaW5nOiAgICAgICBhd3MuU3RyaW5nKCJTU0giKSwKCQkJCQkJU1NIUHVibGljS2V5SWQ6IGsuU1NIUHVibGljS2V5SWQsCgkJCQkJCVVzZXJOYW1lOiAgICAgICB1c2VyTmFtZSwKCQkJCQl9CgkJCQkJcmVzcCwgZXJyIDo9IHN2Yy5HZXRTU0hQdWJsaWNLZXkocGFyYW1zKQoJCQkJCWlmIGVyciAhPSBuaWwgewoJCQkJCQlmbXQuRnByaW50bG4ob3MuU3RkZXJyLCBlcnIuRXJyb3IoKSkKCQkJCQl9CgkJCQkJZm10LlByaW50ZigiIyAlc1xuIiwgKnVzZXJOYW1lKQoJCQkJCWZtdC5QcmludGxuKCpyZXNwLlNTSFB1YmxpY0tleS5TU0hQdWJsaWNLZXlCb2R5KQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJZm10LkZwcmludGxuKG9zLlN0ZGVyciwgZXJyLkVycm9yKCkpCgkJCX0KCQkJd2cuRG9uZSgpCgkJfSh1LlVzZXJOYW1lKQoJfQoJd2cuV2FpdCgpCn0KCi8vIGdldCBn9nGwgSUFNIHVzZXJzLCBvciBqdXN0IHRob3NlIHRoYXQgYXJlIHBhcnQgb2YgdGhlIGRlZmluZWQgZ3JvdXAKZnVuYyB1c2VycyhzdmMgKmln9nS5JQU0sIGln9nUdyb3VwIHN0cmluZykgKFtdKmln9nS5Vc2VyLCBlcnJvcikgewoJaWYgaWFtR3JvdXAgIT0gIiIgewoJCXBhcmFtcyA6PSAmaWFtLkdldEdyb3VwSW5wdXR7CgkJCUdyb3VwTmFtZTogYXdzLlN0cmluZyhpYW1Hcm91cCksCgkJCU1heEl0ZW1zOiAgYXdzLkludDY0KDEwMDApLAoJCX0KCQlyZXNwLCBlcnIgOj0gc3ZjLkdldEdyb3VwKHBhcmFtcykKCQlyZXR1cm4gcmVzcC5Vc2VycywgZXJyCgl9CglwYXJn9nXMgOj0gJmln9nS5MaXN0VXNlcnNJbnB1dHsKCQlNYXhJdGVtczogYXdzLkludDY0KDEwMDApLAoJfQoJcmVzcCwgZXJyIDo9IHN2Yy5MaXN0VXNlcnMocGFyYW1zKQoJcmV0dXJuIHJlc3AuVXNlcnMsIGVycgp9CgpFT0YKREVCSUFOX0ZST05URU5EPW5vbmludGVyYWN0aXZlCnN1ZG8gYXB0LWdldCBpbnN0YWxsIC15IGdvbGFuZwoKZXhwb3J0IEdPUEFUSD0iL3Jvb3QvZ28iCmV4cG9ydCBHT0NBQ0hFPSIvcm9vdC8uY2FjaGUvZ28tYnVpbGQiCmV4cG9ydCBHT0VOVj0iL3Jvb3QvLmNvbmZpZy9nby9lbnYiCgpjZCAvb3B0L2dvbGFuZy9zcmMvaWFtLWF1dGhvcml6ZWQta2V5cy1jb21tYW5kCgpnbyBtb2QgaW5pdCBpYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQKZ28gbW9kIHRpZHkKCi91c3IvYmluL2dvIGJ1aWxkIC1sZGZsYWdzICItWCBtYWluLmln9nUdyb3VwPSIgLW8gL29wdC9pYW1faGVscGVyL2ln9nS1hdXRob3JpemVkLWtleXMtY29tbWFuZCAuL21haW4uZ28KDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5n9nWU9ImV4dHJhX3VzZXJfZGF0YSINCkNvbnRlbnQtVHJn9nnNmZXItRW5jb2Rpbmc6IDdiaXQNCkNvbnRlbnQtVHlwZTogdGV4dC94LXNoZWxsc2NyaXB0DQpNaW1lLVZlcnNpb246IDEuMA0KWC1NZXJnZS1UeXBlOiBzdHIoYXBwZW5kKQ0KDQojIS9iaW4vYmFzaA0KLS1NSU1FQk9VTkRBUlktLQ0K","vpc_security_group_ids":[]},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-016b40fccf3c90cde","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"prod-us-east-1-vpc-089a9617aef708250_bastion"}],"id":"lt-016b40fccf3c90cde","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-prod20230628131625052100000007","name_prefix":"bastion-service-host-prod","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-01f7a5a8979a15a5c"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIHByb2QtdXMtZWFzdC0xLXZwYy0wODlhOTYxN2FlZjcwODI1MC1cJChlY2hvICVpIHwgY3V0IC1kLSAtZjEpIC12IC9kZXYvbG9nOi9kZXYvbG9nIC12IC9vcHQvaWFtX2hlbHBlcjovb3B0OnJvIHNzaGRfd29ya2VyIgpTdGFuZGFyZElucHV0PXNvY2tldApSdW50aW1lTWF4U2VjPTQzMjAwCgpbSW5zdGFsbF0KV2FudGVkQnk9bXVsdGktdXNlci50YXJnZXQKRU9GCiNzZXQgaG9zdCBzc2hkIHRvIHJ1biBvbiBwb3J0IDIyMjIgYW5kIHJlc3Rh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UHVibGljS2V5cyB7CgkJCQkJaWYgKmsuU3RhdHVzICE9ICJBY3RpdmUiIHsKCQkJCQkJY29udGludWUKCQkJCQl9CgkJCQkJcGFyYW1zIDo9ICZpYW0uR2V0U1NIUHVibGljS2V5SW5wdXR7CgkJCQkJCUVuY29kaW5nOiAgICAgICBhd3MuU3RyaW5nKCJTU0giKSwKCQkJCQkJU1NIUHVibGljS2V5SWQ6IGsuU1NIUHVibGljS2V5SWQsCgkJCQkJCVVzZXJOYW1lOiAgICAgICB1c2VyTmFtZSwKCQkJCQl9CgkJCQkJcmVzcCwgZXJyIDo9IHN2Yy5HZXRTU0hQdWJsaWNLZXkocGFyYW1zKQoJCQkJCWlmIGVyciAhPSBuaWwgewoJCQkJCQlmbXQuRnByaW50bG4ob3MuU3RkZXJyLCBlcnIuRXJyb3IoKSkKCQkJCQl9CgkJCQkJZm10LlByaW50ZigiIyAlc1xuIiwgKnVzZXJOYW1lKQoJCQkJCWZtdC5QcmludGxuKCpyZXNwLlNTSFB1YmxpY0tleS5TU0hQdWJsaWNLZXlCb2R5KQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJZm10LkZwcmludGxuKG9zLlN0ZGVyciwgZXJyLkVycm9yKCkpCgkJCX0KCQkJd2cuRG9uZSgpCgkJfSh1LlVzZXJOYW1lKQoJfQoJd2cuV2FpdCgpCn0KCi8vIGdldCBn9nGwgSUFNIHVzZXJzLCBvciBqdXN0IHRob3NlIHRoYXQgYXJlIHBhcnQgb2YgdGhlIGRlZmluZWQgZ3JvdXAKZnVuYyB1c2VycyhzdmMgKmln9nS5JQU0sIGln9nUdyb3VwIHN0cmluZykgKFtdKmln9nS5Vc2VyLCBlcnJvcikgewoJaWYgaWFtR3JvdXAgIT0gIiIgewoJCXBhcmFtcyA6PSAmaWFtLkdldEdyb3VwSW5wdXR7CgkJCUdyb3VwTmFtZTogYXdzLlN0cmluZyhpYW1Hcm91cCksCgkJCU1heEl0ZW1zOiAgYXdzLkludDY0KDEwMDApLAoJCX0KCQlyZXNwLCBlcnIgOj0gc3ZjLkdldEdyb3VwKHBhcmFtcykKCQlyZXR1cm4gcmVzcC5Vc2VycywgZXJyCgl9CglwYXJn9nXMgOj0gJmln9nS5MaXN0VXNlcnNJbnB1dHsKCQlNYXhJdGVtczogYXdzLkludDY0KDEwMDApLAoJfQoJcmVzcCwgZXJyIDo9IHN2Yy5MaXN0VXNlcnMocGFyYW1zKQoJcmV0dXJuIHJlc3AuVXNlcnMsIGVycgp9CgpFT0YKREVCSUFOX0ZST05URU5EPW5vbmludGVyYWN0aXZlCnN1ZG8gYXB0LWdldCBpbnN0YWxsIC15IGdvbGFuZwoKZXhwb3J0IEdPUEFUSD0iL3Jvb3QvZ28iCmV4cG9ydCBHT0NBQ0hFPSIvcm9vdC8uY2FjaGUvZ28tYnVpbGQiCmV4cG9ydCBHT0VOVj0iL3Jvb3QvLmNvbmZpZy9nby9lbnYiCgpjZCAvb3B0L2dvbGFuZy9zcmMvaWFtLWF1dGhvcml6ZWQta2V5cy1jb21tYW5kCgpnbyBtb2QgaW5pdCBpYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQKZ28gbW9kIHRpZHkKCi91c3IvYmluL2dvIGJ1aWxkIC1sZGZsYWdzICItWCBtYWluLmln9nUdyb3VwPSIgLW8gL29wdC9pYW1faGVscGVyL2ln9nS1hdXRob3JpemVkLWtleXMtY29tbWFuZCAuL21haW4uZ28KDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5n9nWU9ImV4dHJhX3VzZXJfZGF0YSINCkNvbnRlbnQtVHJn9nnNmZXItRW5jb2Rpbmc6IDdiaXQNCkNvbnRlbnQtVHlwZTogdGV4dC94LXNoZWxsc2NyaXB0DQpNaW1lLVZlcnNpb246IDEuMA0KWC1NZXJnZS1UeXBlOiBzdHIoYXBwZW5kKQ0KDQojIS9iaW4vYmFzaA0KLS1NSU1FQk9VTkRBUlktLQ0K","vpc_security_group_ids":[]},"after_unknown":{},"before_sensitive":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"after_sensitive":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","arn_suffix":"net/bastion-service-prod/d902477133b15e92","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-prod-d902477133b15e92.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-prod","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-06a5f250d4c8c237d"}],"subnets":["subnet-06a5f250d4c8c237d"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-089a9617aef708250","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"after":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","arn_suffix":"net/bastion-service-prod/d902477133b15e92","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-prod-d902477133b15e92.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-prod","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-06a5f250d4c8c237d"}],"subnets":["subnet-06a5f250d4c8c237d"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-089a9617aef708250","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"after_unknown":{},"before_sensitive":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}},"after_sensitive":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_listener.bastion-service","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-prod/d902477133b15e92/d022f111b0817233","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-prod/d902477133b15e92/d022f111b0817233","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"after":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-prod/d902477133b15e92/d022f111b0817233","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-prod/d902477133b15e92/d022f111b0817233","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"after_unknown":{},"before_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","arn_suffix":"targetgroup/bastion-service-prod-22/d7ecd998847525be","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-prod-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-089a9617aef708250"},"after":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","arn_suffix":"targetgroup/bastion-service-prod-22/d7ecd998847525be","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-prod-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-089a9617aef708250"},"after_unknown":{},"before_sensitive":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]},"after_sensitive":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-01f7a5a8979a15a5c","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-01f7a5a8979a15a5c","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"prod-bastion-service20230628131622642400000002","name_prefix":"prod-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-01f7a5a8979a15a5c","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-01f7a5a8979a15a5c","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"prod-bastion-service20230628131622642400000002","name_prefix":"prod-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.bastion_host_out[0]","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-2818800821","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-012df4635b6cede1b","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"after":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-2818800821","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-012df4635b6cede1b","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{},"before_sensitive":{"cidr_blocks":[false]},"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.lb_healthcheck_in","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-3358210003","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-00df11ce7ee03d033","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"after":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-3358210003","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-00df11ce7ee03d033","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"after_unknown":{},"before_sensitive":{"cidr_blocks":[false]},"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.service_ssh_in[0]","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-1045749227","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-0c2aa5e0128248a13","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"after":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-1045749227","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-0c2aa5e0128248a13","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"after_unknown":{},"before_sensitive":{"cidr_blocks":[false]},"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_autoscaling_group.bastion-service","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:1abc1d1c-c294-4c2e-b1c4-59e5caaa3b83:autoScalingGroupName/bastion-service-asg2023062813162637780000000e","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162637780000000e","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-0abbb5191c920c151","launch_template_name":"bastion-service-host-stage20230628131625123200000009","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162637780000000e","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-0ed5a2f4d9d0b10da"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"after":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:1abc1d1c-c294-4c2e-b1c4-59e5caaa3b83:autoScalingGroupName/bastion-service-asg2023062813162637780000000e","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162637780000000e","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-0abbb5191c920c151","launch_template_name":"bastion-service-host-stage20230628131625123200000009","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162637780000000e","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-0ed5a2f4d9d0b10da"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"after_unknown":{},"before_sensitive":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]},"after_sensitive":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile[0]","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::444171185861:instance-profile/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","create_date":"2023-06-28T13:16:24Z","id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","role":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3C5UV7VMP4K"},"after":{"arn":"arn:aws:iam::444171185861:instance-profile/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","create_date":"2023-06-28T13:16:24Z","id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","role":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3C5UV7VMP4K"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys[0]","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","description":"","id":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3CTONM5UMEA","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","description":"","id":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3CTONM5UMEA","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role[0]","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::444171185861:role/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:23Z","description":"","force_detach_policies":false,"id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion"],"max_session_duration":3600,"name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3CSORA3ZUCR"},"after":{"arn":"arn:aws:iam::444171185861:role/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:23Z","description":"","force_detach_policies":false,"id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion"],"max_session_duration":3600,"name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3CSORA3ZUCR"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role_policy_attachment.check_ssh_authorized_keys[0]","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion-20230628131624740100000006","policy_arn":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","role":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion"},"after":{"id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion-20230628131624740100000006","policy_arn":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","role":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-0abbb5191c920c151","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion"}],"id":"lt-0abbb5191c920c151","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-stage20230628131625123200000009","name_prefix":"bastion-service-host-stage","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-08771d0af0c8068d0"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIHN0YWdlLXVzLWVhc3QtMS12cGMtMGRiMDA3ZGM0MWVmN2RiNTQtXCQoZWNobyAlaSB8IGN1dCAtZC0gLWYxKSAtdiAvZGV2L2xvZzovZGV2L2xvZyAtdiAvb3B0L2ln9nV9oZWxwZXI6L29wdDpybyBzc2hkX3dvcmtlciIKU3Rn9nmRhcmRJbnB1dD1zb2NrZXQKUnVudGltZU1heFNlYz00MzIwMAoKW0luc3Rn9nGxdCldn9nnRlZEJ5PW11bHRpLXVzZXIudGFyZ2V0CkVPRgojc2V0IGhvc3Qgc3NoZCB0byBydW4gb24gcG9ydCAyMjIyIGFuZCBy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","vpc_security_group_ids":[]},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-0abbb5191c920c151","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion"}],"id":"lt-0abbb5191c920c151","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-stage20230628131625123200000009","name_prefix":"bastion-service-host-stage","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-08771d0af0c8068d0"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIHN0YWdlLXVzLWVhc3QtMS12cGMtMGRiMDA3ZGM0MWVmN2RiNTQtXCQoZWNobyAlaSB8IGN1dCAtZC0gLWYxKSAtdiAvZGV2L2xvZzovZGV2L2xvZyAtdiAvb3B0L2ln9nV9oZWxwZXI6L29wdDpybyBzc2hkX3dvcmtlciIKU3Rn9nmRhcmRJbnB1dD1zb2NrZXQKUnVudGltZU1heFNlYz00MzIwMAoKW0luc3Rn9nGxdCldn9nnRlZEJ5PW11bHRpLXVzZXIudGFyZ2V0CkVPRgojc2V0IGhvc3Qgc3NoZCB0byBydW4gb24gcG9ydCAyMjIyIGFuZCBy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","vpc_security_group_ids":[]},"after_unknown":{},"before_sensitive":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"after_sensitive":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","arn_suffix":"net/bastion-service-stage/d391ddd2ac4ea4ff","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-stage-d391ddd2ac4ea4ff.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-stage","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0ed5a2f4d9d0b10da"}],"subnets":["subnet-0ed5a2f4d9d0b10da"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"after":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","arn_suffix":"net/bastion-service-stage/d391ddd2ac4ea4ff","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-stage-d391ddd2ac4ea4ff.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-stage","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0ed5a2f4d9d0b10da"}],"subnets":["subnet-0ed5a2f4d9d0b10da"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"after_unknown":{},"before_sensitive":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}},"after_sensitive":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_listener.bastion-service","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-stage/d391ddd2ac4ea4ff/68746318bdeff37e","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-stage/d391ddd2ac4ea4ff/68746318bdeff37e","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"after":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-stage/d391ddd2ac4ea4ff/68746318bdeff37e","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-stage/d391ddd2ac4ea4ff/68746318bdeff37e","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"after_unknown":{},"before_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","arn_suffix":"targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-stage-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-0db007dc41ef7db54"},"after":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","arn_suffix":"targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-stage-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-0db007dc41ef7db54"},"after_unknown":{},"before_sensitive":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]},"after_sensitive":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-08771d0af0c8068d0","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-08771d0af0c8068d0","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"stage-bastion-service20230628131622655300000003","name_prefix":"stage-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-08771d0af0c8068d0","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-08771d0af0c8068d0","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"stage-bastion-service20230628131622655300000003","name_prefix":"stage-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.bastion_host_out[0]","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-486903834","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-0f9ddaa9fe650d278","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"after":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-486903834","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-0f9ddaa9fe650d278","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{},"before_sensitive":{"cidr_blocks":[false]},"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.lb_healthcheck_in","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-856898212","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-05bb803866144f0d8","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"after":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-856898212","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-05bb803866144f0d8","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"after_unknown":{},"before_sensitive":{"cidr_blocks":[false]},"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.service_ssh_in[0]","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-2269610193","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-03d0ddef016559aee","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"after":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-2269610193","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-03d0ddef016559aee","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"after_unknown":{},"before_sensitive":{"cidr_blocks":[false]},"after_sensitive":{"cidr_blocks":[false]}}}],"output_changes":{"state_bucket_arn":{"actions":["no-op"],"before":"arn:aws:s3:::n9n-s3-state-220523","after":"arn:aws:s3:::n9n-s3-state-220523","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"state_dynamo":{"actions":["no-op"],"before":"tf_state_lock","after":"tf_state_lock","after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.4.4","values":{"outputs":{"state_bucket_arn":{"sensitive":false,"value":"arn:aws:s3:::n9n-s3-state-220523","type":"string"},"state_dynamo":{"sensitive":false,"value":"tf_state_lock","type":"string"}},"root_module":{"resources":[{"address":"aws_dynamodb_table.tf-state-lock","mode":"managed","type":"aws_dynamodb_table","name":"tf-state-lock","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:us-east-1:444171185861:table/tf_state_lock","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PROVISIONED","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"tf_state_lock","local_secondary_index":[],"name":"tf_state_lock","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":5,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Name":"Dynamodb Terraform State Lock Table"},"tags_all":{"Name":"Dynamodb Terraform State Lock Table"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"sensitive_values":{"attribute":[{}],"global_secondary_index":[],"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}},{"address":"aws_kms_key.s3-kms-key","mode":"managed","type":"aws_kms_key","name":"s3-kms-key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","bypass_policy_lockout_safety_check":false,"custom_key_store_id":"","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"Use this key to encrypt S3 buckets","enable_key_rotation":false,"id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","is_enabled":true,"key_id":"3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::444171185861:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_s3_bucket.s3-tf-bucket","mode":"managed","type":"aws_s3_bucket","name":"s3-tf-bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::n9n-s3-state-220523","bucket":"n9n-s3-state-220523","bucket_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"n9n-s3-state-220523.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"n9n-s3-state-220523","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]}],"tags":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"tags_all":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"},"timeouts":null,"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"aws_s3_bucket_acl.s3-tf-state-bucket-acl","mode":"managed","type":"aws_s3_bucket_acl","name":"s3-tf-state-bucket-acl","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"admin-aws","email_address":"","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"admin-aws","id":"d4c96d64b817c34d7e0364b4656b90078c77cc3dee87748e03a9bcc6a12f13b2"}]}],"acl":"private","bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523,private"},"sensitive_values":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]},"depends_on":["aws_s3_bucket.s3-tf-bucket"]},{"address":"aws_s3_bucket_public_access_block.s3-pub-block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3-pub-block","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"n9n-s3-state-220523","id":"n9n-s3-state-220523","ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{},"depends_on":["aws_s3_bucket.s3-tf-bucket"]},{"address":"aws_s3_bucket_server_side_encryption_configuration.s3-sse-config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"s3-sse-config","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:444171185861:key/3ebfdad6-08b6-46e3-83e6-caf1e8d9c004","sse_algorithm":"aws:kms"}],"bucket_key_enabled":false}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"depends_on":["aws_kms_key.s3-kms-key","aws_s3_bucket.s3-tf-bucket"]},{"address":"aws_s3_bucket_versioning.s3-tf-bucket-versioning","mode":"managed","type":"aws_s3_bucket_versioning","name":"s3-tf-bucket-versioning","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"n9n-s3-state-220523","expected_bucket_owner":"","id":"n9n-s3-state-220523","mfa":null,"versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]},"depends_on":["aws_s3_bucket.s3-tf-bucket"]}],"child_modules":[{"address":"module.dev_vpc","child_modules":[{"resources":[{"address":"module.dev_vpc.module.vpc.data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["us-east-1"],"id":"us-east-1","names":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"state":null,"timeouts":null,"zone_ids":["use1-az4","use1-az6","use1-az1","use1-az2","use1-az3","use1-az5"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false,false,false],"zone_ids":[false,false,false,false,false,false]}},{"address":"module.dev_vpc.module.vpc.aws_eip.n9n_nat_eip","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-001f842189e1f930a","associate_with_private_ip":null,"association_id":"eipassoc-0b72c72ce9dbb6c70","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-001f842189e1f930a","instance":"","network_border_group":"us-east-1","network_interface":"eni-04e6ad75805323268","private_dns":"ip-10-0-1-47.ec2.internal","private_ip":"10.0.1.47","public_dns":"ec2-54-175-233-149.compute-1.amazonaws.com","public_ip":"54.175.233.149","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_internet_gateway.n9n_ig","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-016d54fc87a6cb779","id":"igw-016d54fc87a6cb779","owner_id":"444171185861","tags":{"Environment":"dev","Name":"dev-igw"},"tags_all":{"Environment":"dev","Name":"dev-igw"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-001f842189e1f930a","association_id":"eipassoc-0b72c72ce9dbb6c70","connectivity_type":"public","id":"nat-0433ec27e259a40de","network_interface_id":"eni-04e6ad75805323268","private_ip":"10.0.1.47","public_ip":"54.175.233.149","subnet_id":"subnet-0f0a7129fb658f9ad","tags":{"Environment":"dev","Name":"dev-nat"},"tags_all":{"Environment":"dev","Name":"dev-nat"}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_eip.n9n_nat_eip","module.dev_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.dev_vpc.module.vpc.aws_subnet.public_subnet","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-09c72a3f8852d80281080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0433ec27e259a40de","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-09c72a3f8852d8028","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{},"depends_on":["module.dev_vpc.module.vpc.aws_eip.n9n_nat_eip","module.dev_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.dev_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","module.dev_vpc.module.vpc.aws_route_table.private","module.dev_vpc.module.vpc.aws_subnet.public_subnet","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-016d54fc87a6cb779","id":"r-rtb-037ee04ee10c1710f1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-037ee04ee10c1710f","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{},"depends_on":["module.dev_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.dev_vpc.module.vpc.aws_route_table.public","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-09c72a3f8852d8028","id":"rtb-09c72a3f8852d8028","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0433ec27e259a40de","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"dev-private-route-table"},"tags_all":{"Environment":"dev","Name":"dev-private-route-table"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-037ee04ee10c1710f","id":"rtb-037ee04ee10c1710f","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-016d54fc87a6cb779","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"dev-public-route-table"},"tags_all":{"Environment":"dev","Name":"dev-public-route-table"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-025fa3a543c1ba95c","route_table_id":"rtb-09c72a3f8852d8028","subnet_id":"subnet-0bc5cd4cf5054059b","timeouts":null},"sensitive_values":{},"depends_on":["module.dev_vpc.module.vpc.aws_route_table.private","module.dev_vpc.module.vpc.aws_subnet.private_subnet","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0f337c8f1cd26b10a","route_table_id":"rtb-037ee04ee10c1710f","subnet_id":"subnet-0f0a7129fb658f9ad","timeouts":null},"sensitive_values":{},"depends_on":["module.dev_vpc.module.vpc.aws_route_table.public","module.dev_vpc.module.vpc.aws_subnet.public_subnet","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-02985b94ee4a73439","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-02985b94ee4a73439","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"dev-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"dev-default-sg"},"tags_all":{"Environment":"dev","Name":"dev-default-sg"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_subnet.private_subnet[0]","mode":"managed","type":"aws_subnet","name":"private_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0bc5cd4cf5054059b","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0bc5cd4cf5054059b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"tags_all":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_subnet.public_subnet[0]","mode":"managed","type":"aws_subnet","name":"public_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0f0a7129fb658f9ad","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0f0a7129fb658f9ad","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"dev","Filter":"public_subnet","Name":"dev-us-east-1a-public-subnet"},"tags_all":{"Environment":"dev","Filter":"public_subnet","Name":"dev-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-05c8af84715ad862a","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0391704db9e611349","default_route_table_id":"rtb-0df51899206ee6dd5","default_security_group_id":"sg-0c20b46066b700070","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-05c8af84715ad862a","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0df51899206ee6dd5","owner_id":"444171185861","tags":{"Environment":"dev","Name":"dev-vpc"},"tags_all":{"Environment":"dev","Name":"dev-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.dev_vpc.module.vpc","child_modules":[{"resources":[{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_ami.debian","mode":"data","type":"aws_ami","name":"debian","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-east-1::image/ami-0a9d5908c7201e91d","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-0edc6bf8eddd5b126","throughput":"0","volume_size":"8","volume_type":"gp2"},"no_device":"","virtual_name":""}],"boot_mode":"","creation_date":"2023-06-01T23:53:15.000Z","deprecation_time":"2025-06-01T23:53:15.000Z","description":"Debian 11 (20230601-1398)","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["debian-11-amd64-*"]},{"name":"virtualization-type","values":["hvm"]}],"hypervisor":"xen","id":"ami-0a9d5908c7201e91d","image_id":"ami-0a9d5908c7201e91d","image_location":"amazon/debian-11-amd64-20230601-1398","image_owner_alias":"amazon","image_type":"machine","imds_support":"","include_deprecated":false,"kernel_id":"","most_recent":true,"name":"debian-11-amd64-20230601-1398","name_regex":null,"owner_id":"136693071363","owners":["136693071363"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-0edc6bf8eddd5b126","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_default_tags.this","mode":"data","type":"aws_default_tags","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"aws","tags":{}},"sensitive_values":{"tags":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume[0]","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_role_assume","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1903849331","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.check_ssh_authorized_keys[0]","mode":"data","type":"aws_iam_policy_document","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2619827469","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ListUsers\",\n        \"iam:ListSSHPublicKeys\",\n        \"iam:ListGroups\",\n        \"iam:GetUser\",\n        \"iam:GetSSHPublicKey\",\n        \"iam:GetGroup\",\n        \"ec2:DescribeTags\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ec2:DescribeTags","iam:GetGroup","iam:GetSSHPublicKey","iam:GetUser","iam:ListGroups","iam:ListSSHPublicKeys","iam:ListUsers"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_subnet.lb_subnets[0]","mode":"data","type":"aws_subnet","name":"lb_subnets","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0bc5cd4cf5054059b","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","available_ip_address_count":249,"cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","default_for_az":false,"enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"filter":null,"id":"subnet-0bc5cd4cf5054059b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","state":"available","tags":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"tags":{}}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.cloudinit_config.config","mode":"data","type":"cloudinit_config","name":"config","provider_name":"registry.terraform.io/hashicorp/cloudinit","schema_version":0,"values":{"base64_encode":false,"boundary":"MIMEBOUNDARY","gzip":false,"id":"708589857","part":[{"content":"#!/bin/bash\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker.socket\n[Unit]\nDescription=SSH Socket for Per-Connection docker ssh container\n\n[Socket]\nListenStream=22\nAccept=true\n\n[Install]\nWantedBy=sockets.target\nEOF\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker@.service\n[Unit]\nDescription=SSH Per-Connection docker ssh container\n\n[Service]\nType=simple\nExecStart=/bin/sh -ec \"/usr/bin/docker run --rm -i --hostname dev-us-east-1-vpc-05c8af84715ad862a-\\$(echo %i | cut -d- -f1) -v /dev/log:/dev/log -v /opt/iam_helper:/opt:ro sshd_worker\"\nStandardInput=socket\nRuntimeMaxSec=43200\n\n[Install]\nWantedBy=multi-user.target\nEOF\n#set host sshd to run on port 2222 and restart service\nsed -i 's/#Port[[:blank:]]22/Port\\ 2222/'  /etc/ssh/sshd_config\nsystemctl restart sshd.service\nsystemctl enable sshd_worker.socket\nsystemctl start sshd_worker.socket\nsystemctl daemon-reload\n\n#set hostname to match dns\nhostnamectl set-hostname dev-us-east-1-vpc-05c8af84715ad862a-vpc-05c8af84715ad862a-bastion-host","content_type":"text/x-shellscript","filename":"module_systemd","merge_type":null},{"content":"#!/bin/bash","content_type":"text/x-shellscript","filename":"module_ssh_populate_assume_role","merge_type":"str(append)"},{"content":"#!/bin/bash\nmkdir -p /opt/iam_helper/\ncat \u003c\u003c 'EOF' \u003e /opt/iam_helper/ssh_populate.sh\n#!/bin/bash\n(\ncount=1\n/opt/iam-authorized-keys-command | while read line\ndo\n    username=$( echo $line | sed -e 's/^# //' -e 's/+/plus/' -e 's/=/equal/' -e 's/,/comma/' -e 's/@/at/' )\n    useradd -m -s /bin/bash -k /etc/skel $username\n    usermod -a -G sudo $username\n    echo $username\\ 'ALL=(ALL) NOPASSWD:ALL' \u003e /etc/sudoers.d/$count\n    chmod 0440 /etc/sudoers.d/$count\n    count=$(( $count + 1 ))\n    mkdir /home/$username/.ssh\n    read line2\n    echo $line2 \u003e\u003e /home/$username/.ssh/authorized_keys\n    chown -R $username:$username /home/$username/.ssh\n    chmod 700 /home/$username/.ssh\n    chmod 0600 /home/$username/.ssh/authorized_keys\ndone\n\n) \u003e /dev/null 2\u003e\u00261\n\n/usr/sbin/sshd -i\nEOF\nchmod 0700 /opt/iam_helper/ssh_populate.sh\n","content_type":"text/x-shellscript","filename":"module_ssh_populate_same_account","merge_type":"str(append)"},{"content":"#!/bin/bash\n#debian specific set up for docker https://docs.docker.com/install/linux/docker-ce/debian/#install-using-the-repository\napt-get update\nDEBIAN_FRONTEND=noninteractive apt-get install -y apt-transport-https ca-certificates curl gpg software-properties-common docker.io \nsystemctl start docker\nmkdir -p /opt/sshd_worker\n#Write out Dockerfile\ncat \u003c\u003c EOF \u003e /opt/sshd_worker/Dockerfile\nFROM ubuntu:22.04\n\nRUN apt-get update \u0026\u0026 DEBIAN_FRONTEND=noninteractive apt-get install -y openssh-server sudo awscli \u0026\u0026 echo '\\033[1;31mI am a one-time Ubuntu container with passwordless sudo. \\033[1;37;41mI will terminate after 12 hours or else on exit\\033[0m' \u003e /etc/motd \u0026\u0026 mkdir /var/run/sshd\n\nEXPOSE 22\nCMD [\"/opt/ssh_populate.sh\"]\nEOF\n#Build sshd service container\ncd /opt/sshd_worker\ndocker build -t sshd_worker .\n\n","content_type":"text/x-shellscript","filename":"module_docker_setup","merge_type":"str(append)"},{"content":"#!/bin/bash\nmkdir -p /opt/golang/src/iam-authorized-keys-command/\ncat \u003c\u003c EOF \u003e /opt/golang/src/iam-authorized-keys-command/main.go\n        // This code is taken from https://github.com/Fullscreen/iam-authorized-keys-command\n// Its responsibility is to query iam service for users that match criteria, and add them to ec2 instance on which this is run\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\t\"os/signal\"\n\t\"sync\"\n\t\"syscall\"\n\n\t\"github.com/aws/aws-sdk-go/aws\"\n\t\"github.com/aws/aws-sdk-go/aws/session\"\n\t\"github.com/aws/aws-sdk-go/service/iam\"\n)\n\nconst (\n\texitCodeOk    int = 0\n\texitCodeError int = 1\n)\n\nvar (\n\twg sync.WaitGroup\n\n\tiamGroup    = \"\"\n\tsshUserName = \"\"\n)\n\nfunc main() {\n\tsess, _ := session.NewSession()\n\tsvc := iam.New(sess)\n\n\t// check for valid user name\n\tif sshUserName != \"\" \u0026\u0026 (len(os.Args) \u003c 2 || os.Args[1] != sshUserName) {\n\t\tos.Exit(exitCodeOk)\n\t}\n\n\t// Handle SIGPIPE\n\t//\n\t// When sshd identifies a key in the stdout of this command, it closes\n\t// the pipe causing a series of EPIPE errors before a SIGPIPE is emitted\n\t// on this scripts pid. If the script exits with the standard 13 code, sshd\n\t// will disregard any matched keys. We catch the signal here and exit 0 to\n\t// fix that problem.\n\tc := make(chan os.Signal, 1)\n\tsignal.Notify(c, syscall.SIGPIPE)\n\tgo func() {\n\t\t_ = \u003c-c\n\t\tos.Exit(exitCodeOk)\n\t}()\n\n\tusers, err := users(svc, iamGroup)\n\tif err != nil {\n\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\tos.Exit(exitCodeError)\n\t}\n\n\tfor _, u := range users {\n\t\twg.Add(1)\n\t\tgo func(userName *string) {\n\t\t\tparams := \u0026iam.ListSSHPublicKeysInput{\n\t\t\t\tUserName: userName,\n\t\t\t}\n\t\t\tif resp, err := svc.ListSSHPublicKeys(params); err == nil {\n\t\t\t\tfor _, k := range resp.SSHPublicKeys {\n\t\t\t\t\tif *k.Status != \"Active\" {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tparams := \u0026iam.GetSSHPublicKeyInput{\n\t\t\t\t\t\tEncoding:       aws.String(\"SSH\"),\n\t\t\t\t\t\tSSHPublicKeyId: k.SSHPublicKeyId,\n\t\t\t\t\t\tUserName:       userName,\n\t\t\t\t\t}\n\t\t\t\t\tresp, err := svc.GetSSHPublicKey(params)\n\t\t\t\t\tif err != nil {\n\t\t\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t\t\t}\n\t\t\t\t\tfmt.Printf(\"# %s\\n\", *userName)\n\t\t\t\t\tfmt.Println(*resp.SSHPublicKey.SSHPublicKeyBody)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t}\n\t\t\twg.Done()\n\t\t}(u.UserName)\n\t}\n\twg.Wait()\n}\n\n// get all IAM users, or just those that are part of the defined group\nfunc users(svc *iam.IAM, iamGroup string) ([]*iam.User, error) {\n\tif iamGroup != \"\" {\n\t\tparams := \u0026iam.GetGroupInput{\n\t\t\tGroupName: aws.String(iamGroup),\n\t\t\tMaxItems:  aws.Int64(1000),\n\t\t}\n\t\tresp, err := svc.GetGroup(params)\n\t\treturn resp.Users, err\n\t}\n\tparams := \u0026iam.ListUsersInput{\n\t\tMaxItems: aws.Int64(1000),\n\t}\n\tresp, err := svc.ListUsers(params)\n\treturn resp.Users, err\n}\n\nEOF\nDEBIAN_FRONTEND=noninteractive\nsudo apt-get install -y golang\n\nexport GOPATH=\"/root/go\"\nexport GOCACHE=\"/root/.cache/go-build\"\nexport GOENV=\"/root/.config/go/env\"\n\ncd /opt/golang/src/iam-authorized-keys-command\n\ngo mod init iam-authorized-keys-command\ngo mod tidy\n\n/usr/bin/go build -ldflags \"-X main.iamGroup=\" -o /opt/iam_helper/iam-authorized-keys-command ./main.go\n","content_type":"text/x-shellscript","filename":"module_iam-authorized-keys-command","merge_type":"str(append)"},{"content":"#!/bin/bash","content_type":"text/x-shellscript","filename":"extra_user_data","merge_type":"str(append)"}],"rendered":"Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_systemd\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker.socket\n[Unit]\nDescription=SSH Socket for Per-Connection docker ssh container\n\n[Socket]\nListenStream=22\nAccept=true\n\n[Install]\nWantedBy=sockets.target\nEOF\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker@.service\n[Unit]\nDescription=SSH Per-Connection docker ssh container\n\n[Service]\nType=simple\nExecStart=/bin/sh -ec \"/usr/bin/docker run --rm -i --hostname dev-us-east-1-vpc-05c8af84715ad862a-\\$(echo %i | cut -d- -f1) -v /dev/log:/dev/log -v /opt/iam_helper:/opt:ro sshd_worker\"\nStandardInput=socket\nRuntimeMaxSec=43200\n\n[Install]\nWantedBy=multi-user.target\nEOF\n#set host sshd to run on port 2222 and restart service\nsed -i 's/#Port[[:blank:]]22/Port\\ 2222/'  /etc/ssh/sshd_config\nsystemctl restart sshd.service\nsystemctl enable sshd_worker.socket\nsystemctl start sshd_worker.socket\nsystemctl daemon-reload\n\n#set hostname to match dns\nhostnamectl set-hostname dev-us-east-1-vpc-05c8af84715ad862a-vpc-05c8af84715ad862a-bastion-host\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_ssh_populate_assume_role\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_ssh_populate_same_account\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\nmkdir -p /opt/iam_helper/\ncat \u003c\u003c 'EOF' \u003e /opt/iam_helper/ssh_populate.sh\n#!/bin/bash\n(\ncount=1\n/opt/iam-authorized-keys-command | while read line\ndo\n    username=$( echo $line | sed -e 's/^# //' -e 's/+/plus/' -e 's/=/equal/' -e 's/,/comma/' -e 's/@/at/' )\n    useradd -m -s /bin/bash -k /etc/skel $username\n    usermod -a -G sudo $username\n    echo $username\\ 'ALL=(ALL) NOPASSWD:ALL' \u003e /etc/sudoers.d/$count\n    chmod 0440 /etc/sudoers.d/$count\n    count=$(( $count + 1 ))\n    mkdir /home/$username/.ssh\n    read line2\n    echo $line2 \u003e\u003e /home/$username/.ssh/authorized_keys\n    chown -R $username:$username /home/$username/.ssh\n    chmod 700 /home/$username/.ssh\n    chmod 0600 /home/$username/.ssh/authorized_keys\ndone\n\n) \u003e /dev/null 2\u003e\u00261\n\n/usr/sbin/sshd -i\nEOF\nchmod 0700 /opt/iam_helper/ssh_populate.sh\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_docker_setup\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\n#debian specific set up for docker https://docs.docker.com/install/linux/docker-ce/debian/#install-using-the-repository\napt-get update\nDEBIAN_FRONTEND=noninteractive apt-get install -y apt-transport-https ca-certificates curl gpg software-properties-common docker.io \nsystemctl start docker\nmkdir -p /opt/sshd_worker\n#Write out Dockerfile\ncat \u003c\u003c EOF \u003e /opt/sshd_worker/Dockerfile\nFROM ubuntu:22.04\n\nRUN apt-get update \u0026\u0026 DEBIAN_FRONTEND=noninteractive apt-get install -y openssh-server sudo awscli \u0026\u0026 echo '\\033[1;31mI am a one-time Ubuntu container with passwordless sudo. \\033[1;37;41mI will terminate after 12 hours or else on exit\\033[0m' \u003e /etc/motd \u0026\u0026 mkdir /var/run/sshd\n\nEXPOSE 22\nCMD [\"/opt/ssh_populate.sh\"]\nEOF\n#Build sshd service container\ncd /opt/sshd_worker\ndocker build -t sshd_worker .\n\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_iam-authorized-keys-command\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\nmkdir -p /opt/golang/src/iam-authorized-keys-command/\ncat \u003c\u003c EOF \u003e /opt/golang/src/iam-authorized-keys-command/main.go\n        // This code is taken from https://github.com/Fullscreen/iam-authorized-keys-command\n// Its responsibility is to query iam service for users that match criteria, and add them to ec2 instance on which this is run\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\t\"os/signal\"\n\t\"sync\"\n\t\"syscall\"\n\n\t\"github.com/aws/aws-sdk-go/aws\"\n\t\"github.com/aws/aws-sdk-go/aws/session\"\n\t\"github.com/aws/aws-sdk-go/service/iam\"\n)\n\nconst (\n\texitCodeOk    int = 0\n\texitCodeError int = 1\n)\n\nvar (\n\twg sync.WaitGroup\n\n\tiamGroup    = \"\"\n\tsshUserName = \"\"\n)\n\nfunc main() {\n\tsess, _ := session.NewSession()\n\tsvc := iam.New(sess)\n\n\t// check for valid user name\n\tif sshUserName != \"\" \u0026\u0026 (len(os.Args) \u003c 2 || os.Args[1] != sshUserName) {\n\t\tos.Exit(exitCodeOk)\n\t}\n\n\t// Handle SIGPIPE\n\t//\n\t// When sshd identifies a key in the stdout of this command, it closes\n\t// the pipe causing a series of EPIPE errors before a SIGPIPE is emitted\n\t// on this scripts pid. If the script exits with the standard 13 code, sshd\n\t// will disregard any matched keys. We catch the signal here and exit 0 to\n\t// fix that problem.\n\tc := make(chan os.Signal, 1)\n\tsignal.Notify(c, syscall.SIGPIPE)\n\tgo func() {\n\t\t_ = \u003c-c\n\t\tos.Exit(exitCodeOk)\n\t}()\n\n\tusers, err := users(svc, iamGroup)\n\tif err != nil {\n\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\tos.Exit(exitCodeError)\n\t}\n\n\tfor _, u := range users {\n\t\twg.Add(1)\n\t\tgo func(userName *string) {\n\t\t\tparams := \u0026iam.ListSSHPublicKeysInput{\n\t\t\t\tUserName: userName,\n\t\t\t}\n\t\t\tif resp, err := svc.ListSSHPublicKeys(params); err == nil {\n\t\t\t\tfor _, k := range resp.SSHPublicKeys {\n\t\t\t\t\tif *k.Status != \"Active\" {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tparams := \u0026iam.GetSSHPublicKeyInput{\n\t\t\t\t\t\tEncoding:       aws.String(\"SSH\"),\n\t\t\t\t\t\tSSHPublicKeyId: k.SSHPublicKeyId,\n\t\t\t\t\t\tUserName:       userName,\n\t\t\t\t\t}\n\t\t\t\t\tresp, err := svc.GetSSHPublicKey(params)\n\t\t\t\t\tif err != nil {\n\t\t\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t\t\t}\n\t\t\t\t\tfmt.Printf(\"# %s\\n\", *userName)\n\t\t\t\t\tfmt.Println(*resp.SSHPublicKey.SSHPublicKeyBody)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t}\n\t\t\twg.Done()\n\t\t}(u.UserName)\n\t}\n\twg.Wait()\n}\n\n// get all IAM users, or just those that are part of the defined group\nfunc users(svc *iam.IAM, iamGroup string) ([]*iam.User, error) {\n\tif iamGroup != \"\" {\n\t\tparams := \u0026iam.GetGroupInput{\n\t\t\tGroupName: aws.String(iamGroup),\n\t\t\tMaxItems:  aws.Int64(1000),\n\t\t}\n\t\tresp, err := svc.GetGroup(params)\n\t\treturn resp.Users, err\n\t}\n\tparams := \u0026iam.ListUsersInput{\n\t\tMaxItems: aws.Int64(1000),\n\t}\n\tresp, err := svc.ListUsers(params)\n\treturn resp.Users, err\n}\n\nEOF\nDEBIAN_FRONTEND=noninteractive\nsudo apt-get install -y golang\n\nexport GOPATH=\"/root/go\"\nexport GOCACHE=\"/root/.cache/go-build\"\nexport GOENV=\"/root/.config/go/env\"\n\ncd /opt/golang/src/iam-authorized-keys-command\n\ngo mod init iam-authorized-keys-command\ngo mod tidy\n\n/usr/bin/go build -ldflags \"-X main.iamGroup=\" -o /opt/iam_helper/iam-authorized-keys-command ./main.go\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"extra_user_data\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\r\n--MIMEBOUNDARY--\r\n"},"sensitive_values":{"part":[{},{},{},{},{},{}]}},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_autoscaling_group.bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:a3d29af1-e3e5-4fce-98e8-2c29b70f1683:autoScalingGroupName/bastion-service-asg2023062813162640220000000f","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162640220000000f","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-0fb9e9c81c048752f","launch_template_name":"bastion-service-host-dev2023062813162582530000000b","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162640220000000f","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-0bc5cd4cf5054059b"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]},"depends_on":["module.dev_vpc.module.vpc.aws_subnet.private_subnet","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_assume_role_profile","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_assume_role","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-host","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_ami.debian","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_default_tags.this","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_assume_role","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.cloudinit_config.config"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile[0]","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:instance-profile/dev-us-east-1-vpc-05c8af84715ad862a_bastion","create_date":"2023-06-28T13:16:24Z","id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","role":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3CRYTHZF4JA"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","description":"","id":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3CRNOB26J7V","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.check_ssh_authorized_keys","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role[0]","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:role/dev-us-east-1-vpc-05c8af84715ad862a_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:22Z","description":"","force_detach_policies":false,"id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion"],"max_session_duration":3600,"name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3C2ZPASLCDE"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role_policy_attachment.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"dev-us-east-1-vpc-05c8af84715ad862a_bastion-20230628131624449900000005","policy_arn":"arn:aws:iam::444171185861:policy/dev-us-east-1-vpc-05c8af84715ad862a_bastion","role":"dev-us-east-1-vpc-05c8af84715ad862a_bastion"},"sensitive_values":{},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.check_ssh_authorized_keys","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-0fb9e9c81c048752f","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"dev-us-east-1-vpc-05c8af84715ad862a_bastion"}],"id":"lt-0fb9e9c81c048752f","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-dev2023062813162582530000000b","name_prefix":"bastion-service-host-dev","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-00255059020328621"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIGRldi11cy1lYXN0LTEtdnBjLTA1YzhhZjg0NzE1YWQ4NjJhLVwkKGVjaG8gJWkgfCBjdXQgLWQtIC1mMSkgLXYgL2Rldi9sb2c6L2Rldi9sb2cgLXYgL29wdC9pYW1faGVscGVyOi9vcHQ6cm8gc3NoZF93b3JrZXIiClN0YW5kYXJkSW5wdXQ9c29ja2V0ClJ1bnRpbWVNYXhTZWM9NDMyMDAKCltJbnN0YWxsXQpXYW50ZWRCeT1tdWx0aS11c2VyLnRhcmdldApFT0YKI3NldCBob3N0IHNzaGQgdG8gcnVuIG9uIHBvcnQgMjIyMiBn9nmQgcmVzdGF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W4gc3BlY2lmaWMgc2V0IHVwIGZvciBkb2NrZXIgaHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vaW5zdGFsbC9saW51eC9kb2NrZXItY2UvZGViaWFuLyNpbnN0YWxsLXVzaW5nLXRoZS1yZXBvc2l0b3J5CmFwdC1nZXQgdXBkYXRlCkRFQklBTl9GUk9OVEVORD1ub25pbnRlcmFjdGl2ZSBhcHQtZ2V0IGluc3Rn9nGwgLXkgYXB0LXRyYW5zcG9ydC1odHRwcyBjYS1jZXJ0aWZpY2F0ZXMgY3VybCBncGcgc29mdHdhcmUtcHJvcGVydGllcy1jb21tb24gZG9ja2VyLmlvIApzeXN0ZW1jdGwgc3RhcnQgZG9ja2VyCm1rZGlyIC1wIC9vcHQvc3NoZF93b3JrZXIKI1dyaXRlIG91dCBEb2NrZXJmaWxlCmNhdCA8PCBFT0YgPiAvb3B0L3NzaGRfd29ya2VyL0RvY2tlcmZpbGUKRlJPTSB1YnVudHU6MjIuMDQKClJVTiBhcHQtZ2V0IHVwZGF0ZSAmJiBERUJJQU5fRlJPTlRFTkQ9bm9uaW50ZXJhY3RpdmUgYXB0LWdldCBpbnN0YWxsIC15IG9wZW5zc2gtc2VydmVyIHN1ZG8gYXdzY2xpICYmIGVjaG8gJ1wwMzNbMTszMW1JIGFtIGEgb25lLXRpbWUgVWJ1bnR1IGNvbnRhaW5lciB3aXRoIHBhc3N3b3JkbGVzcyBzdWRvLiBcMDMzWzE7Mzc7NDFtSSB3aWxsIHRlcm1pbmF0ZSBhZnRlciAxMiBob3VycyBvciBlbHNlIG9uIGV4aXRcMDMzWzBtJyA+IC9ldGMvbW90ZCAmJiBta2RpciAvdmFyL3J1bi9zc2hkCgpFWFBPU0UgMjIKQ01EIFsiL29wdC9zc2hfcG9wdWxhdGUuc2giXQpFT0YKI0J1aWxkIHNzaGQgc2VydmljZSBjb250YWluZXIKY2QgL29wdC9zc2hkX3dvcmtlcgpkb2NrZXIgYnVpbGQgLXQgc3NoZF93b3JrZXIgLgoKDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5n9nWU9Im1vZHVsZV9pYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQiDQpDb2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","vpc_security_group_ids":[]},"sensitive_values":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_assume_role_profile","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_assume_role","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_ami.debian","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_assume_role","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.cloudinit_config.config"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","arn_suffix":"net/bastion-service-dev/e4a0162397dd1821","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-dev-e4a0162397dd1821.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-dev","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0bc5cd4cf5054059b"}],"subnets":["subnet-0bc5cd4cf5054059b"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"sensitive_values":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_subnet.private_subnet","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_listener.bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-dev/e4a0162397dd1821/86776ed103a4416d","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-dev/e4a0162397dd1821/86776ed103a4416d","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-dev/e4a0162397dd1821","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_subnet.private_subnet","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","arn_suffix":"targetgroup/bastion-service-dev-22/9e80710297982ed3","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-dev-22/9e80710297982ed3","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-dev-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-00255059020328621","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-00255059020328621","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"dev-bastion-service20230628131622632700000001","name_prefix":"dev-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.bastion_host_out[0]","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-2474211610","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-084436aa17cbf31d6","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.lb_healthcheck_in","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-995351726","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-00ae6435961d2ede0","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]},"depends_on":["module.dev_vpc.module.vpc.aws_subnet.private_subnet","module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_subnet.lb_subnets"]},{"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.service_ssh_in[0]","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-1665769564","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-00255059020328621","security_group_rule_id":"sgr-04bf666941799a72f","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]},"depends_on":["module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service"]}],"address":"module.dev_vpc.module.vpc.module.ssh-bastion-service"}]}]},{"address":"module.liferay","child_modules":[{"resources":[{"address":"module.liferay.module.liferay.data.aws_subnet.target_private","mode":"data","type":"aws_subnet","name":"target_private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0bc5cd4cf5054059b","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","available_ip_address_count":249,"cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","default_for_az":false,"enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"filter":[{"name":"tag:Filter","values":["private_subnet"]}],"id":"subnet-0bc5cd4cf5054059b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","state":"available","tags":{"Environment":"dev","Filter":"private_subnet","Name":"dev-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"filter":[{"values":[false]}],"tags":{}}},{"address":"module.liferay.module.liferay.data.aws_subnet.target_public","mode":"data","type":"aws_subnet","name":"target_public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0f0a7129fb658f9ad","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","available_ip_address_count":250,"cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","default_for_az":false,"enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"filter":[{"name":"tag:Filter","values":["public_subnet"]}],"id":"subnet-0f0a7129fb658f9ad","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","state":"available","tags":{"Environment":"dev","Filter":"public_subnet","Name":"dev-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-05c8af84715ad862a"},"sensitive_values":{"filter":[{"values":[false]}],"tags":{}}},{"address":"module.liferay.module.liferay.data.aws_subnets.selected_subnets","mode":"data","type":"aws_subnets","name":"selected_subnets","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[{"name":"vpc-id","values":["vpc-05c8af84715ad862a"]}],"id":"us-east-1","ids":["subnet-0f0a7129fb658f9ad","subnet-0bc5cd4cf5054059b"],"tags":null,"timeouts":null},"sensitive_values":{"filter":[{"values":[false]}],"ids":[false,false]}},{"address":"module.liferay.module.liferay.data.aws_vpc.selected_vpc","mode":"data","type":"aws_vpc","name":"selected_vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-05c8af84715ad862a","cidr_block":"10.0.0.0/16","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-019feb574d02784a9","cidr_block":"10.0.0.0/16","state":"associated"}],"default":false,"dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"filter":[{"name":"tag:Name","values":["dev-vpc"]}],"id":"vpc-05c8af84715ad862a","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-0df51899206ee6dd5","owner_id":"444171185861","state":null,"tags":{"Environment":"dev","Name":"dev-vpc"},"timeouts":null},"sensitive_values":{"cidr_block_associations":[{}],"filter":[{"values":[false]}],"tags":{}}}],"address":"module.liferay.module.liferay"}]},{"address":"module.prod_vpc","child_modules":[{"resources":[{"address":"module.prod_vpc.module.vpc.data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["us-east-1"],"id":"us-east-1","names":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"state":null,"timeouts":null,"zone_ids":["use1-az4","use1-az6","use1-az1","use1-az2","use1-az3","use1-az5"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false,false,false],"zone_ids":[false,false,false,false,false,false]}},{"address":"module.prod_vpc.module.vpc.aws_eip.n9n_nat_eip","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0935fe93ca6824071","associate_with_private_ip":null,"association_id":"eipassoc-0dce71659e07a526d","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0935fe93ca6824071","instance":"","network_border_group":"us-east-1","network_interface":"eni-0c20bf97e4196b2c1","private_dns":"ip-10-0-1-177.ec2.internal","private_ip":"10.0.1.177","public_dns":"ec2-34-196-65-169.compute-1.amazonaws.com","public_ip":"34.196.65.169","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_internet_gateway.n9n_ig","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-09629a267416a4576","id":"igw-09629a267416a4576","owner_id":"444171185861","tags":{"Environment":"prod","Name":"prod-igw"},"tags_all":{"Environment":"prod","Name":"prod-igw"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-0935fe93ca6824071","association_id":"eipassoc-0dce71659e07a526d","connectivity_type":"public","id":"nat-0c6abdd1c85bad328","network_interface_id":"eni-0c20bf97e4196b2c1","private_ip":"10.0.1.177","public_ip":"34.196.65.169","subnet_id":"subnet-0e7b4ddafc1c90395","tags":{"Environment":"prod","Name":"prod-nat"},"tags_all":{"Environment":"prod","Name":"prod-nat"}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_eip.n9n_nat_eip","module.prod_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.prod_vpc.module.vpc.aws_subnet.public_subnet","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-0b94111dcfaca0bb71080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0c6abdd1c85bad328","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0b94111dcfaca0bb7","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{},"depends_on":["module.prod_vpc.module.vpc.aws_eip.n9n_nat_eip","module.prod_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.prod_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","module.prod_vpc.module.vpc.aws_route_table.private","module.prod_vpc.module.vpc.aws_subnet.public_subnet","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-09629a267416a4576","id":"r-rtb-0b5e0bb2c637c1ac61080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0b5e0bb2c637c1ac6","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{},"depends_on":["module.prod_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.prod_vpc.module.vpc.aws_route_table.public","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-0b94111dcfaca0bb7","id":"rtb-0b94111dcfaca0bb7","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0c6abdd1c85bad328","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"prod","Name":"prod-private-route-table"},"tags_all":{"Environment":"prod","Name":"prod-private-route-table"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-0b5e0bb2c637c1ac6","id":"rtb-0b5e0bb2c637c1ac6","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-09629a267416a4576","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"prod","Name":"prod-public-route-table"},"tags_all":{"Environment":"prod","Name":"prod-public-route-table"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-027e74f72b45b8083","route_table_id":"rtb-0b94111dcfaca0bb7","subnet_id":"subnet-06a5f250d4c8c237d","timeouts":null},"sensitive_values":{},"depends_on":["module.prod_vpc.module.vpc.aws_route_table.private","module.prod_vpc.module.vpc.aws_subnet.private_subnet","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0fa220940c15d6cf2","route_table_id":"rtb-0b5e0bb2c637c1ac6","subnet_id":"subnet-0e7b4ddafc1c90395","timeouts":null},"sensitive_values":{},"depends_on":["module.prod_vpc.module.vpc.aws_route_table.public","module.prod_vpc.module.vpc.aws_subnet.public_subnet","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-0b3f75848e49cb596","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-0b3f75848e49cb596","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"prod-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"prod","Name":"prod-default-sg"},"tags_all":{"Environment":"prod","Name":"prod-default-sg"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_subnet.private_subnet[0]","mode":"managed","type":"aws_subnet","name":"private_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-06a5f250d4c8c237d","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-06a5f250d4c8c237d","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"prod","Filter":"private_subnet","Name":"prod-us-east-1a-private-subnet"},"tags_all":{"Environment":"prod","Filter":"private_subnet","Name":"prod-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_subnet.public_subnet[0]","mode":"managed","type":"aws_subnet","name":"public_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0e7b4ddafc1c90395","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e7b4ddafc1c90395","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"prod","Filter":"public_subnet","Name":"prod-us-east-1a-public-subnet"},"tags_all":{"Environment":"prod","Filter":"public_subnet","Name":"prod-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-089a9617aef708250","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-01c2d8b88ddde2219","default_route_table_id":"rtb-00a8274bc4a51be49","default_security_group_id":"sg-0d6873303b394c654","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-089a9617aef708250","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-00a8274bc4a51be49","owner_id":"444171185861","tags":{"Environment":"prod","Name":"prod-vpc"},"tags_all":{"Environment":"prod","Name":"prod-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.prod_vpc.module.vpc","child_modules":[{"resources":[{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_ami.debian","mode":"data","type":"aws_ami","name":"debian","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-east-1::image/ami-0a9d5908c7201e91d","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-0edc6bf8eddd5b126","throughput":"0","volume_size":"8","volume_type":"gp2"},"no_device":"","virtual_name":""}],"boot_mode":"","creation_date":"2023-06-01T23:53:15.000Z","deprecation_time":"2025-06-01T23:53:15.000Z","description":"Debian 11 (20230601-1398)","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["debian-11-amd64-*"]},{"name":"virtualization-type","values":["hvm"]}],"hypervisor":"xen","id":"ami-0a9d5908c7201e91d","image_id":"ami-0a9d5908c7201e91d","image_location":"amazon/debian-11-amd64-20230601-1398","image_owner_alias":"amazon","image_type":"machine","imds_support":"","include_deprecated":false,"kernel_id":"","most_recent":true,"name":"debian-11-amd64-20230601-1398","name_regex":null,"owner_id":"136693071363","owners":["136693071363"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-0edc6bf8eddd5b126","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_default_tags.this","mode":"data","type":"aws_default_tags","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"aws","tags":{}},"sensitive_values":{"tags":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume[0]","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_role_assume","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1903849331","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.check_ssh_authorized_keys[0]","mode":"data","type":"aws_iam_policy_document","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2619827469","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ListUsers\",\n        \"iam:ListSSHPublicKeys\",\n        \"iam:ListGroups\",\n        \"iam:GetUser\",\n        \"iam:GetSSHPublicKey\",\n        \"iam:GetGroup\",\n        \"ec2:DescribeTags\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ec2:DescribeTags","iam:GetGroup","iam:GetSSHPublicKey","iam:GetUser","iam:ListGroups","iam:ListSSHPublicKeys","iam:ListUsers"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_subnet.lb_subnets[0]","mode":"data","type":"aws_subnet","name":"lb_subnets","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-06a5f250d4c8c237d","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","available_ip_address_count":249,"cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","default_for_az":false,"enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"filter":null,"id":"subnet-06a5f250d4c8c237d","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","state":"available","tags":{"Environment":"prod","Filter":"private_subnet","Name":"prod-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"tags":{}}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.cloudinit_config.config","mode":"data","type":"cloudinit_config","name":"config","provider_name":"registry.terraform.io/hashicorp/cloudinit","schema_version":0,"values":{"base64_encode":false,"boundary":"MIMEBOUNDARY","gzip":false,"id":"1565762870","part":[{"content":"#!/bin/bash\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker.socket\n[Unit]\nDescription=SSH Socket for Per-Connection docker ssh container\n\n[Socket]\nListenStream=22\nAccept=true\n\n[Install]\nWantedBy=sockets.target\nEOF\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker@.service\n[Unit]\nDescription=SSH Per-Connection docker ssh container\n\n[Service]\nType=simple\nExecStart=/bin/sh -ec \"/usr/bin/docker run --rm -i --hostname prod-us-east-1-vpc-089a9617aef708250-\\$(echo %i | cut -d- -f1) -v /dev/log:/dev/log -v /opt/iam_helper:/opt:ro sshd_worker\"\nStandardInput=socket\nRuntimeMaxSec=43200\n\n[Install]\nWantedBy=multi-user.target\nEOF\n#set host sshd to run on port 2222 and restart service\nsed -i 's/#Port[[:blank:]]22/Port\\ 2222/'  /etc/ssh/sshd_config\nsystemctl restart sshd.service\nsystemctl enable sshd_worker.socket\nsystemctl start sshd_worker.socket\nsystemctl daemon-reload\n\n#set hostname to match dns\nhostnamectl set-hostname prod-us-east-1-vpc-089a9617aef708250-vpc-089a9617aef708250-bastion-host","content_type":"text/x-shellscript","filename":"module_systemd","merge_type":null},{"content":"#!/bin/bash","content_type":"text/x-shellscript","filename":"module_ssh_populate_assume_role","merge_type":"str(append)"},{"content":"#!/bin/bash\nmkdir -p /opt/iam_helper/\ncat \u003c\u003c 'EOF' \u003e /opt/iam_helper/ssh_populate.sh\n#!/bin/bash\n(\ncount=1\n/opt/iam-authorized-keys-command | while read line\ndo\n    username=$( echo $line | sed -e 's/^# //' -e 's/+/plus/' -e 's/=/equal/' -e 's/,/comma/' -e 's/@/at/' )\n    useradd -m -s /bin/bash -k /etc/skel $username\n    usermod -a -G sudo $username\n    echo $username\\ 'ALL=(ALL) NOPASSWD:ALL' \u003e /etc/sudoers.d/$count\n    chmod 0440 /etc/sudoers.d/$count\n    count=$(( $count + 1 ))\n    mkdir /home/$username/.ssh\n    read line2\n    echo $line2 \u003e\u003e /home/$username/.ssh/authorized_keys\n    chown -R $username:$username /home/$username/.ssh\n    chmod 700 /home/$username/.ssh\n    chmod 0600 /home/$username/.ssh/authorized_keys\ndone\n\n) \u003e /dev/null 2\u003e\u00261\n\n/usr/sbin/sshd -i\nEOF\nchmod 0700 /opt/iam_helper/ssh_populate.sh\n","content_type":"text/x-shellscript","filename":"module_ssh_populate_same_account","merge_type":"str(append)"},{"content":"#!/bin/bash\n#debian specific set up for docker https://docs.docker.com/install/linux/docker-ce/debian/#install-using-the-repository\napt-get update\nDEBIAN_FRONTEND=noninteractive apt-get install -y apt-transport-https ca-certificates curl gpg software-properties-common docker.io \nsystemctl start docker\nmkdir -p /opt/sshd_worker\n#Write out Dockerfile\ncat \u003c\u003c EOF \u003e /opt/sshd_worker/Dockerfile\nFROM ubuntu:22.04\n\nRUN apt-get update \u0026\u0026 DEBIAN_FRONTEND=noninteractive apt-get install -y openssh-server sudo awscli \u0026\u0026 echo '\\033[1;31mI am a one-time Ubuntu container with passwordless sudo. \\033[1;37;41mI will terminate after 12 hours or else on exit\\033[0m' \u003e /etc/motd \u0026\u0026 mkdir /var/run/sshd\n\nEXPOSE 22\nCMD [\"/opt/ssh_populate.sh\"]\nEOF\n#Build sshd service container\ncd /opt/sshd_worker\ndocker build -t sshd_worker .\n\n","content_type":"text/x-shellscript","filename":"module_docker_setup","merge_type":"str(append)"},{"content":"#!/bin/bash\nmkdir -p /opt/golang/src/iam-authorized-keys-command/\ncat \u003c\u003c EOF \u003e /opt/golang/src/iam-authorized-keys-command/main.go\n        // This code is taken from https://github.com/Fullscreen/iam-authorized-keys-command\n// Its responsibility is to query iam service for users that match criteria, and add them to ec2 instance on which this is run\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\t\"os/signal\"\n\t\"sync\"\n\t\"syscall\"\n\n\t\"github.com/aws/aws-sdk-go/aws\"\n\t\"github.com/aws/aws-sdk-go/aws/session\"\n\t\"github.com/aws/aws-sdk-go/service/iam\"\n)\n\nconst (\n\texitCodeOk    int = 0\n\texitCodeError int = 1\n)\n\nvar (\n\twg sync.WaitGroup\n\n\tiamGroup    = \"\"\n\tsshUserName = \"\"\n)\n\nfunc main() {\n\tsess, _ := session.NewSession()\n\tsvc := iam.New(sess)\n\n\t// check for valid user name\n\tif sshUserName != \"\" \u0026\u0026 (len(os.Args) \u003c 2 || os.Args[1] != sshUserName) {\n\t\tos.Exit(exitCodeOk)\n\t}\n\n\t// Handle SIGPIPE\n\t//\n\t// When sshd identifies a key in the stdout of this command, it closes\n\t// the pipe causing a series of EPIPE errors before a SIGPIPE is emitted\n\t// on this scripts pid. If the script exits with the standard 13 code, sshd\n\t// will disregard any matched keys. We catch the signal here and exit 0 to\n\t// fix that problem.\n\tc := make(chan os.Signal, 1)\n\tsignal.Notify(c, syscall.SIGPIPE)\n\tgo func() {\n\t\t_ = \u003c-c\n\t\tos.Exit(exitCodeOk)\n\t}()\n\n\tusers, err := users(svc, iamGroup)\n\tif err != nil {\n\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\tos.Exit(exitCodeError)\n\t}\n\n\tfor _, u := range users {\n\t\twg.Add(1)\n\t\tgo func(userName *string) {\n\t\t\tparams := \u0026iam.ListSSHPublicKeysInput{\n\t\t\t\tUserName: userName,\n\t\t\t}\n\t\t\tif resp, err := svc.ListSSHPublicKeys(params); err == nil {\n\t\t\t\tfor _, k := range resp.SSHPublicKeys {\n\t\t\t\t\tif *k.Status != \"Active\" {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tparams := \u0026iam.GetSSHPublicKeyInput{\n\t\t\t\t\t\tEncoding:       aws.String(\"SSH\"),\n\t\t\t\t\t\tSSHPublicKeyId: k.SSHPublicKeyId,\n\t\t\t\t\t\tUserName:       userName,\n\t\t\t\t\t}\n\t\t\t\t\tresp, err := svc.GetSSHPublicKey(params)\n\t\t\t\t\tif err != nil {\n\t\t\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t\t\t}\n\t\t\t\t\tfmt.Printf(\"# %s\\n\", *userName)\n\t\t\t\t\tfmt.Println(*resp.SSHPublicKey.SSHPublicKeyBody)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t}\n\t\t\twg.Done()\n\t\t}(u.UserName)\n\t}\n\twg.Wait()\n}\n\n// get all IAM users, or just those that are part of the defined group\nfunc users(svc *iam.IAM, iamGroup string) ([]*iam.User, error) {\n\tif iamGroup != \"\" {\n\t\tparams := \u0026iam.GetGroupInput{\n\t\t\tGroupName: aws.String(iamGroup),\n\t\t\tMaxItems:  aws.Int64(1000),\n\t\t}\n\t\tresp, err := svc.GetGroup(params)\n\t\treturn resp.Users, err\n\t}\n\tparams := \u0026iam.ListUsersInput{\n\t\tMaxItems: aws.Int64(1000),\n\t}\n\tresp, err := svc.ListUsers(params)\n\treturn resp.Users, err\n}\n\nEOF\nDEBIAN_FRONTEND=noninteractive\nsudo apt-get install -y golang\n\nexport GOPATH=\"/root/go\"\nexport GOCACHE=\"/root/.cache/go-build\"\nexport GOENV=\"/root/.config/go/env\"\n\ncd /opt/golang/src/iam-authorized-keys-command\n\ngo mod init iam-authorized-keys-command\ngo mod tidy\n\n/usr/bin/go build -ldflags \"-X main.iamGroup=\" -o /opt/iam_helper/iam-authorized-keys-command ./main.go\n","content_type":"text/x-shellscript","filename":"module_iam-authorized-keys-command","merge_type":"str(append)"},{"content":"#!/bin/bash","content_type":"text/x-shellscript","filename":"extra_user_data","merge_type":"str(append)"}],"rendered":"Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_systemd\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker.socket\n[Unit]\nDescription=SSH Socket for Per-Connection docker ssh container\n\n[Socket]\nListenStream=22\nAccept=true\n\n[Install]\nWantedBy=sockets.target\nEOF\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker@.service\n[Unit]\nDescription=SSH Per-Connection docker ssh container\n\n[Service]\nType=simple\nExecStart=/bin/sh -ec \"/usr/bin/docker run --rm -i --hostname prod-us-east-1-vpc-089a9617aef708250-\\$(echo %i | cut -d- -f1) -v /dev/log:/dev/log -v /opt/iam_helper:/opt:ro sshd_worker\"\nStandardInput=socket\nRuntimeMaxSec=43200\n\n[Install]\nWantedBy=multi-user.target\nEOF\n#set host sshd to run on port 2222 and restart service\nsed -i 's/#Port[[:blank:]]22/Port\\ 2222/'  /etc/ssh/sshd_config\nsystemctl restart sshd.service\nsystemctl enable sshd_worker.socket\nsystemctl start sshd_worker.socket\nsystemctl daemon-reload\n\n#set hostname to match dns\nhostnamectl set-hostname prod-us-east-1-vpc-089a9617aef708250-vpc-089a9617aef708250-bastion-host\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_ssh_populate_assume_role\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_ssh_populate_same_account\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\nmkdir -p /opt/iam_helper/\ncat \u003c\u003c 'EOF' \u003e /opt/iam_helper/ssh_populate.sh\n#!/bin/bash\n(\ncount=1\n/opt/iam-authorized-keys-command | while read line\ndo\n    username=$( echo $line | sed -e 's/^# //' -e 's/+/plus/' -e 's/=/equal/' -e 's/,/comma/' -e 's/@/at/' )\n    useradd -m -s /bin/bash -k /etc/skel $username\n    usermod -a -G sudo $username\n    echo $username\\ 'ALL=(ALL) NOPASSWD:ALL' \u003e /etc/sudoers.d/$count\n    chmod 0440 /etc/sudoers.d/$count\n    count=$(( $count + 1 ))\n    mkdir /home/$username/.ssh\n    read line2\n    echo $line2 \u003e\u003e /home/$username/.ssh/authorized_keys\n    chown -R $username:$username /home/$username/.ssh\n    chmod 700 /home/$username/.ssh\n    chmod 0600 /home/$username/.ssh/authorized_keys\ndone\n\n) \u003e /dev/null 2\u003e\u00261\n\n/usr/sbin/sshd -i\nEOF\nchmod 0700 /opt/iam_helper/ssh_populate.sh\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_docker_setup\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\n#debian specific set up for docker https://docs.docker.com/install/linux/docker-ce/debian/#install-using-the-repository\napt-get update\nDEBIAN_FRONTEND=noninteractive apt-get install -y apt-transport-https ca-certificates curl gpg software-properties-common docker.io \nsystemctl start docker\nmkdir -p /opt/sshd_worker\n#Write out Dockerfile\ncat \u003c\u003c EOF \u003e /opt/sshd_worker/Dockerfile\nFROM ubuntu:22.04\n\nRUN apt-get update \u0026\u0026 DEBIAN_FRONTEND=noninteractive apt-get install -y openssh-server sudo awscli \u0026\u0026 echo '\\033[1;31mI am a one-time Ubuntu container with passwordless sudo. \\033[1;37;41mI will terminate after 12 hours or else on exit\\033[0m' \u003e /etc/motd \u0026\u0026 mkdir /var/run/sshd\n\nEXPOSE 22\nCMD [\"/opt/ssh_populate.sh\"]\nEOF\n#Build sshd service container\ncd /opt/sshd_worker\ndocker build -t sshd_worker .\n\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_iam-authorized-keys-command\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\nmkdir -p /opt/golang/src/iam-authorized-keys-command/\ncat \u003c\u003c EOF \u003e /opt/golang/src/iam-authorized-keys-command/main.go\n        // This code is taken from https://github.com/Fullscreen/iam-authorized-keys-command\n// Its responsibility is to query iam service for users that match criteria, and add them to ec2 instance on which this is run\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\t\"os/signal\"\n\t\"sync\"\n\t\"syscall\"\n\n\t\"github.com/aws/aws-sdk-go/aws\"\n\t\"github.com/aws/aws-sdk-go/aws/session\"\n\t\"github.com/aws/aws-sdk-go/service/iam\"\n)\n\nconst (\n\texitCodeOk    int = 0\n\texitCodeError int = 1\n)\n\nvar (\n\twg sync.WaitGroup\n\n\tiamGroup    = \"\"\n\tsshUserName = \"\"\n)\n\nfunc main() {\n\tsess, _ := session.NewSession()\n\tsvc := iam.New(sess)\n\n\t// check for valid user name\n\tif sshUserName != \"\" \u0026\u0026 (len(os.Args) \u003c 2 || os.Args[1] != sshUserName) {\n\t\tos.Exit(exitCodeOk)\n\t}\n\n\t// Handle SIGPIPE\n\t//\n\t// When sshd identifies a key in the stdout of this command, it closes\n\t// the pipe causing a series of EPIPE errors before a SIGPIPE is emitted\n\t// on this scripts pid. If the script exits with the standard 13 code, sshd\n\t// will disregard any matched keys. We catch the signal here and exit 0 to\n\t// fix that problem.\n\tc := make(chan os.Signal, 1)\n\tsignal.Notify(c, syscall.SIGPIPE)\n\tgo func() {\n\t\t_ = \u003c-c\n\t\tos.Exit(exitCodeOk)\n\t}()\n\n\tusers, err := users(svc, iamGroup)\n\tif err != nil {\n\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\tos.Exit(exitCodeError)\n\t}\n\n\tfor _, u := range users {\n\t\twg.Add(1)\n\t\tgo func(userName *string) {\n\t\t\tparams := \u0026iam.ListSSHPublicKeysInput{\n\t\t\t\tUserName: userName,\n\t\t\t}\n\t\t\tif resp, err := svc.ListSSHPublicKeys(params); err == nil {\n\t\t\t\tfor _, k := range resp.SSHPublicKeys {\n\t\t\t\t\tif *k.Status != \"Active\" {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tparams := \u0026iam.GetSSHPublicKeyInput{\n\t\t\t\t\t\tEncoding:       aws.String(\"SSH\"),\n\t\t\t\t\t\tSSHPublicKeyId: k.SSHPublicKeyId,\n\t\t\t\t\t\tUserName:       userName,\n\t\t\t\t\t}\n\t\t\t\t\tresp, err := svc.GetSSHPublicKey(params)\n\t\t\t\t\tif err != nil {\n\t\t\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t\t\t}\n\t\t\t\t\tfmt.Printf(\"# %s\\n\", *userName)\n\t\t\t\t\tfmt.Println(*resp.SSHPublicKey.SSHPublicKeyBody)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t}\n\t\t\twg.Done()\n\t\t}(u.UserName)\n\t}\n\twg.Wait()\n}\n\n// get all IAM users, or just those that are part of the defined group\nfunc users(svc *iam.IAM, iamGroup string) ([]*iam.User, error) {\n\tif iamGroup != \"\" {\n\t\tparams := \u0026iam.GetGroupInput{\n\t\t\tGroupName: aws.String(iamGroup),\n\t\t\tMaxItems:  aws.Int64(1000),\n\t\t}\n\t\tresp, err := svc.GetGroup(params)\n\t\treturn resp.Users, err\n\t}\n\tparams := \u0026iam.ListUsersInput{\n\t\tMaxItems: aws.Int64(1000),\n\t}\n\tresp, err := svc.ListUsers(params)\n\treturn resp.Users, err\n}\n\nEOF\nDEBIAN_FRONTEND=noninteractive\nsudo apt-get install -y golang\n\nexport GOPATH=\"/root/go\"\nexport GOCACHE=\"/root/.cache/go-build\"\nexport GOENV=\"/root/.config/go/env\"\n\ncd /opt/golang/src/iam-authorized-keys-command\n\ngo mod init iam-authorized-keys-command\ngo mod tidy\n\n/usr/bin/go build -ldflags \"-X main.iamGroup=\" -o /opt/iam_helper/iam-authorized-keys-command ./main.go\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"extra_user_data\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\r\n--MIMEBOUNDARY--\r\n"},"sensitive_values":{"part":[{},{},{},{},{},{}]}},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_autoscaling_group.bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:f30b0fb2-d87e-4914-8e61-9153b86f12a8:autoScalingGroupName/bastion-service-asg2023062813162633610000000d","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162633610000000d","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-016b40fccf3c90cde","launch_template_name":"bastion-service-host-prod20230628131625052100000007","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162633610000000d","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-06a5f250d4c8c237d"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]},"depends_on":["module.prod_vpc.module.vpc.aws_subnet.private_subnet","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_assume_role_profile","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_assume_role","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-host","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_ami.debian","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_default_tags.this","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_assume_role","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.cloudinit_config.config"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile[0]","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:instance-profile/prod-us-east-1-vpc-089a9617aef708250_bastion","create_date":"2023-06-28T13:16:23Z","id":"prod-us-east-1-vpc-089a9617aef708250_bastion","name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","role":"prod-us-east-1-vpc-089a9617aef708250_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3CYCCC5CFMT"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","description":"","id":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3C75U5SHECM","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.check_ssh_authorized_keys","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role[0]","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:role/prod-us-east-1-vpc-089a9617aef708250_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:22Z","description":"","force_detach_policies":false,"id":"prod-us-east-1-vpc-089a9617aef708250_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion"],"max_session_duration":3600,"name":"prod-us-east-1-vpc-089a9617aef708250_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3CROAPNR2QN"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role_policy_attachment.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"prod-us-east-1-vpc-089a9617aef708250_bastion-20230628131624227400000004","policy_arn":"arn:aws:iam::444171185861:policy/prod-us-east-1-vpc-089a9617aef708250_bastion","role":"prod-us-east-1-vpc-089a9617aef708250_bastion"},"sensitive_values":{},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.check_ssh_authorized_keys","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-016b40fccf3c90cde","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"prod-us-east-1-vpc-089a9617aef708250_bastion"}],"id":"lt-016b40fccf3c90cde","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-prod20230628131625052100000007","name_prefix":"bastion-service-host-prod","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-01f7a5a8979a15a5c"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIHByb2QtdXMtZWFzdC0xLXZwYy0wODlhOTYxN2FlZjcwODI1MC1cJChlY2hvICVpIHwgY3V0IC1kLSAtZjEpIC12IC9kZXYvbG9nOi9kZXYvbG9nIC12IC9vcHQvaWFtX2hlbHBlcjovb3B0OnJvIHNzaGRfd29ya2VyIgpTdGFuZGFyZElucHV0PXNvY2tldApSdW50aW1lTWF4U2VjPTQzMjAwCgpbSW5zdGFsbF0KV2FudGVkQnk9bXVsdGktdXNlci50YXJnZXQKRU9GCiNzZXQgaG9zdCBzc2hkIHRvIHJ1biBvbiBwb3J0IDIyMjIgYW5kIHJlc3Rh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UHVibGljS2V5cyB7CgkJCQkJaWYgKmsuU3RhdHVzICE9ICJBY3RpdmUiIHsKCQkJCQkJY29udGludWUKCQkJCQl9CgkJCQkJcGFyYW1zIDo9ICZpYW0uR2V0U1NIUHVibGljS2V5SW5wdXR7CgkJCQkJCUVuY29kaW5nOiAgICAgICBhd3MuU3RyaW5nKCJTU0giKSwKCQkJCQkJU1NIUHVibGljS2V5SWQ6IGsuU1NIUHVibGljS2V5SWQsCgkJCQkJCVVzZXJOYW1lOiAgICAgICB1c2VyTmFtZSwKCQkJCQl9CgkJCQkJcmVzcCwgZXJyIDo9IHN2Yy5HZXRTU0hQdWJsaWNLZXkocGFyYW1zKQoJCQkJCWlmIGVyciAhPSBuaWwgewoJCQkJCQlmbXQuRnByaW50bG4ob3MuU3RkZXJyLCBlcnIuRXJyb3IoKSkKCQkJCQl9CgkJCQkJZm10LlByaW50ZigiIyAlc1xuIiwgKnVzZXJOYW1lKQoJCQkJCWZtdC5QcmludGxuKCpyZXNwLlNTSFB1YmxpY0tleS5TU0hQdWJsaWNLZXlCb2R5KQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJZm10LkZwcmludGxuKG9zLlN0ZGVyciwgZXJyLkVycm9yKCkpCgkJCX0KCQkJd2cuRG9uZSgpCgkJfSh1LlVzZXJOYW1lKQoJfQoJd2cuV2FpdCgpCn0KCi8vIGdldCBn9nGwgSUFNIHVzZXJzLCBvciBqdXN0IHRob3NlIHRoYXQgYXJlIHBhcnQgb2YgdGhlIGRlZmluZWQgZ3JvdXAKZnVuYyB1c2VycyhzdmMgKmln9nS5JQU0sIGln9nUdyb3VwIHN0cmluZykgKFtdKmln9nS5Vc2VyLCBlcnJvcikgewoJaWYgaWFtR3JvdXAgIT0gIiIgewoJCXBhcmFtcyA6PSAmaWFtLkdldEdyb3VwSW5wdXR7CgkJCUdyb3VwTmFtZTogYXdzLlN0cmluZyhpYW1Hcm91cCksCgkJCU1heEl0ZW1zOiAgYXdzLkludDY0KDEwMDApLAoJCX0KCQlyZXNwLCBlcnIgOj0gc3ZjLkdldEdyb3VwKHBhcmFtcykKCQlyZXR1cm4gcmVzcC5Vc2VycywgZXJyCgl9CglwYXJn9nXMgOj0gJmln9nS5MaXN0VXNlcnNJbnB1dHsKCQlNYXhJdGVtczogYXdzLkludDY0KDEwMDApLAoJfQoJcmVzcCwgZXJyIDo9IHN2Yy5MaXN0VXNlcnMocGFyYW1zKQoJcmV0dXJuIHJlc3AuVXNlcnMsIGVycgp9CgpFT0YKREVCSUFOX0ZST05URU5EPW5vbmludGVyYWN0aXZlCnN1ZG8gYXB0LWdldCBpbnN0YWxsIC15IGdvbGFuZwoKZXhwb3J0IEdPUEFUSD0iL3Jvb3QvZ28iCmV4cG9ydCBHT0NBQ0hFPSIvcm9vdC8uY2FjaGUvZ28tYnVpbGQiCmV4cG9ydCBHT0VOVj0iL3Jvb3QvLmNvbmZpZy9nby9lbnYiCgpjZCAvb3B0L2dvbGFuZy9zcmMvaWFtLWF1dGhvcml6ZWQta2V5cy1jb21tYW5kCgpnbyBtb2QgaW5pdCBpYW0tYXV0aG9yaXplZC1rZXlzLWNvbW1n9nmQKZ28gbW9kIHRpZHkKCi91c3IvYmluL2dvIGJ1aWxkIC1sZGZsYWdzICItWCBtYWluLmln9nUdyb3VwPSIgLW8gL29wdC9pYW1faGVscGVyL2ln9nS1hdXRob3JpemVkLWtleXMtY29tbWFuZCAuL21haW4uZ28KDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5n9nWU9ImV4dHJhX3VzZXJfZGF0YSINCkNvbnRlbnQtVHJn9nnNmZXItRW5jb2Rpbmc6IDdiaXQNCkNvbnRlbnQtVHlwZTogdGV4dC94LXNoZWxsc2NyaXB0DQpNaW1lLVZlcnNpb246IDEuMA0KWC1NZXJnZS1UeXBlOiBzdHIoYXBwZW5kKQ0KDQojIS9iaW4vYmFzaA0KLS1NSU1FQk9VTkRBUlktLQ0K","vpc_security_group_ids":[]},"sensitive_values":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_assume_role_profile","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_assume_role","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_ami.debian","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_assume_role","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.cloudinit_config.config"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","arn_suffix":"net/bastion-service-prod/d902477133b15e92","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-prod-d902477133b15e92.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-prod","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-06a5f250d4c8c237d"}],"subnets":["subnet-06a5f250d4c8c237d"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-089a9617aef708250","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"sensitive_values":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_subnet.private_subnet","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_listener.bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-prod/d902477133b15e92/d022f111b0817233","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-prod/d902477133b15e92/d022f111b0817233","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-prod/d902477133b15e92","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_subnet.private_subnet","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","arn_suffix":"targetgroup/bastion-service-prod-22/d7ecd998847525be","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-prod-22/d7ecd998847525be","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-prod-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-01f7a5a8979a15a5c","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-01f7a5a8979a15a5c","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"prod-bastion-service20230628131622642400000002","name_prefix":"prod-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-089a9617aef708250"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.bastion_host_out[0]","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-2818800821","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-012df4635b6cede1b","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.lb_healthcheck_in","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-3358210003","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-00df11ce7ee03d033","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]},"depends_on":["module.prod_vpc.module.vpc.aws_subnet.private_subnet","module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_subnet.lb_subnets"]},{"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.service_ssh_in[0]","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-1045749227","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-01f7a5a8979a15a5c","security_group_rule_id":"sgr-0c2aa5e0128248a13","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]},"depends_on":["module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service"]}],"address":"module.prod_vpc.module.vpc.module.ssh-bastion-service"}]}]},{"address":"module.stage_vpc","child_modules":[{"resources":[{"address":"module.stage_vpc.module.vpc.data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["us-east-1"],"id":"us-east-1","names":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"state":null,"timeouts":null,"zone_ids":["use1-az4","use1-az6","use1-az1","use1-az2","use1-az3","use1-az5"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false,false,false],"zone_ids":[false,false,false,false,false,false]}},{"address":"module.stage_vpc.module.vpc.aws_eip.n9n_nat_eip","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-04bfce424dbec9cf2","associate_with_private_ip":null,"association_id":"eipassoc-07a3dced98ef6467a","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-04bfce424dbec9cf2","instance":"","network_border_group":"us-east-1","network_interface":"eni-0324c58245f364b50","private_dns":"ip-10-0-1-210.ec2.internal","private_ip":"10.0.1.210","public_dns":"ec2-44-216-128-48.compute-1.amazonaws.com","public_ip":"44.216.128.48","public_ipv4_pool":"amazon","tags":{},"tags_all":{},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_internet_gateway.n9n_ig","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:internet-gateway/igw-0680e80773384969c","id":"igw-0680e80773384969c","owner_id":"444171185861","tags":{"Environment":"stage","Name":"stage-igw"},"tags_all":{"Environment":"stage","Name":"stage-igw"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-04bfce424dbec9cf2","association_id":"eipassoc-07a3dced98ef6467a","connectivity_type":"public","id":"nat-0dcf19075e6d6a9e0","network_interface_id":"eni-0324c58245f364b50","private_ip":"10.0.1.210","public_ip":"44.216.128.48","subnet_id":"subnet-0f52877bf4c35e54c","tags":{"Environment":"stage","Name":"stage-nat"},"tags_all":{"Environment":"stage","Name":"stage-nat"}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_eip.n9n_nat_eip","module.stage_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.stage_vpc.module.vpc.aws_subnet.public_subnet","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-05e5518d2199f1cd61080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0dcf19075e6d6a9e0","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-05e5518d2199f1cd6","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{},"depends_on":["module.stage_vpc.module.vpc.aws_eip.n9n_nat_eip","module.stage_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.stage_vpc.module.vpc.aws_nat_gateway.n9n_nat_gw","module.stage_vpc.module.vpc.aws_route_table.private","module.stage_vpc.module.vpc.aws_subnet.public_subnet","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0680e80773384969c","id":"r-rtb-02884780c4cce730f1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-02884780c4cce730f","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{},"depends_on":["module.stage_vpc.module.vpc.aws_internet_gateway.n9n_ig","module.stage_vpc.module.vpc.aws_route_table.public","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-05e5518d2199f1cd6","id":"rtb-05e5518d2199f1cd6","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0dcf19075e6d6a9e0","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"stage","Name":"stage-private-route-table"},"tags_all":{"Environment":"stage","Name":"stage-private-route-table"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:route-table/rtb-02884780c4cce730f","id":"rtb-02884780c4cce730f","owner_id":"444171185861","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0680e80773384969c","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"stage","Name":"stage-public-route-table"},"tags_all":{"Environment":"stage","Name":"stage-public-route-table"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-076cc22055bfbeaf6","route_table_id":"rtb-05e5518d2199f1cd6","subnet_id":"subnet-0ed5a2f4d9d0b10da","timeouts":null},"sensitive_values":{},"depends_on":["module.stage_vpc.module.vpc.aws_route_table.private","module.stage_vpc.module.vpc.aws_subnet.private_subnet","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-08300b254505537ca","route_table_id":"rtb-02884780c4cce730f","subnet_id":"subnet-0f52877bf4c35e54c","timeouts":null},"sensitive_values":{},"depends_on":["module.stage_vpc.module.vpc.aws_route_table.public","module.stage_vpc.module.vpc.aws_subnet.public_subnet","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-0a554abaa60163930","description":"Default security group to allow inbound/outbound from the VPC","egress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"id":"sg-0a554abaa60163930","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"stage-default-sg","name_prefix":"","owner_id":"444171185861","revoke_rules_on_delete":false,"tags":{"Environment":"stage","Name":"stage-default-sg"},"tags_all":{"Environment":"stage","Name":"stage-default-sg"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_subnet.private_subnet[0]","mode":"managed","type":"aws_subnet","name":"private_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0ed5a2f4d9d0b10da","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ed5a2f4d9d0b10da","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"stage","Filter":"private_subnet","Name":"stage-us-east-1a-private-subnet"},"tags_all":{"Environment":"stage","Filter":"private_subnet","Name":"stage-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_subnet.public_subnet[0]","mode":"managed","type":"aws_subnet","name":"public_subnet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0f52877bf4c35e54c","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0f52877bf4c35e54c","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"stage","Filter":"public_subnet","Name":"stage-us-east-1a-public-subnet"},"tags_all":{"Environment":"stage","Filter":"public_subnet","Name":"stage-us-east-1a-public-subnet"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:vpc/vpc-0db007dc41ef7db54","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-00dff01837010c6d1","default_route_table_id":"rtb-04ca3c953118dc80d","default_security_group_id":"sg-0bb079c8355bbddbe","dhcp_options_id":"dopt-0f5f0ed3bbd38b703","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-0db007dc41ef7db54","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-04ca3c953118dc80d","owner_id":"444171185861","tags":{"Environment":"stage","Name":"stage-vpc"},"tags_all":{"Environment":"stage","Name":"stage-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.stage_vpc.module.vpc","child_modules":[{"resources":[{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_ami.debian","mode":"data","type":"aws_ami","name":"debian","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-east-1::image/ami-0a9d5908c7201e91d","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-0edc6bf8eddd5b126","throughput":"0","volume_size":"8","volume_type":"gp2"},"no_device":"","virtual_name":""}],"boot_mode":"","creation_date":"2023-06-01T23:53:15.000Z","deprecation_time":"2025-06-01T23:53:15.000Z","description":"Debian 11 (20230601-1398)","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["debian-11-amd64-*"]},{"name":"virtualization-type","values":["hvm"]}],"hypervisor":"xen","id":"ami-0a9d5908c7201e91d","image_id":"ami-0a9d5908c7201e91d","image_location":"amazon/debian-11-amd64-20230601-1398","image_owner_alias":"amazon","image_type":"machine","imds_support":"","include_deprecated":false,"kernel_id":"","most_recent":true,"name":"debian-11-amd64-20230601-1398","name_regex":null,"owner_id":"136693071363","owners":["136693071363"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-0edc6bf8eddd5b126","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_default_tags.this","mode":"data","type":"aws_default_tags","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"aws","tags":{}},"sensitive_values":{"tags":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume[0]","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_role_assume","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1903849331","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.check_ssh_authorized_keys[0]","mode":"data","type":"aws_iam_policy_document","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2619827469","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ListUsers\",\n        \"iam:ListSSHPublicKeys\",\n        \"iam:ListGroups\",\n        \"iam:GetUser\",\n        \"iam:GetSSHPublicKey\",\n        \"iam:GetGroup\",\n        \"ec2:DescribeTags\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ec2:DescribeTags","iam:GetGroup","iam:GetSSHPublicKey","iam:GetUser","iam:ListGroups","iam:ListSSHPublicKeys","iam:ListUsers"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_subnet.lb_subnets[0]","mode":"data","type":"aws_subnet","name":"lb_subnets","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:subnet/subnet-0ed5a2f4d9d0b10da","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az4","available_ip_address_count":249,"cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","default_for_az":false,"enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"filter":null,"id":"subnet-0ed5a2f4d9d0b10da","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"444171185861","private_dns_hostname_type_on_launch":"ip-name","state":"available","tags":{"Environment":"stage","Filter":"private_subnet","Name":"stage-us-east-1a-private-subnet"},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"tags":{}}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.cloudinit_config.config","mode":"data","type":"cloudinit_config","name":"config","provider_name":"registry.terraform.io/hashicorp/cloudinit","schema_version":0,"values":{"base64_encode":false,"boundary":"MIMEBOUNDARY","gzip":false,"id":"3950715785","part":[{"content":"#!/bin/bash\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker.socket\n[Unit]\nDescription=SSH Socket for Per-Connection docker ssh container\n\n[Socket]\nListenStream=22\nAccept=true\n\n[Install]\nWantedBy=sockets.target\nEOF\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker@.service\n[Unit]\nDescription=SSH Per-Connection docker ssh container\n\n[Service]\nType=simple\nExecStart=/bin/sh -ec \"/usr/bin/docker run --rm -i --hostname stage-us-east-1-vpc-0db007dc41ef7db54-\\$(echo %i | cut -d- -f1) -v /dev/log:/dev/log -v /opt/iam_helper:/opt:ro sshd_worker\"\nStandardInput=socket\nRuntimeMaxSec=43200\n\n[Install]\nWantedBy=multi-user.target\nEOF\n#set host sshd to run on port 2222 and restart service\nsed -i 's/#Port[[:blank:]]22/Port\\ 2222/'  /etc/ssh/sshd_config\nsystemctl restart sshd.service\nsystemctl enable sshd_worker.socket\nsystemctl start sshd_worker.socket\nsystemctl daemon-reload\n\n#set hostname to match dns\nhostnamectl set-hostname stage-us-east-1-vpc-0db007dc41ef7db54-vpc-0db007dc41ef7db54-bastion-host","content_type":"text/x-shellscript","filename":"module_systemd","merge_type":null},{"content":"#!/bin/bash","content_type":"text/x-shellscript","filename":"module_ssh_populate_assume_role","merge_type":"str(append)"},{"content":"#!/bin/bash\nmkdir -p /opt/iam_helper/\ncat \u003c\u003c 'EOF' \u003e /opt/iam_helper/ssh_populate.sh\n#!/bin/bash\n(\ncount=1\n/opt/iam-authorized-keys-command | while read line\ndo\n    username=$( echo $line | sed -e 's/^# //' -e 's/+/plus/' -e 's/=/equal/' -e 's/,/comma/' -e 's/@/at/' )\n    useradd -m -s /bin/bash -k /etc/skel $username\n    usermod -a -G sudo $username\n    echo $username\\ 'ALL=(ALL) NOPASSWD:ALL' \u003e /etc/sudoers.d/$count\n    chmod 0440 /etc/sudoers.d/$count\n    count=$(( $count + 1 ))\n    mkdir /home/$username/.ssh\n    read line2\n    echo $line2 \u003e\u003e /home/$username/.ssh/authorized_keys\n    chown -R $username:$username /home/$username/.ssh\n    chmod 700 /home/$username/.ssh\n    chmod 0600 /home/$username/.ssh/authorized_keys\ndone\n\n) \u003e /dev/null 2\u003e\u00261\n\n/usr/sbin/sshd -i\nEOF\nchmod 0700 /opt/iam_helper/ssh_populate.sh\n","content_type":"text/x-shellscript","filename":"module_ssh_populate_same_account","merge_type":"str(append)"},{"content":"#!/bin/bash\n#debian specific set up for docker https://docs.docker.com/install/linux/docker-ce/debian/#install-using-the-repository\napt-get update\nDEBIAN_FRONTEND=noninteractive apt-get install -y apt-transport-https ca-certificates curl gpg software-properties-common docker.io \nsystemctl start docker\nmkdir -p /opt/sshd_worker\n#Write out Dockerfile\ncat \u003c\u003c EOF \u003e /opt/sshd_worker/Dockerfile\nFROM ubuntu:22.04\n\nRUN apt-get update \u0026\u0026 DEBIAN_FRONTEND=noninteractive apt-get install -y openssh-server sudo awscli \u0026\u0026 echo '\\033[1;31mI am a one-time Ubuntu container with passwordless sudo. \\033[1;37;41mI will terminate after 12 hours or else on exit\\033[0m' \u003e /etc/motd \u0026\u0026 mkdir /var/run/sshd\n\nEXPOSE 22\nCMD [\"/opt/ssh_populate.sh\"]\nEOF\n#Build sshd service container\ncd /opt/sshd_worker\ndocker build -t sshd_worker .\n\n","content_type":"text/x-shellscript","filename":"module_docker_setup","merge_type":"str(append)"},{"content":"#!/bin/bash\nmkdir -p /opt/golang/src/iam-authorized-keys-command/\ncat \u003c\u003c EOF \u003e /opt/golang/src/iam-authorized-keys-command/main.go\n        // This code is taken from https://github.com/Fullscreen/iam-authorized-keys-command\n// Its responsibility is to query iam service for users that match criteria, and add them to ec2 instance on which this is run\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\t\"os/signal\"\n\t\"sync\"\n\t\"syscall\"\n\n\t\"github.com/aws/aws-sdk-go/aws\"\n\t\"github.com/aws/aws-sdk-go/aws/session\"\n\t\"github.com/aws/aws-sdk-go/service/iam\"\n)\n\nconst (\n\texitCodeOk    int = 0\n\texitCodeError int = 1\n)\n\nvar (\n\twg sync.WaitGroup\n\n\tiamGroup    = \"\"\n\tsshUserName = \"\"\n)\n\nfunc main() {\n\tsess, _ := session.NewSession()\n\tsvc := iam.New(sess)\n\n\t// check for valid user name\n\tif sshUserName != \"\" \u0026\u0026 (len(os.Args) \u003c 2 || os.Args[1] != sshUserName) {\n\t\tos.Exit(exitCodeOk)\n\t}\n\n\t// Handle SIGPIPE\n\t//\n\t// When sshd identifies a key in the stdout of this command, it closes\n\t// the pipe causing a series of EPIPE errors before a SIGPIPE is emitted\n\t// on this scripts pid. If the script exits with the standard 13 code, sshd\n\t// will disregard any matched keys. We catch the signal here and exit 0 to\n\t// fix that problem.\n\tc := make(chan os.Signal, 1)\n\tsignal.Notify(c, syscall.SIGPIPE)\n\tgo func() {\n\t\t_ = \u003c-c\n\t\tos.Exit(exitCodeOk)\n\t}()\n\n\tusers, err := users(svc, iamGroup)\n\tif err != nil {\n\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\tos.Exit(exitCodeError)\n\t}\n\n\tfor _, u := range users {\n\t\twg.Add(1)\n\t\tgo func(userName *string) {\n\t\t\tparams := \u0026iam.ListSSHPublicKeysInput{\n\t\t\t\tUserName: userName,\n\t\t\t}\n\t\t\tif resp, err := svc.ListSSHPublicKeys(params); err == nil {\n\t\t\t\tfor _, k := range resp.SSHPublicKeys {\n\t\t\t\t\tif *k.Status != \"Active\" {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tparams := \u0026iam.GetSSHPublicKeyInput{\n\t\t\t\t\t\tEncoding:       aws.String(\"SSH\"),\n\t\t\t\t\t\tSSHPublicKeyId: k.SSHPublicKeyId,\n\t\t\t\t\t\tUserName:       userName,\n\t\t\t\t\t}\n\t\t\t\t\tresp, err := svc.GetSSHPublicKey(params)\n\t\t\t\t\tif err != nil {\n\t\t\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t\t\t}\n\t\t\t\t\tfmt.Printf(\"# %s\\n\", *userName)\n\t\t\t\t\tfmt.Println(*resp.SSHPublicKey.SSHPublicKeyBody)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t}\n\t\t\twg.Done()\n\t\t}(u.UserName)\n\t}\n\twg.Wait()\n}\n\n// get all IAM users, or just those that are part of the defined group\nfunc users(svc *iam.IAM, iamGroup string) ([]*iam.User, error) {\n\tif iamGroup != \"\" {\n\t\tparams := \u0026iam.GetGroupInput{\n\t\t\tGroupName: aws.String(iamGroup),\n\t\t\tMaxItems:  aws.Int64(1000),\n\t\t}\n\t\tresp, err := svc.GetGroup(params)\n\t\treturn resp.Users, err\n\t}\n\tparams := \u0026iam.ListUsersInput{\n\t\tMaxItems: aws.Int64(1000),\n\t}\n\tresp, err := svc.ListUsers(params)\n\treturn resp.Users, err\n}\n\nEOF\nDEBIAN_FRONTEND=noninteractive\nsudo apt-get install -y golang\n\nexport GOPATH=\"/root/go\"\nexport GOCACHE=\"/root/.cache/go-build\"\nexport GOENV=\"/root/.config/go/env\"\n\ncd /opt/golang/src/iam-authorized-keys-command\n\ngo mod init iam-authorized-keys-command\ngo mod tidy\n\n/usr/bin/go build -ldflags \"-X main.iamGroup=\" -o /opt/iam_helper/iam-authorized-keys-command ./main.go\n","content_type":"text/x-shellscript","filename":"module_iam-authorized-keys-command","merge_type":"str(append)"},{"content":"#!/bin/bash","content_type":"text/x-shellscript","filename":"extra_user_data","merge_type":"str(append)"}],"rendered":"Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_systemd\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker.socket\n[Unit]\nDescription=SSH Socket for Per-Connection docker ssh container\n\n[Socket]\nListenStream=22\nAccept=true\n\n[Install]\nWantedBy=sockets.target\nEOF\ncat \u003c\u003c EOF \u003e /etc/systemd/system/sshd_worker@.service\n[Unit]\nDescription=SSH Per-Connection docker ssh container\n\n[Service]\nType=simple\nExecStart=/bin/sh -ec \"/usr/bin/docker run --rm -i --hostname stage-us-east-1-vpc-0db007dc41ef7db54-\\$(echo %i | cut -d- -f1) -v /dev/log:/dev/log -v /opt/iam_helper:/opt:ro sshd_worker\"\nStandardInput=socket\nRuntimeMaxSec=43200\n\n[Install]\nWantedBy=multi-user.target\nEOF\n#set host sshd to run on port 2222 and restart service\nsed -i 's/#Port[[:blank:]]22/Port\\ 2222/'  /etc/ssh/sshd_config\nsystemctl restart sshd.service\nsystemctl enable sshd_worker.socket\nsystemctl start sshd_worker.socket\nsystemctl daemon-reload\n\n#set hostname to match dns\nhostnamectl set-hostname stage-us-east-1-vpc-0db007dc41ef7db54-vpc-0db007dc41ef7db54-bastion-host\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_ssh_populate_assume_role\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_ssh_populate_same_account\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\nmkdir -p /opt/iam_helper/\ncat \u003c\u003c 'EOF' \u003e /opt/iam_helper/ssh_populate.sh\n#!/bin/bash\n(\ncount=1\n/opt/iam-authorized-keys-command | while read line\ndo\n    username=$( echo $line | sed -e 's/^# //' -e 's/+/plus/' -e 's/=/equal/' -e 's/,/comma/' -e 's/@/at/' )\n    useradd -m -s /bin/bash -k /etc/skel $username\n    usermod -a -G sudo $username\n    echo $username\\ 'ALL=(ALL) NOPASSWD:ALL' \u003e /etc/sudoers.d/$count\n    chmod 0440 /etc/sudoers.d/$count\n    count=$(( $count + 1 ))\n    mkdir /home/$username/.ssh\n    read line2\n    echo $line2 \u003e\u003e /home/$username/.ssh/authorized_keys\n    chown -R $username:$username /home/$username/.ssh\n    chmod 700 /home/$username/.ssh\n    chmod 0600 /home/$username/.ssh/authorized_keys\ndone\n\n) \u003e /dev/null 2\u003e\u00261\n\n/usr/sbin/sshd -i\nEOF\nchmod 0700 /opt/iam_helper/ssh_populate.sh\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_docker_setup\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\n#debian specific set up for docker https://docs.docker.com/install/linux/docker-ce/debian/#install-using-the-repository\napt-get update\nDEBIAN_FRONTEND=noninteractive apt-get install -y apt-transport-https ca-certificates curl gpg software-properties-common docker.io \nsystemctl start docker\nmkdir -p /opt/sshd_worker\n#Write out Dockerfile\ncat \u003c\u003c EOF \u003e /opt/sshd_worker/Dockerfile\nFROM ubuntu:22.04\n\nRUN apt-get update \u0026\u0026 DEBIAN_FRONTEND=noninteractive apt-get install -y openssh-server sudo awscli \u0026\u0026 echo '\\033[1;31mI am a one-time Ubuntu container with passwordless sudo. \\033[1;37;41mI will terminate after 12 hours or else on exit\\033[0m' \u003e /etc/motd \u0026\u0026 mkdir /var/run/sshd\n\nEXPOSE 22\nCMD [\"/opt/ssh_populate.sh\"]\nEOF\n#Build sshd service container\ncd /opt/sshd_worker\ndocker build -t sshd_worker .\n\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"module_iam-authorized-keys-command\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\nmkdir -p /opt/golang/src/iam-authorized-keys-command/\ncat \u003c\u003c EOF \u003e /opt/golang/src/iam-authorized-keys-command/main.go\n        // This code is taken from https://github.com/Fullscreen/iam-authorized-keys-command\n// Its responsibility is to query iam service for users that match criteria, and add them to ec2 instance on which this is run\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\t\"os/signal\"\n\t\"sync\"\n\t\"syscall\"\n\n\t\"github.com/aws/aws-sdk-go/aws\"\n\t\"github.com/aws/aws-sdk-go/aws/session\"\n\t\"github.com/aws/aws-sdk-go/service/iam\"\n)\n\nconst (\n\texitCodeOk    int = 0\n\texitCodeError int = 1\n)\n\nvar (\n\twg sync.WaitGroup\n\n\tiamGroup    = \"\"\n\tsshUserName = \"\"\n)\n\nfunc main() {\n\tsess, _ := session.NewSession()\n\tsvc := iam.New(sess)\n\n\t// check for valid user name\n\tif sshUserName != \"\" \u0026\u0026 (len(os.Args) \u003c 2 || os.Args[1] != sshUserName) {\n\t\tos.Exit(exitCodeOk)\n\t}\n\n\t// Handle SIGPIPE\n\t//\n\t// When sshd identifies a key in the stdout of this command, it closes\n\t// the pipe causing a series of EPIPE errors before a SIGPIPE is emitted\n\t// on this scripts pid. If the script exits with the standard 13 code, sshd\n\t// will disregard any matched keys. We catch the signal here and exit 0 to\n\t// fix that problem.\n\tc := make(chan os.Signal, 1)\n\tsignal.Notify(c, syscall.SIGPIPE)\n\tgo func() {\n\t\t_ = \u003c-c\n\t\tos.Exit(exitCodeOk)\n\t}()\n\n\tusers, err := users(svc, iamGroup)\n\tif err != nil {\n\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\tos.Exit(exitCodeError)\n\t}\n\n\tfor _, u := range users {\n\t\twg.Add(1)\n\t\tgo func(userName *string) {\n\t\t\tparams := \u0026iam.ListSSHPublicKeysInput{\n\t\t\t\tUserName: userName,\n\t\t\t}\n\t\t\tif resp, err := svc.ListSSHPublicKeys(params); err == nil {\n\t\t\t\tfor _, k := range resp.SSHPublicKeys {\n\t\t\t\t\tif *k.Status != \"Active\" {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tparams := \u0026iam.GetSSHPublicKeyInput{\n\t\t\t\t\t\tEncoding:       aws.String(\"SSH\"),\n\t\t\t\t\t\tSSHPublicKeyId: k.SSHPublicKeyId,\n\t\t\t\t\t\tUserName:       userName,\n\t\t\t\t\t}\n\t\t\t\t\tresp, err := svc.GetSSHPublicKey(params)\n\t\t\t\t\tif err != nil {\n\t\t\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t\t\t}\n\t\t\t\t\tfmt.Printf(\"# %s\\n\", *userName)\n\t\t\t\t\tfmt.Println(*resp.SSHPublicKey.SSHPublicKeyBody)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\t\t}\n\t\t\twg.Done()\n\t\t}(u.UserName)\n\t}\n\twg.Wait()\n}\n\n// get all IAM users, or just those that are part of the defined group\nfunc users(svc *iam.IAM, iamGroup string) ([]*iam.User, error) {\n\tif iamGroup != \"\" {\n\t\tparams := \u0026iam.GetGroupInput{\n\t\t\tGroupName: aws.String(iamGroup),\n\t\t\tMaxItems:  aws.Int64(1000),\n\t\t}\n\t\tresp, err := svc.GetGroup(params)\n\t\treturn resp.Users, err\n\t}\n\tparams := \u0026iam.ListUsersInput{\n\t\tMaxItems: aws.Int64(1000),\n\t}\n\tresp, err := svc.ListUsers(params)\n\treturn resp.Users, err\n}\n\nEOF\nDEBIAN_FRONTEND=noninteractive\nsudo apt-get install -y golang\n\nexport GOPATH=\"/root/go\"\nexport GOCACHE=\"/root/.cache/go-build\"\nexport GOENV=\"/root/.config/go/env\"\n\ncd /opt/golang/src/iam-authorized-keys-command\n\ngo mod init iam-authorized-keys-command\ngo mod tidy\n\n/usr/bin/go build -ldflags \"-X main.iamGroup=\" -o /opt/iam_helper/iam-authorized-keys-command ./main.go\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"extra_user_data\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\nX-Merge-Type: str(append)\r\n\r\n#!/bin/bash\r\n--MIMEBOUNDARY--\r\n"},"sensitive_values":{"part":[{},{},{},{},{},{}]}},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_autoscaling_group.bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:autoscaling:us-east-1:444171185861:autoScalingGroup:1abc1d1c-c294-4c2e-b1c4-59e5caaa3b83:autoScalingGroupName/bastion-service-asg2023062813162637780000000e","availability_zones":["us-east-1a"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"bastion-service-asg2023062813162637780000000e","initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":"","launch_template":[],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[{"instances_distribution":[{"on_demand_allocation_strategy":"prioritized","on_demand_base_capacity":0,"on_demand_percentage_above_base_capacity":0,"spot_allocation_strategy":"lowest-price","spot_instance_pools":2,"spot_max_price":""}],"launch_template":[{"launch_template_specification":[{"launch_template_id":"lt-0abbb5191c920c151","launch_template_name":"bastion-service-host-stage20230628131625123200000009","version":"$Latest"}],"override":[{"instance_requirements":[],"instance_type":"t3.micro","launch_template_specification":[],"weighted_capacity":""}]}]}],"name":"bastion-service-asg2023062813162637780000000e","name_prefix":"bastion-service-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::444171185861:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"tags":null,"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4"],"termination_policies":[],"timeouts":null,"vpc_zone_identifier":["subnet-0ed5a2f4d9d0b10da"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[{"instances_distribution":[{}],"launch_template":[{"launch_template_specification":[{}],"override":[{"instance_requirements":[],"launch_template_specification":[]}]}]}],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"vpc_zone_identifier":[false],"warm_pool":[]},"depends_on":["module.stage_vpc.module.vpc.aws_subnet.private_subnet","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_assume_role_profile","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_assume_role","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-host","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_ami.debian","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_default_tags.this","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_assume_role","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.cloudinit_config.config"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile[0]","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:instance-profile/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","create_date":"2023-06-28T13:16:24Z","id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","role":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","tags":{},"tags_all":{},"unique_id":"AIPAWO2VKN3C5UV7VMP4K"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","description":"","id":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"iam:ListUsers\",\"iam:ListSSHPublicKeys\",\"iam:ListGroups\",\"iam:GetUser\",\"iam:GetSSHPublicKey\",\"iam:GetGroup\",\"ec2:DescribeTags\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAWO2VKN3CTONM5UMEA","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.check_ssh_authorized_keys","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role[0]","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::444171185861:role/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2023-06-28T13:16:23Z","description":"","force_detach_policies":false,"id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","inline_policy":[],"managed_policy_arns":["arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion"],"max_session_duration":3600,"name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAWO2VKN3CSORA3ZUCR"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"role_last_used":[{}],"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role_policy_attachment.check_ssh_authorized_keys[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion-20230628131624740100000006","policy_arn":"arn:aws:iam::444171185861:policy/stage-us-east-1-vpc-0db007dc41ef7db54_bastion","role":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion"},"sensitive_values":{},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_policy.check_ssh_authorized_keys","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.check_ssh_authorized_keys","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_launch_template.bastion-service-host","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:launch-template/lt-0abbb5191c920c151","block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"","iops":0,"kms_key_id":"","snapshot_id":"","throughput":0,"volume_size":8,"volume_type":"gp2"}],"no_device":"","virtual_name":""}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"","name":"stage-us-east-1-vpc-0db007dc41ef7db54_bastion"}],"id":"lt-0abbb5191c920c151","image_id":"ami-0a9d5908c7201e91d","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"bastion-service-host-stage20230628131625123200000009","name_prefix":"bastion-service-host-stage","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"true","delete_on_termination":"true","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":[],"ipv4_prefix_count":0,"ipv4_prefixes":[],"ipv6_address_count":0,"ipv6_addresses":[],"ipv6_prefix_count":0,"ipv6_prefixes":[],"network_card_index":0,"network_interface_id":"","private_ip_address":"","security_groups":["sg-08771d0af0c8068d0"],"subnet_id":""}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0ibW9kdWxlX3N5c3RlbWQiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQveC1zaGVsbHNjcmlwdA0KTWltZS1WZXJzaW9uOiAxLjANCg0KIyEvYmluL2Jhc2gKY2F0IDw8IEVPRiA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3NoZF93b3JrZXIuc29ja2V0CltVbml0XQpEZXNjcmlwdGlvbj1TU0ggU29ja2V0IGZvciBQZXItQ29ubmVjdGlvbiBkb2NrZXIgc3NoIGNvbnRhaW5lcgoKW1NvY2tldF0KTGlzdGVuU3RyZWFtPTIyCkFjY2VwdD10cnVlCgpbSW5zdGFsbF0KV2FudGVkQnk9c29ja2V0cy50YXJnZXQKRU9GCmNhdCA8PCBFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL3NzaGRfd29ya2VyQC5zZXJ2aWNlCltVbml0XQpEZXNjcmlwdGlvbj1TU0ggUGVyLUNvbm5lY3Rpb24gZG9ja2VyIHNzaCBjb250YWluZXIKCltTZXJ2aWNlXQpUeXBlPXNpbXBsZQpFeGVjU3RhcnQ9L2Jpbi9zaCAtZWMgIi91c3IvYmluL2RvY2tlciBydW4gLS1ybSAtaSAtLWhvc3RuYW1lIHN0YWdlLXVzLWVhc3QtMS12cGMtMGRiMDA3ZGM0MWVmN2RiNTQtXCQoZWNobyAlaSB8IGN1dCAtZC0gLWYxKSAtdiAvZGV2L2xvZzovZGV2L2xvZyAtdiAvb3B0L2ln9nV9oZWxwZXI6L29wdDpybyBzc2hkX3dvcmtlciIKU3Rn9nmRhcmRJbnB1dD1zb2NrZXQKUnVudGltZU1heFNlYz00MzIwMAoKW0luc3Rn9nGxdCldn9nnRlZEJ5PW11bHRpLXVzZXIudGFyZ2V0CkVPRgojc2V0IGhvc3Qgc3NoZCB0byBydW4gb24gcG9ydCAyMjIyIGFuZCBy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","vpc_security_group_ids":[]},"sensitive_values":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[{"ipv4_addresses":[],"ipv4_prefixes":[],"ipv6_addresses":[],"ipv6_prefixes":[],"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_assume_role_profile","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_instance_profile.bastion_service_profile","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_assume_role","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_ami.debian","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_assume_role","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.cloudinit_config.config"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","arn_suffix":"net/bastion-service-stage/d391ddd2ac4ea4ff","customer_owned_ipv4_pool":"","desync_mitigation_mode":null,"dns_name":"bastion-service-stage-d391ddd2ac4ea4ff.elb.us-east-1.amazonaws.com","drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":null,"enable_tls_version_and_cipher_suite_headers":null,"enable_waf_fail_open":null,"enable_xff_client_port":null,"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","idle_timeout":null,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"network","name":"bastion-service-stage","name_prefix":null,"preserve_host_header":null,"security_groups":[],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0ed5a2f4d9d0b10da"}],"subnets":["subnet-0ed5a2f4d9d0b10da"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54","xff_header_processing_mode":null,"zone_id":"Z26RNL4JYFTOTI"},"sensitive_values":{"access_logs":[{}],"security_groups":[],"subnet_mapping":[{}],"subnets":[false],"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_subnet.private_subnet","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_listener.bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-stage/d391ddd2ac4ea4ff/68746318bdeff37e","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:listener/net/bastion-service-stage/d391ddd2ac4ea4ff/68746318bdeff37e","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:loadbalancer/net/bastion-service-stage/d391ddd2ac4ea4ff","port":22,"protocol":"TCP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_subnet.private_subnet","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","arn_suffix":"targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"2222","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-1:444171185861:targetgroup/bastion-service-stage-22/85fd15c7ab57f6f4","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancing_algorithm_type":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"bastion-service-stage-22","name_prefix":null,"port":22,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_type":"instance","vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"health_check":[{}],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}]},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:444171185861:security-group/sg-08771d0af0c8068d0","description":"Bastion service","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-08771d0af0c8068d0","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":2222}],"name":"stage-bastion-service20230628131622655300000003","name_prefix":"stage-bastion-service","owner_id":"444171185861","revoke_rules_on_delete":true,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0db007dc41ef7db54"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.bastion_host_out[0]","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service and host egress","from_port":0,"id":"sgrule-486903834","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-0f9ddaa9fe650d278","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.lb_healthcheck_in","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["10.0.10.0/24"],"description":"access from load balancer CIDR ranges for healthchecks","from_port":2222,"id":"sgrule-856898212","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-05bb803866144f0d8","self":false,"source_security_group_id":null,"timeouts":null,"to_port":2222,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]},"depends_on":["module.stage_vpc.module.vpc.aws_subnet.private_subnet","module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_subnet.lb_subnets"]},{"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group_rule.service_ssh_in[0]","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"bastion service access","from_port":22,"id":"sgrule-2269610193","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-08771d0af0c8068d0","security_group_rule_id":"sgr-03d0ddef016559aee","self":false,"source_security_group_id":null,"timeouts":null,"to_port":22,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]},"depends_on":["module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service"]}],"address":"module.stage_vpc.module.vpc.module.ssh-bastion-service"}]}]}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","expressions":{"region":{"references":["var.region"]}}},"module.dev_vpc.module.vpc.module.ssh-bastion-service:cloudinit":{"name":"cloudinit","full_name":"registry.terraform.io/hashicorp/cloudinit","module_address":"module.dev_vpc.module.vpc.module.ssh-bastion-service"},"module.dev_vpc.module.vpc:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.dev_vpc.module.vpc"},"module.liferay.module.liferay:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.liferay.module.liferay"},"module.prod_vpc.module.vpc.module.ssh-bastion-service:cloudinit":{"name":"cloudinit","full_name":"registry.terraform.io/hashicorp/cloudinit","module_address":"module.prod_vpc.module.vpc.module.ssh-bastion-service"},"module.prod_vpc.module.vpc:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.prod_vpc.module.vpc"},"module.stage_vpc.module.vpc.module.ssh-bastion-service:cloudinit":{"name":"cloudinit","full_name":"registry.terraform.io/hashicorp/cloudinit","module_address":"module.stage_vpc.module.vpc.module.ssh-bastion-service"},"module.stage_vpc.module.vpc:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.stage_vpc.module.vpc"}},"root_module":{"outputs":{"state_bucket_arn":{"expression":{"references":["aws_s3_bucket.s3-tf-bucket.arn","aws_s3_bucket.s3-tf-bucket"]},"description":"The ARN of the S3 bucket holding state"},"state_dynamo":{"expression":{"references":["aws_dynamodb_table.tf-state-lock.name","aws_dynamodb_table.tf-state-lock"]},"description":"The name of the DynamoDB table holding state"}},"resources":[{"address":"aws_dynamodb_table.tf-state-lock","mode":"managed","type":"aws_dynamodb_table","name":"tf-state-lock","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"LockID"},"type":{"constant_value":"S"}}],"hash_key":{"constant_value":"LockID"},"name":{"constant_value":"tf_state_lock"},"read_capacity":{"constant_value":5},"tags":{"constant_value":{"Name":"Dynamodb Terraform State Lock Table"}},"write_capacity":{"constant_value":5}},"schema_version":1},{"address":"aws_kms_key.s3-kms-key","mode":"managed","type":"aws_kms_key","name":"s3-kms-key","provider_config_key":"aws","expressions":{"description":{"constant_value":"Use this key to encrypt S3 buckets"}},"schema_version":0},{"address":"aws_s3_bucket.s3-tf-bucket","mode":"managed","type":"aws_s3_bucket","name":"s3-tf-bucket","provider_config_key":"aws","expressions":{"bucket":{"constant_value":"n9n-s3-state-220523"},"tags":{"constant_value":{"Environment":"Prod","Name":"S3 Remote Terraform State Bucket"}}},"schema_version":0},{"address":"aws_s3_bucket_acl.s3-tf-state-bucket-acl","mode":"managed","type":"aws_s3_bucket_acl","name":"s3-tf-state-bucket-acl","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["aws_s3_bucket.s3-tf-bucket.id","aws_s3_bucket.s3-tf-bucket"]}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.s3-pub-block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3-pub-block","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.s3-tf-bucket.id","aws_s3_bucket.s3-tf-bucket"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.s3-sse-config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"s3-sse-config","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.s3-tf-bucket.id","aws_s3_bucket.s3-tf-bucket"]},"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["aws_kms_key.s3-kms-key.arn","aws_kms_key.s3-kms-key"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.s3-tf-bucket-versioning","mode":"managed","type":"aws_s3_bucket_versioning","name":"s3-tf-bucket-versioning","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.s3-tf-bucket.id","aws_s3_bucket.s3-tf-bucket"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0}],"module_calls":{"dev_vpc":{"source":"./dev/components/vpc","module":{"module_calls":{"vpc":{"source":"../../../modules/components/vpc","expressions":{"availability_zones":{"references":["local.dev_availability_zones"]},"aws_region":{"references":["var.region"]},"env":{"references":["var.env"]},"private_subnets_cidr":{"references":["var.private_subnets_cidr"]},"public_subnets_cidr":{"references":["var.public_subnets_cidr"]},"vpc_cidr":{"references":["var.vpc_cidr"]}},"module":{"outputs":{"vpc_id":{"expression":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}}},"resources":[{"address":"aws_eip.n9n_nat_eip","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"vpc":{"constant_value":true}},"schema_version":0,"depends_on":["aws_internet_gateway.n9n_ig"]},{"address":"aws_internet_gateway.n9n_ig","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":0},{"address":"aws_nat_gateway.n9n_nat_gw","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"allocation_id":{"references":["aws_eip.n9n_nat_eip.id","aws_eip.n9n_nat_eip"]},"subnet_id":{"references":["aws_subnet.public_subnet"]},"tags":{"references":["var.env","var.env"]}},"schema_version":0,"depends_on":["aws_internet_gateway.n9n_ig"]},{"address":"aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.n9n_nat_gw.id","aws_nat_gateway.n9n_nat_gw"]},"route_table_id":{"references":["aws_route_table.private.id","aws_route_table.private"]}},"schema_version":0},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.n9n_ig.id","aws_internet_gateway.n9n_ig"]},"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]}},"schema_version":0},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":0},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":0},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private.id","aws_route_table.private"]},"subnet_id":{"references":["aws_subnet.private_subnet","count.index"]}},"schema_version":0,"count_expression":{"references":["var.private_subnets_cidr"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public_subnet","count.index"]}},"schema_version":0,"count_expression":{"references":["var.public_subnets_cidr"]}},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"description":{"constant_value":"Default security group to allow inbound/outbound from the VPC"},"egress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"name":{"references":["var.env"]},"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":1,"depends_on":["aws_vpc.n9n_vpc"]},{"address":"aws_subnet.private_subnet","mode":"managed","type":"aws_subnet","name":"private_subnet","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"availability_zone":{"references":["var.availability_zones","count.index"]},"cidr_block":{"references":["var.private_subnets_cidr","count.index"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["var.env","var.availability_zones","count.index","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":1,"count_expression":{"references":["var.private_subnets_cidr"]}},{"address":"aws_subnet.public_subnet","mode":"managed","type":"aws_subnet","name":"public_subnet","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"availability_zone":{"references":["var.availability_zones","count.index"]},"cidr_block":{"references":["var.public_subnets_cidr","count.index"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.env","var.availability_zones","count.index","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":1,"count_expression":{"references":["var.public_subnets_cidr"]}},{"address":"aws_vpc.n9n_vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["var.env","var.env"]}},"schema_version":1},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"module.dev_vpc.module.vpc:aws","schema_version":0}],"module_calls":{"ssh-bastion-service":{"source":"github.com/joshuamkite/terraform-aws-ssh-bastion-service","expressions":{"aws_region":{"references":["var.aws_region"]},"bastion_instance_types":{"constant_value":["t3.micro"]},"cidr_blocks_whitelist_service":{"references":["var.everyone_cidr"]},"environment_name":{"references":["var.env"]},"public_ip":{"constant_value":true},"subnets_asg":{"references":["aws_subnet.private_subnet"]},"subnets_lb":{"references":["aws_subnet.private_subnet"]},"vpc":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"module":{"outputs":{"bastion_service_assume_role_name":{"expression":{"references":["aws_iam_role.bastion_service_assume_role"]},"description":"role created for service host asg - if created with assume role"},"bastion_service_role_name":{"expression":{"references":["aws_iam_role.bastion_service_role"]},"description":"role created for service host asg - if created without assume role"},"bastion_sg_id":{"expression":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"description":"Security Group id of the bastion host"},"lb_arn":{"expression":{"references":["aws_lb.bastion-service.arn","aws_lb.bastion-service"]},"description":"aws load balancer arn"},"lb_dns_name":{"expression":{"references":["aws_lb.bastion-service.dns_name","aws_lb.bastion-service"]},"description":"aws load balancer dns"},"lb_zone_id":{"expression":{"references":["aws_lb.bastion-service.zone_id","aws_lb.bastion-service"]}},"policy_example_for_parent_account_empty_if_not_used":{"expression":{"references":["local.assume_role_yes_bool","local.sample_policies_for_parent_account"]},"description":"You must apply an IAM policy with trust relationship identical or compatible with this in your other AWS account for IAM lookups to function there with STS:AssumeRole and allow users to login"},"service_dns_entry":{"expression":{"references":["aws_route53_record.bastion_service"]},"description":"dns-registered url for service and host"},"target_group_arn":{"expression":{"references":["aws_lb_target_group.bastion-service.arn","aws_lb_target_group.bastion-service"]},"description":"aws load balancer target group arn"}},"resources":[{"address":"aws_autoscaling_group.bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"desired_capacity":{"references":["var.asg_desired"]},"enabled_metrics":{"references":["var.autoscaling_group_enabled_metrics"]},"max_size":{"references":["var.asg_max"]},"min_size":{"references":["var.asg_min"]},"mixed_instances_policy":[{"instances_distribution":[{"on_demand_base_capacity":{"references":["var.on_demand_base_capacity"]},"on_demand_percentage_above_base_capacity":{"constant_value":0}}],"launch_template":[{"launch_template_specification":[{"launch_template_id":{"references":["aws_launch_template.bastion-service-host.id","aws_launch_template.bastion-service-host"]},"version":{"constant_value":"$Latest"}}]}]}],"name_prefix":{"references":["var.service_name"]},"target_group_arns":{"references":["aws_lb_target_group.bastion-service.arn","aws_lb_target_group.bastion-service","aws_lb_target_group.bastion-host"]},"vpc_zone_identifier":{"references":["var.subnets_asg"]}},"schema_version":0},{"address":"aws_iam_instance_profile.bastion_service_assume_role_profile","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_assume_role_profile","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"role":{"references":["aws_iam_role.bastion_service_assume_role[0].name","aws_iam_role.bastion_service_assume_role[0]","aws_iam_role.bastion_service_assume_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_instance_profile.bastion_service_profile","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"role":{"references":["aws_iam_role.bastion_service_role[0].name","aws_iam_role.bastion_service_role[0]","aws_iam_role.bastion_service_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_iam_policy.bastion_service_assume_role_in_parent","mode":"managed","type":"aws_iam_policy","name":"bastion_service_assume_role_in_parent","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"policy":{"references":["data.aws_iam_policy_document.bastion_service_assume_role_in_parent[0].json","data.aws_iam_policy_document.bastion_service_assume_role_in_parent[0]","data.aws_iam_policy_document.bastion_service_assume_role_in_parent"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_policy.check_ssh_authorized_keys","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"policy":{"references":["data.aws_iam_policy_document.check_ssh_authorized_keys[0].json","data.aws_iam_policy_document.check_ssh_authorized_keys[0]","data.aws_iam_policy_document.check_ssh_authorized_keys"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_iam_role.bastion_service_assume_role","mode":"managed","type":"aws_iam_role","name":"bastion_service_assume_role","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.bastion_service_assume_role[0].json","data.aws_iam_policy_document.bastion_service_assume_role[0]","data.aws_iam_policy_document.bastion_service_assume_role"]},"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_role.bastion_service_role","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.bastion_service_role_assume[0].json","data.aws_iam_policy_document.bastion_service_role_assume[0]","data.aws_iam_policy_document.bastion_service_role_assume"]},"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_iam_role_policy_attachment.bastion_service_assume_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"bastion_service_assume_role","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.bastion_service_assume_role_in_parent[0].arn","aws_iam_policy.bastion_service_assume_role_in_parent[0]","aws_iam_policy.bastion_service_assume_role_in_parent"]},"role":{"references":["aws_iam_role.bastion_service_assume_role[0].name","aws_iam_role.bastion_service_assume_role[0]","aws_iam_role.bastion_service_assume_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_role_policy_attachment.check_ssh_authorized_keys","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.check_ssh_authorized_keys[0].arn","aws_iam_policy.check_ssh_authorized_keys[0]","aws_iam_policy.check_ssh_authorized_keys"]},"role":{"references":["aws_iam_role.bastion_service_role[0].name","aws_iam_role.bastion_service_role[0]","aws_iam_role.bastion_service_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_launch_template.bastion-service-host","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"block_device_mappings":[{"device_name":{"references":["var.bastion_ebs_device_name"]},"ebs":[{"delete_on_termination":{"constant_value":"true"},"volume_size":{"references":["var.bastion_ebs_size"]},"volume_type":{"constant_value":"gp2"}}]}],"iam_instance_profile":[{"name":{"references":["aws_iam_instance_profile.bastion_service_assume_role_profile","aws_iam_instance_profile.bastion_service_profile"]}}],"image_id":{"references":["local.bastion_ami_id"]},"instance_type":{"references":["var.bastion_instance_types[0]","var.bastion_instance_types"]},"key_name":{"references":["var.bastion_service_host_key_name"]},"name_prefix":{"references":["var.service_name","var.environment_name"]},"network_interfaces":[{"associate_public_ip_address":{"references":["var.public_ip"]},"delete_on_termination":{"references":["var.delete_network_interface_on_termination"]},"security_groups":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service","var.security_groups_additional"]}}],"tags":{"references":["var.tags"]},"user_data":{"references":["data.cloudinit_config.config.rendered","data.cloudinit_config.config"]}},"schema_version":0},{"address":"aws_lb.bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"enable_cross_zone_load_balancing":{"constant_value":true},"internal":{"references":["var.lb_is_internal"]},"load_balancer_type":{"constant_value":"network"},"name":{"references":["var.service_name","var.environment_name"]},"subnets":{"references":["var.subnets_lb"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_lb_listener.bastion-host","mode":"managed","type":"aws_lb_listener","name":"bastion-host","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.bastion-host[0].arn","aws_lb_target_group.bastion-host[0]","aws_lb_target_group.bastion-host"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.bastion-service.arn","aws_lb.bastion-service"]},"port":{"constant_value":"2222"},"protocol":{"constant_value":"TCP"}},"schema_version":0,"count_expression":{"references":["local.hostport_whitelisted"]}},{"address":"aws_lb_listener.bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.bastion-service.arn","aws_lb_target_group.bastion-service"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.bastion-service.arn","aws_lb.bastion-service"]},"port":{"references":["var.bastion_service_port"]},"protocol":{"constant_value":"TCP"}},"schema_version":0},{"address":"aws_lb_target_group.bastion-host","mode":"managed","type":"aws_lb_target_group","name":"bastion-host","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"health_check":[{"healthy_threshold":{"references":["var.lb_healthy_threshold"]},"interval":{"references":["var.lb_interval"]},"port":{"references":["var.lb_healthcheck_port"]},"protocol":{"constant_value":"TCP"},"unhealthy_threshold":{"references":["var.lb_unhealthy_threshold"]}}],"name":{"references":["var.service_name","var.environment_name"]},"port":{"constant_value":2222},"protocol":{"constant_value":"TCP"},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":0,"count_expression":{"references":["local.hostport_whitelisted"]}},{"address":"aws_lb_target_group.bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"health_check":[{"healthy_threshold":{"references":["var.lb_healthy_threshold"]},"interval":{"references":["var.lb_interval"]},"port":{"references":["var.lb_healthcheck_port"]},"protocol":{"constant_value":"TCP"},"unhealthy_threshold":{"references":["var.lb_unhealthy_threshold"]}}],"name":{"references":["var.service_name","var.environment_name","var.bastion_service_port"]},"port":{"references":["var.bastion_service_port"]},"protocol":{"constant_value":"TCP"},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":0},{"address":"aws_route53_record.bastion_service","mode":"managed","type":"aws_route53_record","name":"bastion_service","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":true},"name":{"references":["aws_lb.bastion-service.dns_name","aws_lb.bastion-service"]},"zone_id":{"references":["aws_lb.bastion-service.zone_id","aws_lb.bastion-service"]}}],"name":{"references":["var.route53_fqdn","local.route53_name_components","var.route53_fqdn"]},"type":{"constant_value":"A"},"zone_id":{"references":["var.route53_zone_id"]}},"schema_version":2,"count_expression":{"references":["var.route53_zone_id"]}},{"address":"aws_security_group.bastion_service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"description":{"constant_value":"Bastion service"},"name_prefix":{"references":["var.service_name","var.environment_name","var.service_name","var.service_name"]},"revoke_rules_on_delete":{"constant_value":true},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":1},{"address":"aws_security_group_rule.bastion_host_out","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"description":{"constant_value":"bastion service and host egress"},"from_port":{"constant_value":0},"protocol":{"constant_value":-1},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"constant_value":65535},"type":{"constant_value":"egress"}},"schema_version":2,"count_expression":{"references":["var.custom_outbound_security_group"]}},{"address":"aws_security_group_rule.host_ssh_in_cond","mode":"managed","type":"aws_security_group_rule","name":"host_ssh_in_cond","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"references":["var.cidr_blocks_whitelist_host"]},"description":{"constant_value":"bastion HOST access"},"from_port":{"constant_value":2222},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"constant_value":2222},"type":{"constant_value":"ingress"}},"schema_version":2,"count_expression":{"references":["local.hostport_whitelisted"]}},{"address":"aws_security_group_rule.lb_healthcheck_in","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"references":["data.aws_subnet.lb_subnets"]},"description":{"constant_value":"access from load balancer CIDR ranges for healthchecks"},"from_port":{"references":["var.lb_healthcheck_port"]},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"references":["var.lb_healthcheck_port"]},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.service_ssh_in","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"references":["var.cidr_blocks_whitelist_service"]},"description":{"constant_value":"bastion service access"},"from_port":{"constant_value":22},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"constant_value":22},"type":{"constant_value":"ingress"}},"schema_version":2,"count_expression":{"references":["local.cidr_blocks_whitelist_service_yes"]}},{"address":"data.aws_ami.debian","mode":"data","type":"aws_ami","name":"debian","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"constant_value":["debian-11-amd64-*"]}},{"name":{"constant_value":"virtualization-type"},"values":{"constant_value":["hvm"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["136693071363"]}},"schema_version":0},{"address":"data.aws_default_tags.this","mode":"data","type":"aws_default_tags","name":"this","provider_config_key":"module.dev_vpc.module.vpc:aws","schema_version":0},{"address":"data.aws_iam_policy_document.bastion_service_assume_role","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_assume_role","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"data.aws_iam_policy_document.bastion_service_assume_role_in_parent","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_assume_role_in_parent","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.assume_role_arn"]}}]},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"data.aws_iam_policy_document.bastion_service_role_assume","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_role_assume","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"data.aws_iam_policy_document.check_ssh_authorized_keys","mode":"data","type":"aws_iam_policy_document","name":"check_ssh_authorized_keys","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["iam:ListUsers","iam:GetGroup","iam:GetSSHPublicKey","iam:ListSSHPublicKeys","iam:GetUser","iam:ListGroups","ec2:DescribeTags"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"module.dev_vpc.module.vpc:aws","schema_version":0},{"address":"data.aws_subnet.lb_subnets","mode":"data","type":"aws_subnet","name":"lb_subnets","provider_config_key":"module.dev_vpc.module.vpc:aws","expressions":{"id":{"references":["var.subnets_lb","count.index"]}},"schema_version":0,"count_expression":{"references":["var.subnets_lb"]}},{"address":"data.cloudinit_config.config","mode":"data","type":"cloudinit_config","name":"config","provider_config_key":"module.dev_vpc.module.vpc.module.ssh-bastion-service:cloudinit","expressions":{"base64_encode":{"constant_value":false},"gzip":{"constant_value":false},"part":[{"content":{"references":["local.custom_systemd_no","local.systemd"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_systemd"}},{"content":{"references":["local.assume_role_yes","local.custom_ssh_populate_no","local.ssh_populate_assume_role"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_ssh_populate_assume_role"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["local.assume_role_no","local.custom_ssh_populate_no","local.ssh_populate_same_account"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_ssh_populate_same_account"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["local.custom_docker_setup_no","local.docker_setup"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_docker_setup"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["local.custom_authorized_keys_command_no","local.iam_authorized_keys_command"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_iam-authorized-keys-command"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["var.extra_user_data_content","var.extra_user_data_content"]},"content_type":{"references":["var.extra_user_data_content_type"]},"filename":{"constant_value":"extra_user_data"},"merge_type":{"references":["var.extra_user_data_merge_type"]}}]},"schema_version":0}],"variables":{"asg_desired":{"default":"1","description":"Desired numbers of bastion-service hosts in ASG"},"asg_max":{"default":"2","description":"Max numbers of bastion-service hosts in ASG"},"asg_min":{"default":"1","description":"Min numbers of bastion-service hosts in ASG"},"assume_role_arn":{"default":"","description":"arn for role to assume in separate identity account if used"},"autoscaling_group_enabled_metrics":{"default":[],"description":"A list of CloudWatch metrics to collect on the autoscaling group. Permitted values include: GroupMinSize; GroupMaxSize; GroupDesiredCapacity; GroupInServiceInstances; GroupPendingInstances; GroupStandbyInstances; GroupTerminatingInstances; GroupTotalInstances"},"aws_profile":{"default":""},"aws_region":{},"bastion_allowed_iam_group":{"default":"","description":"Name IAM group, members of this group will be able to ssh into bastion instances if they have provided ssh key in their profile"},"bastion_ebs_device_name":{"default":"/dev/sda1","description":"Name of bastion instance block device"},"bastion_ebs_size":{"default":8,"description":"Size of EBS attached to the bastion instance"},"bastion_host_name":{"default":"","description":"The hostname to give to the bastion instance"},"bastion_instance_types":{"default":["t3.small","t3.medium","t3.large"],"description":"List of ec2 types for the bastion host, used by aws_launch_template (first from the list) and in aws_autoscaling_group"},"bastion_service_host_key_name":{"default":"","description":"AWS ssh key *.pem to be used for ssh access to the bastion service host"},"bastion_service_port":{"default":22,"description":"Port for containerised ssh daemon"},"bastion_vpc_name":{"default":"vpc_id","description":"define the last part of the hostname, by default this is the vpc ID with magic default value of 'vpc_id' but you can pass a custom string, or an empty value to omit this"},"cidr_blocks_whitelist_host":{"default":[],"description":"range(s) of incoming IP addresses to whitelist for the HOST"},"cidr_blocks_whitelist_service":{"default":[],"description":"range(s) of incoming IP addresses to whitelist for the SERVICE"},"container_ubuntu_version":{"default":"22.04","description":"ubuntu version to use for service container"},"custom_ami_id":{"default":"","description":"id for custom ami if used"},"custom_authorized_keys_command":{"default":"","description":"any value excludes default Go binary iam-authorized-keys built from source from userdata"},"custom_docker_setup":{"default":"","description":"any value excludes default docker installation and container build from userdata"},"custom_outbound_security_group":{"default":false,"description":"don't create default outgoing permissive security group rule - will only work with custom AMI or if security group supplied with ports 53(UDP); 80(TCP); 443(TCP) open for 0.0.0.0/0 egress"},"custom_ssh_populate":{"default":"","description":"any value excludes default ssh_populate script used on container launch from userdata"},"custom_systemd":{"default":"","description":"any value excludes default systemd and hostname change from userdata"},"delete_network_interface_on_termination":{"default":true,"description":"if network interface created for bastion host should be deleted when instance in terminated. Setting propagated to aws_launch_template.network_interfaces.delete_on_termination"},"dns_domain":{"default":"","description":"The domain used for Route53 records"},"environment_name":{"default":"staging","description":"the name of the environment that we are deploying to, used in tagging. Overwritten if var.service_name and var.bastion_host_name values are changed"},"extra_user_data_content":{"default":"","description":"Extra user-data to add to the default built-in"},"extra_user_data_content_type":{"default":"text/x-shellscript","description":"What format is content in - eg 'text/cloud-config' or 'text/x-shellscript'"},"extra_user_data_merge_type":{"default":"str(append)","description":"Control how cloud-init merges user-data sections"},"lb_healthcheck_port":{"default":"2222","description":"TCP port to conduct lb target group healthchecks. Acceptable values are 2222 or the value defined for `bastion_service_port`"},"lb_healthy_threshold":{"default":"2","description":"Healthy threshold for lb target group"},"lb_interval":{"default":"30","description":"interval for lb target group health check"},"lb_is_internal":{"default":"false","description":"whether the lb will be internal"},"lb_unhealthy_threshold":{"default":"2","description":"Unhealthy threshold for lb target group"},"on_demand_base_capacity":{"default":0,"description":"allows a base level of on demand when using spot"},"public_ip":{"default":false,"description":"Associate a public IP with the host instance when launching"},"route53_fqdn":{"default":"","description":"If creating a public DNS entry with this module then you may override the default constructed DNS entry by supplying a fully qualified domain name here which will be used verbatim"},"route53_zone_id":{"default":"","description":"Route53 zoneId"},"security_groups_additional":{"default":[],"description":"additional security group IDs to attach to host instance"},"service_name":{"default":"bastion-service","description":"Unique name per vpc for associated resources- set to some non-default value for multiple deployments per vpc"},"subnets_asg":{"description":"list of subnets for autoscaling group - availability zones must match subnets_lb"},"subnets_lb":{"description":"list of subnets for load balancer - availability zones must match subnets_asg"},"tags":{"default":{},"description":"AWS tags that should be associated with created resources"},"vpc":{"description":"ID for Virtual Private Cloud to apply security policy and deploy stack to"}}}}},"variables":{"availability_zones":{"description":"AZ count"},"aws_region":{"description":"AWS Region"},"bastion_instance_types":{"default":["t3.small","t3.medium","t3.large"],"description":"List of ec2 types for the bastion host"},"cidr_blocks_whitelist_service":{"default":[],"description":"range(s) of incoming IP addresses to whitelist"},"env":{"description":"Environment to deploy to"},"everyone_cidr":{"default":"0.0.0.0/0","description":"Everyone"},"private_subnets_cidr":{"description":"CIDR for the private subnet"},"public_ip":{"default":false,"description":"Associate a public IP with the host instance during launch"},"public_subnets_cidr":{"description":"CIDR for public subnet"},"vpc_cidr":{"description":"CIDR block"}}}}},"variables":{"env":{"default":"dev","description":"The environment for the resources"},"private_subnets_cidr":{"default":["10.0.10.0/24"],"description":"CIDR for the private subnet"},"public_subnets_cidr":{"default":["10.0.1.0/24"],"description":"CIDR for the public subnet"},"region":{"default":"us-east-1","description":"AWS region for the resources"},"vpc_cidr":{"default":"10.0.0.0/16","description":"CIDR for the VPC"}}}},"liferay":{"source":"./dev/services/liferay","module":{"module_calls":{"liferay":{"source":"../../../modules/services/liferay","expressions":{"aws_region":{"references":["var.region"]},"dev_group_max":{"references":["var.dev_group_max"]},"dev_group_min":{"references":["var.dev_group_min"]},"env":{"references":["var.env"]},"image_id":{"references":["var.image_id"]},"liferay_instance_type":{"constant_value":"t3.large"},"server_port":{"references":["var.server_port"]}},"module":{"resources":[{"address":"aws_autoscaling_group.liferay_cluster_asg","mode":"managed","type":"aws_autoscaling_group","name":"liferay_cluster_asg","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"health_check_type":{"constant_value":"ELB"},"launch_configuration":{"references":["aws_launch_configuration.liferay_cluster_lc.name","aws_launch_configuration.liferay_cluster_lc"]},"max_size":{"references":["var.dev_group_max"]},"min_size":{"references":["var.dev_group_min"]},"tag":[{"key":{"constant_value":"Name"},"propagate_at_launch":{"constant_value":true},"value":{"constant_value":"liferay-asg"}}],"target_group_arns":{"references":["aws_lb_target_group.liferay_cluster_targets.arn","aws_lb_target_group.liferay_cluster_targets"]},"vpc_zone_identifier":{"references":["data.aws_subnets.selected_subnets.ids","data.aws_subnets.selected_subnets"]}},"schema_version":0},{"address":"aws_launch_configuration.liferay_cluster_lc","mode":"managed","type":"aws_launch_configuration","name":"liferay_cluster_lc","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"image_id":{"references":["var.image_id"]},"instance_type":{"constant_value":"t3.large"},"security_groups":{"references":["aws_security_group.liferay_cluster_sg.id","aws_security_group.liferay_cluster_sg"]}},"schema_version":0},{"address":"aws_lb.liferay_cluster_lb","mode":"managed","type":"aws_lb","name":"liferay_cluster_lb","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"load_balancer_type":{"constant_value":"application"},"name":{"constant_value":"liferay-cluster-lb"},"subnets":{"references":["data.aws_subnets.selected_subnets.ids","data.aws_subnets.selected_subnets"]}},"schema_version":0},{"address":"aws_lb_listener.liferay_cluster_listener","mode":"managed","type":"aws_lb_listener","name":"liferay_cluster_listener","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"default_action":[{"fixed_response":[{"content_type":{"constant_value":"text/plain"},"message_body":{"constant_value":"404: page not found"},"status_code":{"constant_value":404}}],"type":{"constant_value":"fixed-response"}}],"load_balancer_arn":{"references":["aws_lb.liferay_cluster_lb.arn","aws_lb.liferay_cluster_lb"]},"protocol":{"constant_value":"HTTP"}},"schema_version":0},{"address":"aws_lb_listener_rule.liferay_cluster_rule","mode":"managed","type":"aws_lb_listener_rule","name":"liferay_cluster_rule","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"action":[{"target_group_arn":{"references":["aws_lb_target_group.liferay_cluster_targets.arn","aws_lb_target_group.liferay_cluster_targets"]},"type":{"constant_value":"forward"}}],"condition":[{"path_pattern":[{"values":{"constant_value":["*"]}}]}],"listener_arn":{"references":["aws_lb_listener.liferay_cluster_listener.arn","aws_lb_listener.liferay_cluster_listener"]},"priority":{"constant_value":100}},"schema_version":0},{"address":"aws_lb_target_group.liferay_cluster_targets","mode":"managed","type":"aws_lb_target_group","name":"liferay_cluster_targets","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"health_check":[{"healthy_threshold":{"constant_value":2},"interval":{"constant_value":15},"matcher":{"constant_value":"200"},"path":{"constant_value":"/"},"protocol":{"constant_value":"HTTP"},"timeout":{"constant_value":3},"unhealthy_threshold":{"constant_value":2}}],"name":{"constant_value":"liferay-cluster-targets"},"port":{"references":["var.server_port"]},"protocol":{"constant_value":"HTTP"},"vpc_id":{"references":["data.aws_vpc.selected_vpc.id","data.aws_vpc.selected_vpc"]}},"schema_version":0},{"address":"aws_security_group.liferay_cluster_lg_sg","mode":"managed","type":"aws_security_group","name":"liferay_cluster_lg_sg","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.server_port","var.server_port"]},"name":{"constant_value":"liferay_cluster_lb_sg"}},"schema_version":1},{"address":"aws_security_group.liferay_cluster_sg","mode":"managed","type":"aws_security_group","name":"liferay_cluster_sg","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"description":{"constant_value":"Security group for liferay"},"egress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"name":{"references":["var.env"]},"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["data.aws_vpc.selected_vpc.id","data.aws_vpc.selected_vpc"]}},"schema_version":1,"depends_on":["data.aws_vpc.selected_vpc"]},{"address":"data.aws_subnet.target_private","mode":"data","type":"aws_subnet","name":"target_private","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"filter":[{"name":{"constant_value":"tag:Filter"},"values":{"references":["var.filter_private"]}}],"vpc_id":{"references":["data.aws_vpc.selected_vpc.id","data.aws_vpc.selected_vpc"]}},"schema_version":0},{"address":"data.aws_subnet.target_public","mode":"data","type":"aws_subnet","name":"target_public","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"filter":[{"name":{"constant_value":"tag:Filter"},"values":{"references":["var.filter_public"]}}],"vpc_id":{"references":["data.aws_vpc.selected_vpc.id","data.aws_vpc.selected_vpc"]}},"schema_version":0},{"address":"data.aws_subnets.selected_subnets","mode":"data","type":"aws_subnets","name":"selected_subnets","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"filter":[{"name":{"constant_value":"vpc-id"},"values":{"references":["data.aws_vpc.selected_vpc.id","data.aws_vpc.selected_vpc"]}}]},"schema_version":0},{"address":"data.aws_vpc.selected_vpc","mode":"data","type":"aws_vpc","name":"selected_vpc","provider_config_key":"module.liferay.module.liferay:aws","expressions":{"filter":[{"name":{"constant_value":"tag:Name"},"values":{"references":["var.env"]}}]},"schema_version":0}],"variables":{"aws_region":{"description":"Region to deploy to"},"dev_group_max":{"default":1,"description":"Maximum number of hosts in group"},"dev_group_min":{"default":1,"description":"Minimun number of hosts in group"},"env":{"description":"Environment to deploy to"},"filter_private":{"default":"private_subnet","description":"To reference the Filter tag on the private subnet"},"filter_public":{"default":"public_subnet","description":"To reference the Filter tag on the public subnet"},"image_id":{"default":"ami-0638741e0c9aabde6","description":"AMI to use on target hosts in the cluster"},"liferay_instance_type":{"default":["t3.large","t3.xlarge"],"description":"List of ec2 types for liferay target hosts"},"server_port":{"default":80,"description":"Port Liferay listens on"}}}}},"variables":{"dev_group_max":{"default":1,"description":"Maximum number of hosts"},"dev_group_min":{"default":1,"description":"Minimum number of hosts"},"env":{"default":"dev","description":"The environment for the resources"},"image_id":{"default":"ami-0638741e0c9aabde6","description":"AMI to use on target hosts"},"liferay_instance_type":{"default":["t3.large","t3.xlarge"],"description":"Size of the hosts"},"region":{"default":"us-east-1","description":"Region to deploy to"},"server_port":{"default":80,"description":"Port Liferay listens on"}}}},"prod_vpc":{"source":"./prod/components/vpc","module":{"module_calls":{"vpc":{"source":"../../../modules/components/vpc","expressions":{"availability_zones":{"references":["local.prod_availability_zones"]},"aws_region":{"references":["var.region"]},"env":{"references":["var.env"]},"private_subnets_cidr":{"references":["var.private_subnets_cidr"]},"public_subnets_cidr":{"references":["var.public_subnets_cidr"]},"vpc_cidr":{"references":["var.vpc_cidr"]}},"module":{"outputs":{"vpc_id":{"expression":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}}},"resources":[{"address":"aws_eip.n9n_nat_eip","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"vpc":{"constant_value":true}},"schema_version":0,"depends_on":["aws_internet_gateway.n9n_ig"]},{"address":"aws_internet_gateway.n9n_ig","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":0},{"address":"aws_nat_gateway.n9n_nat_gw","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"allocation_id":{"references":["aws_eip.n9n_nat_eip.id","aws_eip.n9n_nat_eip"]},"subnet_id":{"references":["aws_subnet.public_subnet"]},"tags":{"references":["var.env","var.env"]}},"schema_version":0,"depends_on":["aws_internet_gateway.n9n_ig"]},{"address":"aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.n9n_nat_gw.id","aws_nat_gateway.n9n_nat_gw"]},"route_table_id":{"references":["aws_route_table.private.id","aws_route_table.private"]}},"schema_version":0},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.n9n_ig.id","aws_internet_gateway.n9n_ig"]},"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]}},"schema_version":0},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":0},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":0},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private.id","aws_route_table.private"]},"subnet_id":{"references":["aws_subnet.private_subnet","count.index"]}},"schema_version":0,"count_expression":{"references":["var.private_subnets_cidr"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public_subnet","count.index"]}},"schema_version":0,"count_expression":{"references":["var.public_subnets_cidr"]}},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"description":{"constant_value":"Default security group to allow inbound/outbound from the VPC"},"egress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"name":{"references":["var.env"]},"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":1,"depends_on":["aws_vpc.n9n_vpc"]},{"address":"aws_subnet.private_subnet","mode":"managed","type":"aws_subnet","name":"private_subnet","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"availability_zone":{"references":["var.availability_zones","count.index"]},"cidr_block":{"references":["var.private_subnets_cidr","count.index"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["var.env","var.availability_zones","count.index","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":1,"count_expression":{"references":["var.private_subnets_cidr"]}},{"address":"aws_subnet.public_subnet","mode":"managed","type":"aws_subnet","name":"public_subnet","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"availability_zone":{"references":["var.availability_zones","count.index"]},"cidr_block":{"references":["var.public_subnets_cidr","count.index"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.env","var.availability_zones","count.index","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":1,"count_expression":{"references":["var.public_subnets_cidr"]}},{"address":"aws_vpc.n9n_vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["var.env","var.env"]}},"schema_version":1},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"module.prod_vpc.module.vpc:aws","schema_version":0}],"module_calls":{"ssh-bastion-service":{"source":"github.com/joshuamkite/terraform-aws-ssh-bastion-service","expressions":{"aws_region":{"references":["var.aws_region"]},"bastion_instance_types":{"constant_value":["t3.micro"]},"cidr_blocks_whitelist_service":{"references":["var.everyone_cidr"]},"environment_name":{"references":["var.env"]},"public_ip":{"constant_value":true},"subnets_asg":{"references":["aws_subnet.private_subnet"]},"subnets_lb":{"references":["aws_subnet.private_subnet"]},"vpc":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"module":{"outputs":{"bastion_service_assume_role_name":{"expression":{"references":["aws_iam_role.bastion_service_assume_role"]},"description":"role created for service host asg - if created with assume role"},"bastion_service_role_name":{"expression":{"references":["aws_iam_role.bastion_service_role"]},"description":"role created for service host asg - if created without assume role"},"bastion_sg_id":{"expression":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"description":"Security Group id of the bastion host"},"lb_arn":{"expression":{"references":["aws_lb.bastion-service.arn","aws_lb.bastion-service"]},"description":"aws load balancer arn"},"lb_dns_name":{"expression":{"references":["aws_lb.bastion-service.dns_name","aws_lb.bastion-service"]},"description":"aws load balancer dns"},"lb_zone_id":{"expression":{"references":["aws_lb.bastion-service.zone_id","aws_lb.bastion-service"]}},"policy_example_for_parent_account_empty_if_not_used":{"expression":{"references":["local.assume_role_yes_bool","local.sample_policies_for_parent_account"]},"description":"You must apply an IAM policy with trust relationship identical or compatible with this in your other AWS account for IAM lookups to function there with STS:AssumeRole and allow users to login"},"service_dns_entry":{"expression":{"references":["aws_route53_record.bastion_service"]},"description":"dns-registered url for service and host"},"target_group_arn":{"expression":{"references":["aws_lb_target_group.bastion-service.arn","aws_lb_target_group.bastion-service"]},"description":"aws load balancer target group arn"}},"resources":[{"address":"aws_autoscaling_group.bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"desired_capacity":{"references":["var.asg_desired"]},"enabled_metrics":{"references":["var.autoscaling_group_enabled_metrics"]},"max_size":{"references":["var.asg_max"]},"min_size":{"references":["var.asg_min"]},"mixed_instances_policy":[{"instances_distribution":[{"on_demand_base_capacity":{"references":["var.on_demand_base_capacity"]},"on_demand_percentage_above_base_capacity":{"constant_value":0}}],"launch_template":[{"launch_template_specification":[{"launch_template_id":{"references":["aws_launch_template.bastion-service-host.id","aws_launch_template.bastion-service-host"]},"version":{"constant_value":"$Latest"}}]}]}],"name_prefix":{"references":["var.service_name"]},"target_group_arns":{"references":["aws_lb_target_group.bastion-service.arn","aws_lb_target_group.bastion-service","aws_lb_target_group.bastion-host"]},"vpc_zone_identifier":{"references":["var.subnets_asg"]}},"schema_version":0},{"address":"aws_iam_instance_profile.bastion_service_assume_role_profile","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_assume_role_profile","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"role":{"references":["aws_iam_role.bastion_service_assume_role[0].name","aws_iam_role.bastion_service_assume_role[0]","aws_iam_role.bastion_service_assume_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_instance_profile.bastion_service_profile","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"role":{"references":["aws_iam_role.bastion_service_role[0].name","aws_iam_role.bastion_service_role[0]","aws_iam_role.bastion_service_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_iam_policy.bastion_service_assume_role_in_parent","mode":"managed","type":"aws_iam_policy","name":"bastion_service_assume_role_in_parent","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"policy":{"references":["data.aws_iam_policy_document.bastion_service_assume_role_in_parent[0].json","data.aws_iam_policy_document.bastion_service_assume_role_in_parent[0]","data.aws_iam_policy_document.bastion_service_assume_role_in_parent"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_policy.check_ssh_authorized_keys","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"policy":{"references":["data.aws_iam_policy_document.check_ssh_authorized_keys[0].json","data.aws_iam_policy_document.check_ssh_authorized_keys[0]","data.aws_iam_policy_document.check_ssh_authorized_keys"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_iam_role.bastion_service_assume_role","mode":"managed","type":"aws_iam_role","name":"bastion_service_assume_role","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.bastion_service_assume_role[0].json","data.aws_iam_policy_document.bastion_service_assume_role[0]","data.aws_iam_policy_document.bastion_service_assume_role"]},"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_role.bastion_service_role","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.bastion_service_role_assume[0].json","data.aws_iam_policy_document.bastion_service_role_assume[0]","data.aws_iam_policy_document.bastion_service_role_assume"]},"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_iam_role_policy_attachment.bastion_service_assume_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"bastion_service_assume_role","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.bastion_service_assume_role_in_parent[0].arn","aws_iam_policy.bastion_service_assume_role_in_parent[0]","aws_iam_policy.bastion_service_assume_role_in_parent"]},"role":{"references":["aws_iam_role.bastion_service_assume_role[0].name","aws_iam_role.bastion_service_assume_role[0]","aws_iam_role.bastion_service_assume_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_role_policy_attachment.check_ssh_authorized_keys","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.check_ssh_authorized_keys[0].arn","aws_iam_policy.check_ssh_authorized_keys[0]","aws_iam_policy.check_ssh_authorized_keys"]},"role":{"references":["aws_iam_role.bastion_service_role[0].name","aws_iam_role.bastion_service_role[0]","aws_iam_role.bastion_service_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_launch_template.bastion-service-host","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"block_device_mappings":[{"device_name":{"references":["var.bastion_ebs_device_name"]},"ebs":[{"delete_on_termination":{"constant_value":"true"},"volume_size":{"references":["var.bastion_ebs_size"]},"volume_type":{"constant_value":"gp2"}}]}],"iam_instance_profile":[{"name":{"references":["aws_iam_instance_profile.bastion_service_assume_role_profile","aws_iam_instance_profile.bastion_service_profile"]}}],"image_id":{"references":["local.bastion_ami_id"]},"instance_type":{"references":["var.bastion_instance_types[0]","var.bastion_instance_types"]},"key_name":{"references":["var.bastion_service_host_key_name"]},"name_prefix":{"references":["var.service_name","var.environment_name"]},"network_interfaces":[{"associate_public_ip_address":{"references":["var.public_ip"]},"delete_on_termination":{"references":["var.delete_network_interface_on_termination"]},"security_groups":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service","var.security_groups_additional"]}}],"tags":{"references":["var.tags"]},"user_data":{"references":["data.cloudinit_config.config.rendered","data.cloudinit_config.config"]}},"schema_version":0},{"address":"aws_lb.bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"enable_cross_zone_load_balancing":{"constant_value":true},"internal":{"references":["var.lb_is_internal"]},"load_balancer_type":{"constant_value":"network"},"name":{"references":["var.service_name","var.environment_name"]},"subnets":{"references":["var.subnets_lb"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_lb_listener.bastion-host","mode":"managed","type":"aws_lb_listener","name":"bastion-host","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.bastion-host[0].arn","aws_lb_target_group.bastion-host[0]","aws_lb_target_group.bastion-host"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.bastion-service.arn","aws_lb.bastion-service"]},"port":{"constant_value":"2222"},"protocol":{"constant_value":"TCP"}},"schema_version":0,"count_expression":{"references":["local.hostport_whitelisted"]}},{"address":"aws_lb_listener.bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.bastion-service.arn","aws_lb_target_group.bastion-service"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.bastion-service.arn","aws_lb.bastion-service"]},"port":{"references":["var.bastion_service_port"]},"protocol":{"constant_value":"TCP"}},"schema_version":0},{"address":"aws_lb_target_group.bastion-host","mode":"managed","type":"aws_lb_target_group","name":"bastion-host","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"health_check":[{"healthy_threshold":{"references":["var.lb_healthy_threshold"]},"interval":{"references":["var.lb_interval"]},"port":{"references":["var.lb_healthcheck_port"]},"protocol":{"constant_value":"TCP"},"unhealthy_threshold":{"references":["var.lb_unhealthy_threshold"]}}],"name":{"references":["var.service_name","var.environment_name"]},"port":{"constant_value":2222},"protocol":{"constant_value":"TCP"},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":0,"count_expression":{"references":["local.hostport_whitelisted"]}},{"address":"aws_lb_target_group.bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"health_check":[{"healthy_threshold":{"references":["var.lb_healthy_threshold"]},"interval":{"references":["var.lb_interval"]},"port":{"references":["var.lb_healthcheck_port"]},"protocol":{"constant_value":"TCP"},"unhealthy_threshold":{"references":["var.lb_unhealthy_threshold"]}}],"name":{"references":["var.service_name","var.environment_name","var.bastion_service_port"]},"port":{"references":["var.bastion_service_port"]},"protocol":{"constant_value":"TCP"},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":0},{"address":"aws_route53_record.bastion_service","mode":"managed","type":"aws_route53_record","name":"bastion_service","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":true},"name":{"references":["aws_lb.bastion-service.dns_name","aws_lb.bastion-service"]},"zone_id":{"references":["aws_lb.bastion-service.zone_id","aws_lb.bastion-service"]}}],"name":{"references":["var.route53_fqdn","local.route53_name_components","var.route53_fqdn"]},"type":{"constant_value":"A"},"zone_id":{"references":["var.route53_zone_id"]}},"schema_version":2,"count_expression":{"references":["var.route53_zone_id"]}},{"address":"aws_security_group.bastion_service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"description":{"constant_value":"Bastion service"},"name_prefix":{"references":["var.service_name","var.environment_name","var.service_name","var.service_name"]},"revoke_rules_on_delete":{"constant_value":true},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":1},{"address":"aws_security_group_rule.bastion_host_out","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"description":{"constant_value":"bastion service and host egress"},"from_port":{"constant_value":0},"protocol":{"constant_value":-1},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"constant_value":65535},"type":{"constant_value":"egress"}},"schema_version":2,"count_expression":{"references":["var.custom_outbound_security_group"]}},{"address":"aws_security_group_rule.host_ssh_in_cond","mode":"managed","type":"aws_security_group_rule","name":"host_ssh_in_cond","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"references":["var.cidr_blocks_whitelist_host"]},"description":{"constant_value":"bastion HOST access"},"from_port":{"constant_value":2222},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"constant_value":2222},"type":{"constant_value":"ingress"}},"schema_version":2,"count_expression":{"references":["local.hostport_whitelisted"]}},{"address":"aws_security_group_rule.lb_healthcheck_in","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"references":["data.aws_subnet.lb_subnets"]},"description":{"constant_value":"access from load balancer CIDR ranges for healthchecks"},"from_port":{"references":["var.lb_healthcheck_port"]},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"references":["var.lb_healthcheck_port"]},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.service_ssh_in","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"references":["var.cidr_blocks_whitelist_service"]},"description":{"constant_value":"bastion service access"},"from_port":{"constant_value":22},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"constant_value":22},"type":{"constant_value":"ingress"}},"schema_version":2,"count_expression":{"references":["local.cidr_blocks_whitelist_service_yes"]}},{"address":"data.aws_ami.debian","mode":"data","type":"aws_ami","name":"debian","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"constant_value":["debian-11-amd64-*"]}},{"name":{"constant_value":"virtualization-type"},"values":{"constant_value":["hvm"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["136693071363"]}},"schema_version":0},{"address":"data.aws_default_tags.this","mode":"data","type":"aws_default_tags","name":"this","provider_config_key":"module.prod_vpc.module.vpc:aws","schema_version":0},{"address":"data.aws_iam_policy_document.bastion_service_assume_role","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_assume_role","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"data.aws_iam_policy_document.bastion_service_assume_role_in_parent","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_assume_role_in_parent","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.assume_role_arn"]}}]},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"data.aws_iam_policy_document.bastion_service_role_assume","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_role_assume","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"data.aws_iam_policy_document.check_ssh_authorized_keys","mode":"data","type":"aws_iam_policy_document","name":"check_ssh_authorized_keys","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["iam:ListUsers","iam:GetGroup","iam:GetSSHPublicKey","iam:ListSSHPublicKeys","iam:GetUser","iam:ListGroups","ec2:DescribeTags"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"module.prod_vpc.module.vpc:aws","schema_version":0},{"address":"data.aws_subnet.lb_subnets","mode":"data","type":"aws_subnet","name":"lb_subnets","provider_config_key":"module.prod_vpc.module.vpc:aws","expressions":{"id":{"references":["var.subnets_lb","count.index"]}},"schema_version":0,"count_expression":{"references":["var.subnets_lb"]}},{"address":"data.cloudinit_config.config","mode":"data","type":"cloudinit_config","name":"config","provider_config_key":"module.prod_vpc.module.vpc.module.ssh-bastion-service:cloudinit","expressions":{"base64_encode":{"constant_value":false},"gzip":{"constant_value":false},"part":[{"content":{"references":["local.custom_systemd_no","local.systemd"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_systemd"}},{"content":{"references":["local.assume_role_yes","local.custom_ssh_populate_no","local.ssh_populate_assume_role"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_ssh_populate_assume_role"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["local.assume_role_no","local.custom_ssh_populate_no","local.ssh_populate_same_account"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_ssh_populate_same_account"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["local.custom_docker_setup_no","local.docker_setup"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_docker_setup"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["local.custom_authorized_keys_command_no","local.iam_authorized_keys_command"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_iam-authorized-keys-command"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["var.extra_user_data_content","var.extra_user_data_content"]},"content_type":{"references":["var.extra_user_data_content_type"]},"filename":{"constant_value":"extra_user_data"},"merge_type":{"references":["var.extra_user_data_merge_type"]}}]},"schema_version":0}],"variables":{"asg_desired":{"default":"1","description":"Desired numbers of bastion-service hosts in ASG"},"asg_max":{"default":"2","description":"Max numbers of bastion-service hosts in ASG"},"asg_min":{"default":"1","description":"Min numbers of bastion-service hosts in ASG"},"assume_role_arn":{"default":"","description":"arn for role to assume in separate identity account if used"},"autoscaling_group_enabled_metrics":{"default":[],"description":"A list of CloudWatch metrics to collect on the autoscaling group. Permitted values include: GroupMinSize; GroupMaxSize; GroupDesiredCapacity; GroupInServiceInstances; GroupPendingInstances; GroupStandbyInstances; GroupTerminatingInstances; GroupTotalInstances"},"aws_profile":{"default":""},"aws_region":{},"bastion_allowed_iam_group":{"default":"","description":"Name IAM group, members of this group will be able to ssh into bastion instances if they have provided ssh key in their profile"},"bastion_ebs_device_name":{"default":"/dev/sda1","description":"Name of bastion instance block device"},"bastion_ebs_size":{"default":8,"description":"Size of EBS attached to the bastion instance"},"bastion_host_name":{"default":"","description":"The hostname to give to the bastion instance"},"bastion_instance_types":{"default":["t3.small","t3.medium","t3.large"],"description":"List of ec2 types for the bastion host, used by aws_launch_template (first from the list) and in aws_autoscaling_group"},"bastion_service_host_key_name":{"default":"","description":"AWS ssh key *.pem to be used for ssh access to the bastion service host"},"bastion_service_port":{"default":22,"description":"Port for containerised ssh daemon"},"bastion_vpc_name":{"default":"vpc_id","description":"define the last part of the hostname, by default this is the vpc ID with magic default value of 'vpc_id' but you can pass a custom string, or an empty value to omit this"},"cidr_blocks_whitelist_host":{"default":[],"description":"range(s) of incoming IP addresses to whitelist for the HOST"},"cidr_blocks_whitelist_service":{"default":[],"description":"range(s) of incoming IP addresses to whitelist for the SERVICE"},"container_ubuntu_version":{"default":"22.04","description":"ubuntu version to use for service container"},"custom_ami_id":{"default":"","description":"id for custom ami if used"},"custom_authorized_keys_command":{"default":"","description":"any value excludes default Go binary iam-authorized-keys built from source from userdata"},"custom_docker_setup":{"default":"","description":"any value excludes default docker installation and container build from userdata"},"custom_outbound_security_group":{"default":false,"description":"don't create default outgoing permissive security group rule - will only work with custom AMI or if security group supplied with ports 53(UDP); 80(TCP); 443(TCP) open for 0.0.0.0/0 egress"},"custom_ssh_populate":{"default":"","description":"any value excludes default ssh_populate script used on container launch from userdata"},"custom_systemd":{"default":"","description":"any value excludes default systemd and hostname change from userdata"},"delete_network_interface_on_termination":{"default":true,"description":"if network interface created for bastion host should be deleted when instance in terminated. Setting propagated to aws_launch_template.network_interfaces.delete_on_termination"},"dns_domain":{"default":"","description":"The domain used for Route53 records"},"environment_name":{"default":"staging","description":"the name of the environment that we are deploying to, used in tagging. Overwritten if var.service_name and var.bastion_host_name values are changed"},"extra_user_data_content":{"default":"","description":"Extra user-data to add to the default built-in"},"extra_user_data_content_type":{"default":"text/x-shellscript","description":"What format is content in - eg 'text/cloud-config' or 'text/x-shellscript'"},"extra_user_data_merge_type":{"default":"str(append)","description":"Control how cloud-init merges user-data sections"},"lb_healthcheck_port":{"default":"2222","description":"TCP port to conduct lb target group healthchecks. Acceptable values are 2222 or the value defined for `bastion_service_port`"},"lb_healthy_threshold":{"default":"2","description":"Healthy threshold for lb target group"},"lb_interval":{"default":"30","description":"interval for lb target group health check"},"lb_is_internal":{"default":"false","description":"whether the lb will be internal"},"lb_unhealthy_threshold":{"default":"2","description":"Unhealthy threshold for lb target group"},"on_demand_base_capacity":{"default":0,"description":"allows a base level of on demand when using spot"},"public_ip":{"default":false,"description":"Associate a public IP with the host instance when launching"},"route53_fqdn":{"default":"","description":"If creating a public DNS entry with this module then you may override the default constructed DNS entry by supplying a fully qualified domain name here which will be used verbatim"},"route53_zone_id":{"default":"","description":"Route53 zoneId"},"security_groups_additional":{"default":[],"description":"additional security group IDs to attach to host instance"},"service_name":{"default":"bastion-service","description":"Unique name per vpc for associated resources- set to some non-default value for multiple deployments per vpc"},"subnets_asg":{"description":"list of subnets for autoscaling group - availability zones must match subnets_lb"},"subnets_lb":{"description":"list of subnets for load balancer - availability zones must match subnets_asg"},"tags":{"default":{},"description":"AWS tags that should be associated with created resources"},"vpc":{"description":"ID for Virtual Private Cloud to apply security policy and deploy stack to"}}}}},"variables":{"availability_zones":{"description":"AZ count"},"aws_region":{"description":"AWS Region"},"bastion_instance_types":{"default":["t3.small","t3.medium","t3.large"],"description":"List of ec2 types for the bastion host"},"cidr_blocks_whitelist_service":{"default":[],"description":"range(s) of incoming IP addresses to whitelist"},"env":{"description":"Environment to deploy to"},"everyone_cidr":{"default":"0.0.0.0/0","description":"Everyone"},"private_subnets_cidr":{"description":"CIDR for the private subnet"},"public_ip":{"default":false,"description":"Associate a public IP with the host instance during launch"},"public_subnets_cidr":{"description":"CIDR for public subnet"},"vpc_cidr":{"description":"CIDR block"}}}}},"variables":{"env":{"default":"prod","description":"The environment for the resources"},"private_subnets_cidr":{"default":["10.0.10.0/24"],"description":"CIDR for the private subnet"},"public_subnets_cidr":{"default":["10.0.1.0/24"],"description":"CIDR for the public subnet"},"region":{"default":"us-east-1","description":"AWS region for the resources"},"vpc_cidr":{"default":"10.0.0.0/16","description":"CIDR for the VPC"}}}},"stage_vpc":{"source":"./stage/components/vpc","module":{"module_calls":{"vpc":{"source":"../../../modules/components/vpc","expressions":{"availability_zones":{"references":["local.stage_availability_zones"]},"aws_region":{"references":["var.region"]},"env":{"references":["var.env"]},"private_subnets_cidr":{"references":["var.private_subnets_cidr"]},"public_subnets_cidr":{"references":["var.public_subnets_cidr"]},"vpc_cidr":{"references":["var.vpc_cidr"]}},"module":{"outputs":{"vpc_id":{"expression":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}}},"resources":[{"address":"aws_eip.n9n_nat_eip","mode":"managed","type":"aws_eip","name":"n9n_nat_eip","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"vpc":{"constant_value":true}},"schema_version":0,"depends_on":["aws_internet_gateway.n9n_ig"]},{"address":"aws_internet_gateway.n9n_ig","mode":"managed","type":"aws_internet_gateway","name":"n9n_ig","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":0},{"address":"aws_nat_gateway.n9n_nat_gw","mode":"managed","type":"aws_nat_gateway","name":"n9n_nat_gw","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"allocation_id":{"references":["aws_eip.n9n_nat_eip.id","aws_eip.n9n_nat_eip"]},"subnet_id":{"references":["aws_subnet.public_subnet"]},"tags":{"references":["var.env","var.env"]}},"schema_version":0,"depends_on":["aws_internet_gateway.n9n_ig"]},{"address":"aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.n9n_nat_gw.id","aws_nat_gateway.n9n_nat_gw"]},"route_table_id":{"references":["aws_route_table.private.id","aws_route_table.private"]}},"schema_version":0},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.n9n_ig.id","aws_internet_gateway.n9n_ig"]},"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]}},"schema_version":0},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":0},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":0},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private.id","aws_route_table.private"]},"subnet_id":{"references":["aws_subnet.private_subnet","count.index"]}},"schema_version":0,"count_expression":{"references":["var.private_subnets_cidr"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public_subnet","count.index"]}},"schema_version":0,"count_expression":{"references":["var.public_subnets_cidr"]}},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"description":{"constant_value":"Default security group to allow inbound/outbound from the VPC"},"egress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"name":{"references":["var.env"]},"tags":{"references":["var.env","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":1,"depends_on":["aws_vpc.n9n_vpc"]},{"address":"aws_subnet.private_subnet","mode":"managed","type":"aws_subnet","name":"private_subnet","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"availability_zone":{"references":["var.availability_zones","count.index"]},"cidr_block":{"references":["var.private_subnets_cidr","count.index"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["var.env","var.availability_zones","count.index","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":1,"count_expression":{"references":["var.private_subnets_cidr"]}},{"address":"aws_subnet.public_subnet","mode":"managed","type":"aws_subnet","name":"public_subnet","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"availability_zone":{"references":["var.availability_zones","count.index"]},"cidr_block":{"references":["var.public_subnets_cidr","count.index"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.env","var.availability_zones","count.index","var.env"]},"vpc_id":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"schema_version":1,"count_expression":{"references":["var.public_subnets_cidr"]}},{"address":"aws_vpc.n9n_vpc","mode":"managed","type":"aws_vpc","name":"n9n_vpc","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["var.env","var.env"]}},"schema_version":1},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"module.stage_vpc.module.vpc:aws","schema_version":0}],"module_calls":{"ssh-bastion-service":{"source":"github.com/joshuamkite/terraform-aws-ssh-bastion-service","expressions":{"aws_region":{"references":["var.aws_region"]},"bastion_instance_types":{"constant_value":["t3.micro"]},"cidr_blocks_whitelist_service":{"references":["var.everyone_cidr"]},"environment_name":{"references":["var.env"]},"public_ip":{"constant_value":true},"subnets_asg":{"references":["aws_subnet.private_subnet"]},"subnets_lb":{"references":["aws_subnet.private_subnet"]},"vpc":{"references":["aws_vpc.n9n_vpc.id","aws_vpc.n9n_vpc"]}},"module":{"outputs":{"bastion_service_assume_role_name":{"expression":{"references":["aws_iam_role.bastion_service_assume_role"]},"description":"role created for service host asg - if created with assume role"},"bastion_service_role_name":{"expression":{"references":["aws_iam_role.bastion_service_role"]},"description":"role created for service host asg - if created without assume role"},"bastion_sg_id":{"expression":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"description":"Security Group id of the bastion host"},"lb_arn":{"expression":{"references":["aws_lb.bastion-service.arn","aws_lb.bastion-service"]},"description":"aws load balancer arn"},"lb_dns_name":{"expression":{"references":["aws_lb.bastion-service.dns_name","aws_lb.bastion-service"]},"description":"aws load balancer dns"},"lb_zone_id":{"expression":{"references":["aws_lb.bastion-service.zone_id","aws_lb.bastion-service"]}},"policy_example_for_parent_account_empty_if_not_used":{"expression":{"references":["local.assume_role_yes_bool","local.sample_policies_for_parent_account"]},"description":"You must apply an IAM policy with trust relationship identical or compatible with this in your other AWS account for IAM lookups to function there with STS:AssumeRole and allow users to login"},"service_dns_entry":{"expression":{"references":["aws_route53_record.bastion_service"]},"description":"dns-registered url for service and host"},"target_group_arn":{"expression":{"references":["aws_lb_target_group.bastion-service.arn","aws_lb_target_group.bastion-service"]},"description":"aws load balancer target group arn"}},"resources":[{"address":"aws_autoscaling_group.bastion-service","mode":"managed","type":"aws_autoscaling_group","name":"bastion-service","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"desired_capacity":{"references":["var.asg_desired"]},"enabled_metrics":{"references":["var.autoscaling_group_enabled_metrics"]},"max_size":{"references":["var.asg_max"]},"min_size":{"references":["var.asg_min"]},"mixed_instances_policy":[{"instances_distribution":[{"on_demand_base_capacity":{"references":["var.on_demand_base_capacity"]},"on_demand_percentage_above_base_capacity":{"constant_value":0}}],"launch_template":[{"launch_template_specification":[{"launch_template_id":{"references":["aws_launch_template.bastion-service-host.id","aws_launch_template.bastion-service-host"]},"version":{"constant_value":"$Latest"}}]}]}],"name_prefix":{"references":["var.service_name"]},"target_group_arns":{"references":["aws_lb_target_group.bastion-service.arn","aws_lb_target_group.bastion-service","aws_lb_target_group.bastion-host"]},"vpc_zone_identifier":{"references":["var.subnets_asg"]}},"schema_version":0},{"address":"aws_iam_instance_profile.bastion_service_assume_role_profile","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_assume_role_profile","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"role":{"references":["aws_iam_role.bastion_service_assume_role[0].name","aws_iam_role.bastion_service_assume_role[0]","aws_iam_role.bastion_service_assume_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_instance_profile.bastion_service_profile","mode":"managed","type":"aws_iam_instance_profile","name":"bastion_service_profile","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"role":{"references":["aws_iam_role.bastion_service_role[0].name","aws_iam_role.bastion_service_role[0]","aws_iam_role.bastion_service_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_iam_policy.bastion_service_assume_role_in_parent","mode":"managed","type":"aws_iam_policy","name":"bastion_service_assume_role_in_parent","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"policy":{"references":["data.aws_iam_policy_document.bastion_service_assume_role_in_parent[0].json","data.aws_iam_policy_document.bastion_service_assume_role_in_parent[0]","data.aws_iam_policy_document.bastion_service_assume_role_in_parent"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_policy.check_ssh_authorized_keys","mode":"managed","type":"aws_iam_policy","name":"check_ssh_authorized_keys","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"policy":{"references":["data.aws_iam_policy_document.check_ssh_authorized_keys[0].json","data.aws_iam_policy_document.check_ssh_authorized_keys[0]","data.aws_iam_policy_document.check_ssh_authorized_keys"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_iam_role.bastion_service_assume_role","mode":"managed","type":"aws_iam_role","name":"bastion_service_assume_role","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.bastion_service_assume_role[0].json","data.aws_iam_policy_document.bastion_service_assume_role[0]","data.aws_iam_policy_document.bastion_service_assume_role"]},"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_role.bastion_service_role","mode":"managed","type":"aws_iam_role","name":"bastion_service_role","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.bastion_service_role_assume[0].json","data.aws_iam_policy_document.bastion_service_role_assume[0]","data.aws_iam_policy_document.bastion_service_role_assume"]},"name":{"references":["var.service_name","var.environment_name","data.aws_region.current.name","data.aws_region.current","var.vpc","var.service_name"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_iam_role_policy_attachment.bastion_service_assume_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"bastion_service_assume_role","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.bastion_service_assume_role_in_parent[0].arn","aws_iam_policy.bastion_service_assume_role_in_parent[0]","aws_iam_policy.bastion_service_assume_role_in_parent"]},"role":{"references":["aws_iam_role.bastion_service_assume_role[0].name","aws_iam_role.bastion_service_assume_role[0]","aws_iam_role.bastion_service_assume_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"aws_iam_role_policy_attachment.check_ssh_authorized_keys","mode":"managed","type":"aws_iam_role_policy_attachment","name":"check_ssh_authorized_keys","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.check_ssh_authorized_keys[0].arn","aws_iam_policy.check_ssh_authorized_keys[0]","aws_iam_policy.check_ssh_authorized_keys"]},"role":{"references":["aws_iam_role.bastion_service_role[0].name","aws_iam_role.bastion_service_role[0]","aws_iam_role.bastion_service_role"]}},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"aws_launch_template.bastion-service-host","mode":"managed","type":"aws_launch_template","name":"bastion-service-host","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"block_device_mappings":[{"device_name":{"references":["var.bastion_ebs_device_name"]},"ebs":[{"delete_on_termination":{"constant_value":"true"},"volume_size":{"references":["var.bastion_ebs_size"]},"volume_type":{"constant_value":"gp2"}}]}],"iam_instance_profile":[{"name":{"references":["aws_iam_instance_profile.bastion_service_assume_role_profile","aws_iam_instance_profile.bastion_service_profile"]}}],"image_id":{"references":["local.bastion_ami_id"]},"instance_type":{"references":["var.bastion_instance_types[0]","var.bastion_instance_types"]},"key_name":{"references":["var.bastion_service_host_key_name"]},"name_prefix":{"references":["var.service_name","var.environment_name"]},"network_interfaces":[{"associate_public_ip_address":{"references":["var.public_ip"]},"delete_on_termination":{"references":["var.delete_network_interface_on_termination"]},"security_groups":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service","var.security_groups_additional"]}}],"tags":{"references":["var.tags"]},"user_data":{"references":["data.cloudinit_config.config.rendered","data.cloudinit_config.config"]}},"schema_version":0},{"address":"aws_lb.bastion-service","mode":"managed","type":"aws_lb","name":"bastion-service","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"enable_cross_zone_load_balancing":{"constant_value":true},"internal":{"references":["var.lb_is_internal"]},"load_balancer_type":{"constant_value":"network"},"name":{"references":["var.service_name","var.environment_name"]},"subnets":{"references":["var.subnets_lb"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_lb_listener.bastion-host","mode":"managed","type":"aws_lb_listener","name":"bastion-host","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.bastion-host[0].arn","aws_lb_target_group.bastion-host[0]","aws_lb_target_group.bastion-host"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.bastion-service.arn","aws_lb.bastion-service"]},"port":{"constant_value":"2222"},"protocol":{"constant_value":"TCP"}},"schema_version":0,"count_expression":{"references":["local.hostport_whitelisted"]}},{"address":"aws_lb_listener.bastion-service","mode":"managed","type":"aws_lb_listener","name":"bastion-service","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.bastion-service.arn","aws_lb_target_group.bastion-service"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.bastion-service.arn","aws_lb.bastion-service"]},"port":{"references":["var.bastion_service_port"]},"protocol":{"constant_value":"TCP"}},"schema_version":0},{"address":"aws_lb_target_group.bastion-host","mode":"managed","type":"aws_lb_target_group","name":"bastion-host","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"health_check":[{"healthy_threshold":{"references":["var.lb_healthy_threshold"]},"interval":{"references":["var.lb_interval"]},"port":{"references":["var.lb_healthcheck_port"]},"protocol":{"constant_value":"TCP"},"unhealthy_threshold":{"references":["var.lb_unhealthy_threshold"]}}],"name":{"references":["var.service_name","var.environment_name"]},"port":{"constant_value":2222},"protocol":{"constant_value":"TCP"},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":0,"count_expression":{"references":["local.hostport_whitelisted"]}},{"address":"aws_lb_target_group.bastion-service","mode":"managed","type":"aws_lb_target_group","name":"bastion-service","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"health_check":[{"healthy_threshold":{"references":["var.lb_healthy_threshold"]},"interval":{"references":["var.lb_interval"]},"port":{"references":["var.lb_healthcheck_port"]},"protocol":{"constant_value":"TCP"},"unhealthy_threshold":{"references":["var.lb_unhealthy_threshold"]}}],"name":{"references":["var.service_name","var.environment_name","var.bastion_service_port"]},"port":{"references":["var.bastion_service_port"]},"protocol":{"constant_value":"TCP"},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":0},{"address":"aws_route53_record.bastion_service","mode":"managed","type":"aws_route53_record","name":"bastion_service","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":true},"name":{"references":["aws_lb.bastion-service.dns_name","aws_lb.bastion-service"]},"zone_id":{"references":["aws_lb.bastion-service.zone_id","aws_lb.bastion-service"]}}],"name":{"references":["var.route53_fqdn","local.route53_name_components","var.route53_fqdn"]},"type":{"constant_value":"A"},"zone_id":{"references":["var.route53_zone_id"]}},"schema_version":2,"count_expression":{"references":["var.route53_zone_id"]}},{"address":"aws_security_group.bastion_service","mode":"managed","type":"aws_security_group","name":"bastion_service","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"description":{"constant_value":"Bastion service"},"name_prefix":{"references":["var.service_name","var.environment_name","var.service_name","var.service_name"]},"revoke_rules_on_delete":{"constant_value":true},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":1},{"address":"aws_security_group_rule.bastion_host_out","mode":"managed","type":"aws_security_group_rule","name":"bastion_host_out","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"description":{"constant_value":"bastion service and host egress"},"from_port":{"constant_value":0},"protocol":{"constant_value":-1},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"constant_value":65535},"type":{"constant_value":"egress"}},"schema_version":2,"count_expression":{"references":["var.custom_outbound_security_group"]}},{"address":"aws_security_group_rule.host_ssh_in_cond","mode":"managed","type":"aws_security_group_rule","name":"host_ssh_in_cond","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"references":["var.cidr_blocks_whitelist_host"]},"description":{"constant_value":"bastion HOST access"},"from_port":{"constant_value":2222},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"constant_value":2222},"type":{"constant_value":"ingress"}},"schema_version":2,"count_expression":{"references":["local.hostport_whitelisted"]}},{"address":"aws_security_group_rule.lb_healthcheck_in","mode":"managed","type":"aws_security_group_rule","name":"lb_healthcheck_in","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"references":["data.aws_subnet.lb_subnets"]},"description":{"constant_value":"access from load balancer CIDR ranges for healthchecks"},"from_port":{"references":["var.lb_healthcheck_port"]},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"references":["var.lb_healthcheck_port"]},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.service_ssh_in","mode":"managed","type":"aws_security_group_rule","name":"service_ssh_in","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"cidr_blocks":{"references":["var.cidr_blocks_whitelist_service"]},"description":{"constant_value":"bastion service access"},"from_port":{"constant_value":22},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.bastion_service.id","aws_security_group.bastion_service"]},"to_port":{"constant_value":22},"type":{"constant_value":"ingress"}},"schema_version":2,"count_expression":{"references":["local.cidr_blocks_whitelist_service_yes"]}},{"address":"data.aws_ami.debian","mode":"data","type":"aws_ami","name":"debian","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"constant_value":["debian-11-amd64-*"]}},{"name":{"constant_value":"virtualization-type"},"values":{"constant_value":["hvm"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["136693071363"]}},"schema_version":0},{"address":"data.aws_default_tags.this","mode":"data","type":"aws_default_tags","name":"this","provider_config_key":"module.stage_vpc.module.vpc:aws","schema_version":0},{"address":"data.aws_iam_policy_document.bastion_service_assume_role","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_assume_role","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"data.aws_iam_policy_document.bastion_service_assume_role_in_parent","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_assume_role_in_parent","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.assume_role_arn"]}}]},"schema_version":0,"count_expression":{"references":["local.assume_role_yes"]}},{"address":"data.aws_iam_policy_document.bastion_service_role_assume","mode":"data","type":"aws_iam_policy_document","name":"bastion_service_role_assume","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"data.aws_iam_policy_document.check_ssh_authorized_keys","mode":"data","type":"aws_iam_policy_document","name":"check_ssh_authorized_keys","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["iam:ListUsers","iam:GetGroup","iam:GetSSHPublicKey","iam:ListSSHPublicKeys","iam:GetUser","iam:ListGroups","ec2:DescribeTags"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0,"count_expression":{"references":["local.assume_role_no"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"module.stage_vpc.module.vpc:aws","schema_version":0},{"address":"data.aws_subnet.lb_subnets","mode":"data","type":"aws_subnet","name":"lb_subnets","provider_config_key":"module.stage_vpc.module.vpc:aws","expressions":{"id":{"references":["var.subnets_lb","count.index"]}},"schema_version":0,"count_expression":{"references":["var.subnets_lb"]}},{"address":"data.cloudinit_config.config","mode":"data","type":"cloudinit_config","name":"config","provider_config_key":"module.stage_vpc.module.vpc.module.ssh-bastion-service:cloudinit","expressions":{"base64_encode":{"constant_value":false},"gzip":{"constant_value":false},"part":[{"content":{"references":["local.custom_systemd_no","local.systemd"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_systemd"}},{"content":{"references":["local.assume_role_yes","local.custom_ssh_populate_no","local.ssh_populate_assume_role"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_ssh_populate_assume_role"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["local.assume_role_no","local.custom_ssh_populate_no","local.ssh_populate_same_account"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_ssh_populate_same_account"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["local.custom_docker_setup_no","local.docker_setup"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_docker_setup"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["local.custom_authorized_keys_command_no","local.iam_authorized_keys_command"]},"content_type":{"constant_value":"text/x-shellscript"},"filename":{"constant_value":"module_iam-authorized-keys-command"},"merge_type":{"constant_value":"str(append)"}},{"content":{"references":["var.extra_user_data_content","var.extra_user_data_content"]},"content_type":{"references":["var.extra_user_data_content_type"]},"filename":{"constant_value":"extra_user_data"},"merge_type":{"references":["var.extra_user_data_merge_type"]}}]},"schema_version":0}],"variables":{"asg_desired":{"default":"1","description":"Desired numbers of bastion-service hosts in ASG"},"asg_max":{"default":"2","description":"Max numbers of bastion-service hosts in ASG"},"asg_min":{"default":"1","description":"Min numbers of bastion-service hosts in ASG"},"assume_role_arn":{"default":"","description":"arn for role to assume in separate identity account if used"},"autoscaling_group_enabled_metrics":{"default":[],"description":"A list of CloudWatch metrics to collect on the autoscaling group. Permitted values include: GroupMinSize; GroupMaxSize; GroupDesiredCapacity; GroupInServiceInstances; GroupPendingInstances; GroupStandbyInstances; GroupTerminatingInstances; GroupTotalInstances"},"aws_profile":{"default":""},"aws_region":{},"bastion_allowed_iam_group":{"default":"","description":"Name IAM group, members of this group will be able to ssh into bastion instances if they have provided ssh key in their profile"},"bastion_ebs_device_name":{"default":"/dev/sda1","description":"Name of bastion instance block device"},"bastion_ebs_size":{"default":8,"description":"Size of EBS attached to the bastion instance"},"bastion_host_name":{"default":"","description":"The hostname to give to the bastion instance"},"bastion_instance_types":{"default":["t3.small","t3.medium","t3.large"],"description":"List of ec2 types for the bastion host, used by aws_launch_template (first from the list) and in aws_autoscaling_group"},"bastion_service_host_key_name":{"default":"","description":"AWS ssh key *.pem to be used for ssh access to the bastion service host"},"bastion_service_port":{"default":22,"description":"Port for containerised ssh daemon"},"bastion_vpc_name":{"default":"vpc_id","description":"define the last part of the hostname, by default this is the vpc ID with magic default value of 'vpc_id' but you can pass a custom string, or an empty value to omit this"},"cidr_blocks_whitelist_host":{"default":[],"description":"range(s) of incoming IP addresses to whitelist for the HOST"},"cidr_blocks_whitelist_service":{"default":[],"description":"range(s) of incoming IP addresses to whitelist for the SERVICE"},"container_ubuntu_version":{"default":"22.04","description":"ubuntu version to use for service container"},"custom_ami_id":{"default":"","description":"id for custom ami if used"},"custom_authorized_keys_command":{"default":"","description":"any value excludes default Go binary iam-authorized-keys built from source from userdata"},"custom_docker_setup":{"default":"","description":"any value excludes default docker installation and container build from userdata"},"custom_outbound_security_group":{"default":false,"description":"don't create default outgoing permissive security group rule - will only work with custom AMI or if security group supplied with ports 53(UDP); 80(TCP); 443(TCP) open for 0.0.0.0/0 egress"},"custom_ssh_populate":{"default":"","description":"any value excludes default ssh_populate script used on container launch from userdata"},"custom_systemd":{"default":"","description":"any value excludes default systemd and hostname change from userdata"},"delete_network_interface_on_termination":{"default":true,"description":"if network interface created for bastion host should be deleted when instance in terminated. Setting propagated to aws_launch_template.network_interfaces.delete_on_termination"},"dns_domain":{"default":"","description":"The domain used for Route53 records"},"environment_name":{"default":"staging","description":"the name of the environment that we are deploying to, used in tagging. Overwritten if var.service_name and var.bastion_host_name values are changed"},"extra_user_data_content":{"default":"","description":"Extra user-data to add to the default built-in"},"extra_user_data_content_type":{"default":"text/x-shellscript","description":"What format is content in - eg 'text/cloud-config' or 'text/x-shellscript'"},"extra_user_data_merge_type":{"default":"str(append)","description":"Control how cloud-init merges user-data sections"},"lb_healthcheck_port":{"default":"2222","description":"TCP port to conduct lb target group healthchecks. Acceptable values are 2222 or the value defined for `bastion_service_port`"},"lb_healthy_threshold":{"default":"2","description":"Healthy threshold for lb target group"},"lb_interval":{"default":"30","description":"interval for lb target group health check"},"lb_is_internal":{"default":"false","description":"whether the lb will be internal"},"lb_unhealthy_threshold":{"default":"2","description":"Unhealthy threshold for lb target group"},"on_demand_base_capacity":{"default":0,"description":"allows a base level of on demand when using spot"},"public_ip":{"default":false,"description":"Associate a public IP with the host instance when launching"},"route53_fqdn":{"default":"","description":"If creating a public DNS entry with this module then you may override the default constructed DNS entry by supplying a fully qualified domain name here which will be used verbatim"},"route53_zone_id":{"default":"","description":"Route53 zoneId"},"security_groups_additional":{"default":[],"description":"additional security group IDs to attach to host instance"},"service_name":{"default":"bastion-service","description":"Unique name per vpc for associated resources- set to some non-default value for multiple deployments per vpc"},"subnets_asg":{"description":"list of subnets for autoscaling group - availability zones must match subnets_lb"},"subnets_lb":{"description":"list of subnets for load balancer - availability zones must match subnets_asg"},"tags":{"default":{},"description":"AWS tags that should be associated with created resources"},"vpc":{"description":"ID for Virtual Private Cloud to apply security policy and deploy stack to"}}}}},"variables":{"availability_zones":{"description":"AZ count"},"aws_region":{"description":"AWS Region"},"bastion_instance_types":{"default":["t3.small","t3.medium","t3.large"],"description":"List of ec2 types for the bastion host"},"cidr_blocks_whitelist_service":{"default":[],"description":"range(s) of incoming IP addresses to whitelist"},"env":{"description":"Environment to deploy to"},"everyone_cidr":{"default":"0.0.0.0/0","description":"Everyone"},"private_subnets_cidr":{"description":"CIDR for the private subnet"},"public_ip":{"default":false,"description":"Associate a public IP with the host instance during launch"},"public_subnets_cidr":{"description":"CIDR for public subnet"},"vpc_cidr":{"description":"CIDR block"}}}}},"variables":{"env":{"default":"stage","description":"The environment for the resources"},"private_subnets_cidr":{"default":["10.0.10.0/24"],"description":"CIDR for the private subnet"},"public_subnets_cidr":{"default":["10.0.1.0/24"],"description":"CIDR for the public subnet"},"region":{"default":"us-east-1","description":"AWS region for the resources"},"vpc_cidr":{"default":"10.0.0.0/16","description":"CIDR for the VPC"}}}}},"variables":{"region":{"default":"us-east-1","description":"The AWS region to create resources in"}}}},"relevant_attributes":[{"resource":"module.dev_vpc.module.vpc.aws_vpc.n9n_vpc","attribute":["id"]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","attribute":["id"]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","attribute":["id"]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume[0]","attribute":["json"]},{"resource":"module.liferay.module.liferay.aws_lb_target_group.liferay_cluster_targets","attribute":["arn"]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","attribute":["dns_name"]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","attribute":["arn"]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","attribute":["arn"]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","attribute":["arn"]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","attribute":["dns_name"]},{"resource":"module.liferay.module.liferay.data.aws_subnets.selected_subnets","attribute":["ids"]},{"resource":"module.liferay.module.liferay.aws_launch_configuration.liferay_cluster_lc","attribute":["name"]},{"resource":"module.liferay.module.liferay.aws_lb.liferay_cluster_lb","attribute":["arn"]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_assume_role","attribute":[]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_assume_role","attribute":[]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_security_group.bastion_service","attribute":["id"]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","attribute":["arn"]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","attribute":["zone_id"]},{"resource":"module.liferay.module.liferay.aws_security_group.liferay_cluster_sg","attribute":["id"]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","attribute":["name"]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume[0]","attribute":["json"]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_assume_role[0]","attribute":["json"]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","attribute":[]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","attribute":[]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_route53_record.bastion_service","attribute":[]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","attribute":["zone_id"]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","attribute":["name"]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_assume_role[0]","attribute":["json"]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_role_assume[0]","attribute":["json"]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb_target_group.bastion-service","attribute":["arn"]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","attribute":["dns_name"]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","attribute":["arn"]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_route53_record.bastion_service","attribute":[]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.data.aws_iam_policy_document.bastion_service_assume_role[0]","attribute":["json"]},{"resource":"module.liferay.module.liferay.data.aws_vpc.selected_vpc","attribute":["id"]},{"resource":"module.prod_vpc.module.vpc.aws_vpc.n9n_vpc","attribute":["id"]},{"resource":"module.stage_vpc.module.vpc.aws_vpc.n9n_vpc","attribute":["id"]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_assume_role","attribute":[]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_iam_role.bastion_service_role","attribute":[]},{"resource":"module.prod_vpc.module.vpc.module.ssh-bastion-service.aws_lb.bastion-service","attribute":["zone_id"]},{"resource":"module.stage_vpc.module.vpc.module.ssh-bastion-service.aws_route53_record.bastion_service","attribute":[]},{"resource":"module.dev_vpc.module.vpc.module.ssh-bastion-service.data.aws_region.current","attribute":["name"]},{"resource":"module.liferay.module.liferay.aws_lb_listener.liferay_cluster_listener","attribute":["arn"]}]}
